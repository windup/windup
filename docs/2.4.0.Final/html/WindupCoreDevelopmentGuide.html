<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<title>Windup Core Development Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
</head>
<body class="book">
<div id="header">
<h1>Windup Core Development Guide</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a></li>
<li><a href="#_get_started">2. Get Started</a>
<ul class="sectlevel2">
<li><a href="#Install-and-Configure-Maven">2.1. Install and Configure Maven</a>
<ul class="sectlevel3">
<li><a href="#_overview">2.1.1. Overview</a></li>
<li><a href="#_download_and_install_maven">2.1.2. Download and Install Maven</a></li>
<li><a href="#configure-the-ide-to-use-the-updated-maven">2.1.3. Configure the IDE to Use the Updated Maven</a></li>
</ul>
</li>
<li><a href="#Dev-Create-Your-First-Java-based-Rule-Add-on">2.2. Create Your First Java-based Rule Add-on</a>
<ul class="sectlevel3">
<li><a href="#_overview_2">2.2.1. Overview</a></li>
<li><a href="#_rule_example_description">2.2.2. Rule Example Description</a></li>
<li><a href="#_create_the_maven_project">2.2.3. Create the Maven Project</a></li>
<li><a href="#_configure_the_maven_pom_for_windup">2.2.4. Configure the Maven POM for Windup</a></li>
<li><a href="#_create_the_rule_provider_class">2.2.5. Create the Rule Provider Class</a></li>
<li><a href="#_create_data_to_test_the_rule">2.2.6. Create Data to Test the Rule</a></li>
<li><a href="#_compile_and_install_the_rule_in_the_local_maven_repository">2.2.7. Compile and Install the Rule in the Local Maven Repository</a></li>
<li><a href="#_add_the_rule_to_windup">2.2.8. Add the Rule to Windup</a></li>
<li><a href="#_test_the_rule">2.2.9. Test the Rule</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_prepare_your_development_environment">3. Prepare Your Development Environment</a>
<ul class="sectlevel2">
<li><a href="#Dev-Get-the-Source-Code">3.1. Get the Windup Source Code</a>
<ul class="sectlevel3">
<li><a href="#_install_the_git_client">3.1.1. Install the Git Client</a></li>
<li><a href="#_fork_and_clone_the_windup_repository">3.1.2. Fork and Clone the Windup Repository</a></li>
<li><a href="#_fork_and_clone_the_windup_rulesets_repository">3.1.3. Fork and Clone the Windup Rulesets Repository</a></li>
<li><a href="#_fork_and_clone_the_windup_distribution_repository">3.1.4. Fork and Clone the Windup Distribution Repository</a></li>
</ul>
</li>
<li><a href="#Dev-Build-from-Source">3.2. Build Windup from Source</a>
<ul class="sectlevel3">
<li><a href="#_overview_3">3.2.1. Overview</a></li>
<li><a href="#_system_requirements">3.2.2. System Requirements</a></li>
<li><a href="#_prerequisites">3.2.3. Prerequisites</a></li>
<li><a href="#_build_using_red_hat_jboss_developer_studio_or_eclipse">3.2.4. Build Using Red Hat JBoss Developer Studio or Eclipse</a></li>
<li><a href="#_build_using_maven_command_line">3.2.5. Build Using Maven Command Line</a></li>
<li><a href="#_extract_the_distribution_source_file">3.2.6. Extract the Distribution Source File</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_understand_the_windup_architecture_and_structure">4. Understand the Windup Architecture and Structure</a>
<ul class="sectlevel2">
<li><a href="#Architectural-Components">4.1. Windup Architectural Components</a>
<ul class="sectlevel3">
<li><a href="#_forge">4.1.1. Forge</a></li>
<li><a href="#_forge_furnace">4.1.2. Forge Furnace</a></li>
<li><a href="#_tinkerpop">4.1.3. TinkerPop</a></li>
<li><a href="#_titan">4.1.4. Titan</a></li>
<li><a href="#_frames">4.1.5. Frames</a></li>
<li><a href="#_gremlin">4.1.6. Gremlin</a></li>
<li><a href="#_blueprints">4.1.7. Blueprints</a></li>
<li><a href="#_pipes">4.1.8. Pipes</a></li>
<li><a href="#_rexster">4.1.9. Rexster</a></li>
<li><a href="#_ocpsoft_rewrite">4.1.10. OCPsoft Rewrite</a></li>
</ul>
</li>
<li><a href="#Dev-Project-Structure">4.2. Windup Core Project Structure</a></li>
</ul>
</li>
<li><a href="#_rules_and_rulesets">5. Rules and Rulesets</a>
<ul class="sectlevel2">
<li><a href="#Processing-Overview">5.1. Windup Processing Overview</a>
<ul class="sectlevel3">
<li><a href="#_windup_core_rules">5.1.1. Windup Core Rules</a></li>
<li><a href="#_application_migration">5.1.2. Application Migration</a></li>
<li><a href="#_generate_findings_based_on_the_rule_execution_results">5.1.3. Generate Findings Based on the Rule Execution Results</a></li>
</ul>
</li>
<li><a href="#Rules-Rule-Execution-Lifecycle">5.2. Rule Execution Lifecycle</a>
<ul class="sectlevel3">
<li><a href="#_set_the_rule_execution_phase">5.2.1. Set the Rule Execution Phase</a></li>
<li><a href="#_control_the_execution_order_within_the_rule_phase">5.2.2. Control the Execution Order Within the Rule Phase</a></li>
<li><a href="#_code_example_using_the_annotation_method">5.2.3. Code Example Using the Annotation Method</a></li>
<li><a href="#_code_example_using_the_constructor_method">5.2.4. Code Example Using the Constructor Method</a></li>
<li><a href="#_additional_information">5.2.5. Additional Information</a></li>
</ul>
</li>
<li><a href="#Rule-Phases">5.3. Rule Phases</a></li>
<li><a href="#Rules-Available-Rules-Utilities">5.4. Available Rule Utilities</a>
<ul class="sectlevel3">
<li><a href="#_programmatically_access_the_graph">5.4.1. Programmatically Access the Graph</a></li>
<li><a href="#_modify_graph_data">5.4.2. Modify Graph Data</a></li>
</ul>
</li>
<li><a href="#Rules-Rule-Story-Points">5.5. Rule Story Points</a>
<ul class="sectlevel3">
<li><a href="#_what_are_story_points">5.5.1. What are Story Points?</a></li>
<li><a href="#_how_story_points_are_estimated_in_rules">5.5.2. How Story Points are Estimated in Rules</a></li>
<li><a href="#_task_severity">5.5.3. Task Severity</a></li>
</ul>
</li>
<li><a href="#Rules-Difference-Between-XML-based-and-Java-based-Rules">5.6. Difference Between XML-based and Java-based Rules</a>
<ul class="sectlevel3">
<li><a href="#_summary">5.6.1. Summary</a></li>
<li><a href="#_which_one_to_choose">5.6.2. Which one to choose?</a></li>
<li><a href="#_pros_and_cons_of_xml_based_rules">5.6.3. Pros and Cons of XML-based Rules</a></li>
<li><a href="#_pros_and_cons_of_java_based_rules">5.6.4. Pros and Cons of Java-based Rules</a></li>
<li><a href="#_examples_of_xml_based_and_java_based_rules">5.6.5. Examples of XML-based and Java Based Rules</a></li>
<li><a href="#_quick_comparison_summary">5.6.6. Quick Comparison Summary</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_create_and_test_java_rule_add_ons">6. Create and Test Java Rule Add-ons</a>
<ul class="sectlevel2">
<li><a href="#Rules-Java-based-Rule-Structure">6.1. Java-based Rule Structure</a>
<ul class="sectlevel3">
<li><a href="#_ruleprovider">6.1.1. RuleProvider</a></li>
<li><a href="#add-rule-code-structure">6.1.2. Add Rule Code Structure</a></li>
<li><a href="#_available_utilities">6.1.3. Available utilities</a></li>
</ul>
</li>
<li><a href="#Rules-Basic-Rule-Execution-Flow-Patterns">6.2. Basic Rule Execution Flow Patterns</a>
<ul class="sectlevel3">
<li><a href="#_single_operation_operation">6.2.1. Single Operation - operation();</a></li>
<li><a href="#_single_conditional_operation_if_operation">6.2.2. Single Conditional Operation - if( &#8230;&#8203; ){ operation()}</a></li>
<li><a href="#_single_iteration_for_foomodel_class">6.2.3. Single Iteration - for( FooModel.class ){ &#8230;&#8203; }</a></li>
<li><a href="#_conditional_iteration_if_for">6.2.4. Conditional Iteration - if( &#8230;&#8203; ){ for( &#8230;&#8203; ) }</a></li>
<li><a href="#_iteration_with_a_condition_for_if">6.2.5. Iteration With a Condition - for( &#8230;&#8203; ){ if( &#8230;&#8203; ){ &#8230;&#8203; } }</a></li>
<li><a href="#_nested_iterations_for_for">6.2.6. Nested Iterations - for( &#8230;&#8203; ){ for( &#8230;&#8203; ) { &#8230;&#8203; } }</a></li>
</ul>
</li>
<li><a href="#Rules-Create-a-Basic-Java-based-Rule-Add-on">6.3. Create a Basic Java-based Rule Add-on</a>
<ul class="sectlevel3">
<li><a href="#_prerequisites_2">6.3.1. Prerequisites</a></li>
<li><a href="#_create_the_maven_project_2">6.3.2. Create the Maven Project</a></li>
<li><a href="#_create_the_java_ruleprovider_class">6.3.3. Create the Java RuleProvider Class</a></li>
<li><a href="#_install_the_java_based_rule_add_on_in_your_local_maven_repository">6.3.4. Install the Java-based Rule Add-on in Your Local Maven Repository</a></li>
<li><a href="#add-the-rule-to-windup">6.3.5. Add the Rule to Windup</a></li>
<li><a href="#_test_the_java_based_rule_add_on">6.3.6. Test the Java-based Rule Add-on</a></li>
<li><a href="#_review_the_output_report">6.3.7. Review the Output Report</a></li>
<li><a href="#_debugging_profiling_and_logging">6.3.8. Debugging, Profiling, and Logging</a></li>
</ul>
</li>
<li><a href="#Dev-Debugging-and-Profiling">6.4. Debugging and Profiling</a>
<ul class="sectlevel3">
<li><a href="#_configure_logging">6.4.1. Configure Logging</a></li>
<li><a href="#_debug_the_windup_distribution_runtime">6.4.2. Debug the Windup Distribution Runtime</a></li>
<li><a href="#_debug_a_test_using_netbeans">6.4.3. Debug a Test Using NetBeans</a></li>
<li><a href="#_profile_a_test_using_netbeans">6.4.4. Profile a Test Using NetBeans</a></li>
<li><a href="#_profile_forge_runtime_using_yourkit">6.4.5. Profile Forge Runtime Using YourKit</a></li>
<li><a href="#_developer_contributing_information">6.4.6. Developer Contributing Information</a></li>
</ul>
</li>
<li><a href="#Dev-Development-Guidelines-and-Conventions">6.5. Development Guidelines and Conventions</a>
<ul class="sectlevel3">
<li><a href="#project-source-code-formatting">6.5.1. Project Source Code Formatting</a></li>
<li><a href="#source-code-naming-conventions">6.5.2. Source Code Naming Conventions</a></li>
<li><a href="#maven-project-naming-conventions">6.5.3. Maven Project Naming Conventions</a></li>
</ul>
</li>
<li><a href="#Dev-Submit-Code-Updates-to-the-Project">6.6. Submit Code Updates to the Windup Project</a></li>
</ul>
</li>
<li><a href="#_appendix">7. Appendix</a>
<ul class="sectlevel2">
<li><a href="#About-the-HOME-Variable">7.1. About the WINDUP_HOME Variable</a></li>
<li><a href="#Dev-Project-Information">7.2. Windup Project Information</a>
<ul class="sectlevel3">
<li><a href="#_github_repository">7.2.1. Github Repository</a></li>
<li><a href="#_documentation">7.2.2. Documentation</a></li>
<li><a href="#_website">7.2.3. Website</a></li>
<li><a href="#_irc_chat">7.2.4. IRC chat</a></li>
<li><a href="#_mailing_lists">7.2.5. Mailing lists</a></li>
<li><a href="#_core_development_team_and_irc_nicks">7.2.6. Core development team (and IRC nicks)</a></li>
<li><a href="#_irc_meeting_bot_commands_hint_for_the_moderator">7.2.7. IRC meeting bot commands (hint for the moderator)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide is for developers who plan to contribute to the Windup source code base or provide Java-based rule add-ons.</p>
</div>
<div class="paragraph">
<p>If you are new to Windup, it is recommended that you start with the <a href="http://windup.github.io/windup/docs/latest/html/WindupUserGuide.html">Windup User Guide</a>. It provides detailed information about system requirements and detailed instructions on how to install and execute Windup. It also contains tips to optimize performance and provides links to other sources of information about Windup.</p>
</div>
<div class="paragraph">
<p>If you would like to create custom XML-based rules for Windup, see the <a href="http://windup.github.io/windup/docs/latest/html/WindupRulesDevelopmentGuide.html">Windup Rules Development Guide</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_get_started">2. Get Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After you configure Maven, you are ready to create, install, and test your first Windup Java-based rule add-on.</p>
</div>
<div class="sect2">
<h3 id="Install-and-Configure-Maven">2.1. Install and Configure Maven</h3>
<div class="sect3">
<h4 id="_overview">2.1.1. Overview</h4>
<div class="paragraph">
<p>If you plan to build Windup Java-based rule add-ons or contribute to the core source code base, you must first configure Maven.</p>
</div>
<div class="paragraph">
<p>You should already be configured correctly to build Windup and can skip these instructions if you meet one of the following criteria:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You plan to use Maven command line and have already installed Maven 3.1.1 or later.</p>
</li>
<li>
<p>You plan to use Red Hat JBoss Developer Studio (8 or above) or Eclipse Luna (4.4) to build Windup Java-based rule add-ons or source code. These IDEs embed Maven 3.2.1 so you do not need to install it separately.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_download_and_install_maven">2.1.2. Download and Install Maven</h4>
<div class="paragraph">
<p>If plan to use the command line and have not yet installed Maven, or if you plan to use Red Hat JBoss Developer Studio 7.1.1 or an older version of Eclipse, you must download and install Maven 3.1.1. or later.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <a href="http://maven.apache.org/download.html">Apache Maven Project - Download Maven</a> and download the latest distribution for your operating system.</p>
</li>
<li>
<p>See the Maven documentation for information on how to download and install Apache Maven for your operating system.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="configure-the-ide-to-use-the-updated-maven">2.1.3. Configure the IDE to Use the Updated Maven</h4>
<div class="paragraph">
<p>If you plan to  use JBoss Developer Studio 7.1.1 or an Eclipse version earlier than Eclipse Luna (4.4), follow this procedure to replace the embedded 3.0.4 version of Maven with this newer version.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the menu, choose <code>Window</code> -&#8594; <code>Preferences</code>.</p>
</li>
<li>
<p>Expand <code>Maven</code> and click on <code>Installations</code>.</p>
</li>
<li>
<p>Uncheck <code>Embedded (3.0.4/1.4.0.20130531-2315)</code></p>
</li>
<li>
<p>Click <code>Add</code> and navigate to your Maven install directory. Select it and click <code>OK</code>.</p>
</li>
<li>
<p>Be sure the new external Maven installation is checked and click <code>OK</code> to return to JBoss Developer Studio.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><em>NOTE: If you use another IDE, refer to the product documentation to update the Maven installation.</em></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Create-Your-First-Java-based-Rule-Add-on">2.2. Create Your First Java-based Rule Add-on</h3>
<div class="sect3">
<h4 id="_overview_2">2.2.1. Overview</h4>
<div class="paragraph">
<p>This topic guides you through the process of creating and testing your first Windup Java rule-addon using Red Hat JBoss Developer Studio.</p>
</div>
<div class="paragraph">
<p>As you create your first rule, refer to the <a href="http://windup.github.io/windup/docs/latest/javadoc">Windup JavaDoc</a> for valid syntax.</p>
</div>
<div class="paragraph">
<p>Java-based rule construction is covered in more detail here: <a href="#Rules-Create-a-Basic-Java-based-Rule-Add-on">Create a Basic Java-based Rule Add-on</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_rule_example_description">2.2.2. Rule Example Description</h4>
<div class="paragraph">
<p>In this example, you write a ruleset to discover instances where an application Java file uses the proprietary servlet annotations. The ruleset adds the following rules.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Find Java classes that reference the <code>@ProprietaryServlet</code> annotation and provide a hint to replace it with the standard Java EE @WebServlet annotation.</p>
</li>
<li>
<p>Find Java classes that reference the `@ProprietaryInitParam`annotation and provide a hint to replace it with the standard Java EE @WebServlet annotation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You will also provide a data file to test the rule.</p>
</div>
</div>
<div class="sect3">
<h4 id="_create_the_maven_project">2.2.3. Create the Maven Project</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Choose <code>File</code> -&#8594; <code>New</code> -&#8594; <code>Maven Project</code>.</p>
</li>
<li>
<p>Check <code>Create a simple project (skip archetype selection) and leave `Use the default Workspace location</code> checked, then click <code>Next</code>.</p>
</li>
<li>
<p>In the <code>New Maven Project</code> dialog, enter the following values:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Group Id: org.jboss.windup.rules.examples
Artifact Id: proprietary-annotation-example
Version: 1.0.0-SNAPSHOT
Packaging: jar
Name: Proprietary Annotation Example
Description: Rule that finds a proprietary annotation and provides recommendations</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_configure_the_maven_pom_for_windup">2.2.4. Configure the Maven POM for Windup</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In JBoss Developer Studio, open the project <code>pom.xml</code> file and click on the <code>pom.xml</code> tab view.</p>
</li>
<li>
<p>The XML below contains the properties, dependencies, and plug-ins needed to build a Java-based rule add-on. Copy it into the <code>pom.xml</code> file after the <code>&lt;description&gt;</code> and before the final closing `&lt;/project&gt;' element.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-xml" data-lang="xml">&lt;properties&gt;
    &lt;windup.scm.connection&gt;scm:git:https://github.com/windup/windup-rulesets.git&lt;/windup.scm.connection&gt;
    &lt;windup.developer.connection&gt;scm:git:git@github.com:windup/windup-rulesets.git&lt;/windup.developer.connection&gt;
    &lt;windup.scm.url&gt;http://github.com/windup/windup-rulesets&lt;/windup.scm.url&gt;

    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
    &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;
    &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;
    &lt;version.windup&gt;2.4.0-SNAPSHOT&lt;/version.windup&gt;
&lt;/properties&gt;

&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.jboss.windup&lt;/groupId&gt;
            &lt;artifactId&gt;windup-bom&lt;/artifactId&gt;
            &lt;version&gt;${version.windup}&lt;/version&gt;
            &lt;type&gt;pom&lt;/type&gt;
            &lt;scope&gt;import&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;

&lt;dependencies&gt;
    &lt;!-- Windup deps --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.jboss.windup.graph&lt;/groupId&gt;
        &lt;artifactId&gt;windup-graph&lt;/artifactId&gt;
        &lt;classifier&gt;forge-addon&lt;/classifier&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.jboss.windup.config&lt;/groupId&gt;
        &lt;artifactId&gt;windup-config&lt;/artifactId&gt;
        &lt;classifier&gt;forge-addon&lt;/classifier&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.jboss.windup.config&lt;/groupId&gt;
        &lt;artifactId&gt;windup-config-xml&lt;/artifactId&gt;
        &lt;classifier&gt;forge-addon&lt;/classifier&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.jboss.windup.utils&lt;/groupId&gt;
        &lt;artifactId&gt;windup-utils&lt;/artifactId&gt;
        &lt;classifier&gt;forge-addon&lt;/classifier&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.jboss.windup.reporting&lt;/groupId&gt;
        &lt;artifactId&gt;windup-reporting&lt;/artifactId&gt;
        &lt;classifier&gt;forge-addon&lt;/classifier&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;!-- Windup Rules Base --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.jboss.windup.rules.apps&lt;/groupId&gt;
        &lt;artifactId&gt;windup-rules-base&lt;/artifactId&gt;
        &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;/dependency&gt;

    &lt;!-- Other rulesets. --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.jboss.windup.rules.apps&lt;/groupId&gt;
        &lt;artifactId&gt;windup-rules-java&lt;/artifactId&gt;
        &lt;classifier&gt;forge-addon&lt;/classifier&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.jboss.windup.rules.apps&lt;/groupId&gt;
        &lt;artifactId&gt;windup-rules-java-ee&lt;/artifactId&gt;
        &lt;classifier&gt;forge-addon&lt;/classifier&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.jboss.windup.rules.apps&lt;/groupId&gt;
        &lt;artifactId&gt;windup-rules-java-project&lt;/artifactId&gt;
        &lt;classifier&gt;forge-addon&lt;/classifier&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.jboss.forge.furnace.container&lt;/groupId&gt;
        &lt;artifactId&gt;cdi-api&lt;/artifactId&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.jboss.forge.furnace.container&lt;/groupId&gt;
        &lt;artifactId&gt;cdi&lt;/artifactId&gt;
        &lt;classifier&gt;forge-addon&lt;/classifier&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;!-- Test dependencies --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.jboss.forge.furnace.test&lt;/groupId&gt;
        &lt;artifactId&gt;furnace-test-harness&lt;/artifactId&gt;
        &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.jboss.forge.furnace.test&lt;/groupId&gt;
        &lt;artifactId&gt;arquillian-furnace-classpath&lt;/artifactId&gt;
        &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;junit&lt;/groupId&gt;
        &lt;artifactId&gt;junit&lt;/artifactId&gt;
        &lt;version&gt;4.11&lt;/version&gt;
        &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.jboss.windup.exec&lt;/groupId&gt;
        &lt;artifactId&gt;windup-exec&lt;/artifactId&gt;
        &lt;classifier&gt;forge-addon&lt;/classifier&gt;
        &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;

&lt;build&gt;
    &lt;plugins&gt;
        &lt;!-- This plugin makes this artifact a Forge addon. --&gt;
        &lt;plugin&gt;
            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;
            &lt;version&gt;2.5&lt;/version&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;id&gt;create-forge-addon&lt;/id&gt;
                    &lt;phase&gt;package&lt;/phase&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;jar&lt;/goal&gt;
                    &lt;/goals&gt;
                    &lt;configuration&gt;
                        &lt;classifier&gt;forge-addon&lt;/classifier&gt;
                    &lt;/configuration&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_create_the_rule_provider_class">2.2.5. Create the Rule Provider Class</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In JBoss Developer Studio, select the <code>src/main/java</code> directory, right-click, and choose <code>New</code> -&#8594; <code>Class</code>.</p>
</li>
<li>
<p>In the <code>New Java Class</code> dialog, enter the following values, and then click <code>Finish</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Package: com.proprietary.example
Name: ProprietaryServletAnnotationRuleProvider
Superclass: org.jboss.windup.config.AbstractRuleProvider</pre>
</div>
</div>
<div class="paragraph">
<p>This generates the following contents in the <code>ProprietaryServletAnnotationRuleProvider.java</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-java" data-lang="java">package com.proprietary.example;

import org.jboss.windup.config.AbstractRuleProvider;
import org.jboss.windup.graph.GraphContext;
import org.ocpsoft.rewrite.config.Configuration;

public class ProprietaryServletAnnotationRuleProvider extends AbstractRuleProvider {

    public Configuration getConfiguration(GraphContext arg0) {
        // TODO Auto-generated method stub
        return null;
    }

}</code></pre>
</div>
</div>
</li>
<li>
<p>Add the following rule metadata annotation after the imports and before the class declaration.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-java" data-lang="java">@RuleMetadata(tags = "Java",after = {})</code></pre>
</div>
</div>
<div class="paragraph">
<p>Click on <code>x</code> to the left of the newly added line of code and choose "Import 'RuleMetaData'(org.jboss.windup.config.metadata.RuleMetadata)" to resolve the import error. Or if you prefer, manually add the import of <code>org.jboss.windup.config.metadata.RuleMetadata</code>.</p>
</div>
</li>
<li>
<p>Replace the <code>return null;</code> within the getConfiguration() method with the following Java code.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-java" data-lang="java">return ConfigurationBuilder.begin()
    .addRule()
    .when(
        JavaClass.references("com.example.proprietary.ProprietaryServlet").at(TypeReferenceLocation.ANNOTATION)
    )
    .perform(
        Classification.as("Proprietary @ProprietaryServlet")
            .with(Link.to("Java EE 6 @WebServlet", "http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/package-summary.html"))
            .withEffort(0)
            .and(Hint.withText("Replace the proprietary @ProprietaryServlet annotation with the Java EE 6 standard @WebServlet annotation.").withEffort(1)))
    .addRule()
    .when(
        JavaClass.references("com.example.proprietary.ProprietaryInitParam").at(TypeReferenceLocation.ANNOTATION)
    )
    .perform(
        Classification.as("Proprietary @ProprietaryInitParam")
            .with(Link.to("Java EE 6 @WebInitParam", "http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/package-summary.html"))
            .withEffort(0)
            .and(Hint.withText("Replace the proprietary @ProprietaryInitParam annotation with the Java EE 6 standard @WebInitParam annotation.").withEffort(2))

    );</code></pre>
</div>
</div>
</li>
<li>
<p>Add the following imports to resolve the reference errors.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-java" data-lang="java">import org.jboss.windup.ast.java.data.TypeReferenceLocation;
import org.jboss.windup.reporting.config.classification.Classification;
import org.jboss.windup.reporting.config.Hint;
import org.jboss.windup.reporting.config.Link;
import org.jboss.windup.rules.apps.java.condition.JavaClass;
import org.ocpsoft.rewrite.config.ConfigurationBuilder;</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_create_data_to_test_the_rule">2.2.6. Create Data to Test the Rule</h4>
<div class="olist arabic">
<div class="title">In JBoss Developer Studio, select the <code>src/test/resources</code> directory, right-click, and choose <code>New</code> -&#8594; <code>Class</code>.</div>
<ol class="arabic">
<li>
<p>In the <code>New Java Class</code> dialog, enter the following values, and then click <code>Finish</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">Package: com.proprietary.example
Name: MyProprietaryAnnotatonClass
Superclass: javax.servlet.http.HttpServlet</pre>
</div>
</div>
<div class="paragraph">
<p>This generates the following <code>MyProprietaryAnnotationClass.java</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-java" data-lang="java">package com.proprietary.example;

import javax.servlet.http.HttpServlet;

public class MyProprietaryAnnotationClass extends HttpServlet {

}</code></pre>
</div>
</div>
</li>
<li>
<p>Add the proprietary annotations to the test class after the imports and before the class declaration.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-java" data-lang="java">@ProprietaryServlet (
    name = "catalog",
    runAs = "SuperEditor"
    initParams = {
        @ProprietaryInitParam (name="catalog", value="spring"),
        @ProprietaryInitParam (name="language", value="English")
     },
     mapping = {"/catalog/*"}
)</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_compile_and_install_the_rule_in_the_local_maven_repository">2.2.7. Compile and Install the Rule in the Local Maven Repository</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In JBoss Developer Studio, select the <code>proprietary-annotation-example</code> project, right-click, and choose <code>Run As</code> -&#8594; <code>Maven install</code>.</p>
</li>
<li>
<p>You should see the following result, meaning the rule was successfully installed in your local Maven repository.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_add_the_rule_to_windup">2.2.8. Add the Rule to Windup</h4>
<div class="paragraph">
<p>Windup uses the Maven GAV (groupId, artifactId, and version) that is specified in the project POM file to locate the installed rule in the local Maven repository. The command to add the rule to Windup is executed in a terminal from the WINDUP_HOME directory and uses the following syntax.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">bin/windup --install GROUP_ID:ARTIFACT_ID[,VERSION]</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a command prompt and navigate to the <code>WINDUP_HOME</code> directory.</p>
</li>
<li>
<p>Type the following command.</p>
<div class="listingblock">
<div class="content">
<pre>bin/windup --install org.jboss.windup.rules.examples:proprietary-annotation-example,1.0.0-SNAPSHOT</pre>
</div>
</div>
</li>
<li>
<p>At the following prompt, choose <code>Y</code>.</p>
<div class="listingblock">
<div class="content">
<pre>Confirm installation [Y/n]? Y</pre>
</div>
</div>
</li>
<li>
<p>You should see the following result.</p>
<div class="listingblock">
<div class="content">
<pre>Installation completed successfully.</pre>
</div>
</div>
</li>
<li>
<p>Type <code>exit</code> to exit the Windup console.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_test_the_rule">2.2.9. Test the Rule</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a terminal and navigate to the WINDUP_HOME directory.</p>
</li>
<li>
<p>Type the following command to test the rule, passing the test file as an input argument and a directory for the output report.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">For Linux:    bin/windup --sourceMode --input WORKSPACE_PATH/proprietary-annotation-example/src/test/ --output WORKSPACE_PATH/proprietary-annotation-example/windup-reports --packages com.proprietary

For Windows:  bin\windup.bat --sourceMode --input WORKSPACE_PATH\proprietary-annotation-example\src\test\ --output WORKSPACE_PATH\proprietary-annotation-example\windup-reports --packages com.proprietary</pre>
</div>
</div>
</li>
<li>
<p>You should see this result.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">***SUCCESS*** Windup report created: WORKSPACE_PATH/proprietary-annotation-example/windup-reports/index.html
              Access it at this URL: file:///WORKSPACE_PATH/proprietary-annotation-example/windup-reports/index.html</pre>
</div>
</div>
</li>
<li>
<p>Access the report at URL provided and drill down to review the results.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prepare_your_development_environment">3. Prepare Your Development Environment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you only plan to create custom Windup Java-based rule add-ons, you can skip this chapter. However, if plan to contribute back to the core code base, the following sections describe how to access and build the Windup source code.</p>
</div>
<div class="sect2">
<h3 id="Dev-Get-the-Source-Code">3.1. Get the Windup Source Code</h3>
<div class="paragraph">
<p>If you just plan to create Java-based rule add-ons, you do not need to get the Windup source code. You only need to configure Maven to build your Java-base rule add-on project.</p>
</div>
<div class="paragraph">
<p>However, if you plan to contribute to the Windup code base, you need to fork and clone the 3 following Windup GitHub repositories.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Windup core code base: <a href="https://github.com/windup/windup" class="bare">https://github.com/windup/windup</a></p>
</li>
<li>
<p>Windup XML-based rulesets: <a href="https://github.com/windup/windup-rulesets" class="bare">https://github.com/windup/windup-rulesets</a></p>
</li>
<li>
<p>Windup distribution: <a href="https://github.com/windup/windup-distribution" class="bare">https://github.com/windup/windup-distribution</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The basic workflow process is to fork the above Windup repositories to your own Git, clone your forks, commit your work in topic branches, and make pull requests back to the corresponding repository.</p>
</div>
<div class="sect3">
<h4 id="_install_the_git_client">3.1.1. Install the Git Client</h4>
<div class="paragraph">
<p>If you don&#8217;t have the Git client (<code>git</code>), get it from:
<a href="http://git-scm.com/" class="bare">http://git-scm.com/</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Be sure to generate an SSH key and add the public key to your GitHub account: <a href="https://help.github.com/articles/generating-ssh-keys" class="bare">https://help.github.com/articles/generating-ssh-keys</a>. You can verify the key using the following command:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">ssh -T git@github.com</pre>
</div>
</div>
<div class="paragraph">
<p>+
You should see a message indicating your ID has successfully authenticated.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You should also configure your name and email identity using the following commands:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">git config --global user_name "FIRST_NAME LAST_NAME"
git config --global user_email "YOUR_EMAIL_ADDRESS"</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_fork_and_clone_the_windup_repository">3.1.2. Fork and Clone the Windup Repository</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://github.com/windup/windup/fork">Fork</a> the Windup project. This
creates the <code>windup</code> project in your own Git with the default remote
name 'origin'.</p>
</li>
<li>
<p>Clone your fork. This creates and populates a directory in your
local file system.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">git clone https://github.com/&lt;your-username&gt;/windup.git</pre>
</div>
</div>
</li>
<li>
<p>Change to the <code>windup</code> directory.</p>
</li>
<li>
<p>Add the remote <code>upstream</code> repository so you can fetch any changes to
the original forked repository.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">git remote add upstream git@github.com:windup/windup.git</pre>
</div>
</div>
</li>
<li>
<p>Get the latest files from the <code>upstream</code> repository.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">git fetch upstream</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_fork_and_clone_the_windup_rulesets_repository">3.1.3. Fork and Clone the Windup Rulesets Repository</h4>
<div class="paragraph">
<p>The Windup XML rulesets live in a separate repository. Follow these instructions to fork and clone them.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://github.com/windup/windup-rulesets/fork">Fork</a> the Windup Rulesets project. This
creates the <code>windup-rulesets</code> project in your own Git with the default remote
name 'origin'.</p>
</li>
<li>
<p>Clone your fork. This creates and populates a directory in your local file system.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">git clone https://github.com/&lt;your-username&gt;/windup-rulesets.git</pre>
</div>
</div>
</li>
<li>
<p>Change to the <code>windup-rulesets</code> directory.</p>
</li>
<li>
<p>Add the remote <code>upstream</code> repository so you can fetch any changes to
the original forked repository.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">git remote add upstream git@github.com:windup/windup-rulesets.git</pre>
</div>
</div>
</li>
<li>
<p>Get the latest files from the <code>upstream</code> repository.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">git fetch upstream</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_fork_and_clone_the_windup_distribution_repository">3.1.4. Fork and Clone the Windup Distribution Repository</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://github.com/windup/windup-distribution/fork">Fork</a> the Windup distribution project. This
creates the <code>windup-distribution</code> project in your own Git with the default remote
name 'origin'.</p>
</li>
<li>
<p>Clone your fork. This creates and populates a directory in your local file system.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">git clone https://github.com/&lt;your-username&gt;/windup-distribution.git</pre>
</div>
</div>
</li>
<li>
<p>Change to the <code>windup-distribution</code> directory.</p>
</li>
<li>
<p>Add the remote <code>upstream</code> repository so you can fetch any changes to
the original forked repository.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">git remote add upstream git@github.com:windup/windup-distribution.git</pre>
</div>
</div>
</li>
<li>
<p>Get the latest files from the <code>upstream</code> repository.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">git fetch upstream</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Build-from-Source">3.2. Build Windup from Source</h3>
<div class="sect3">
<h4 id="_overview_3">3.2.1. Overview</h4>
<div class="paragraph">
<p>This information is provided for new developers who plan to contribute code
to the Windup open source project. It describes how to build Windup from source using an IDE or command line and to extract the Windup distribution that is created during the build process.</p>
</div>
</div>
<div class="sect3">
<h4 id="_system_requirements">3.2.2. System Requirements</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Java 1.7.</p>
<div class="paragraph">
<p>You can choose from the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">OpenJDK
Oracle Java SE</pre>
</div>
</div>
</li>
<li>
<p>Maven 3.2.5 or newer</p>
<div class="paragraph">
<p>If you have not yet installed or configured Maven, see
<a href="#Install-and-Configure-Maven">Install and Configure Maven</a> for details.</p>
</div>
<div class="paragraph">
<p>If you have installed Maven, you can check the version by typing the
following in a command prompt:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">mvn --version</pre>
</div>
</div>
</li>
<li>
<p>IDE requirements</p>
<div class="paragraph">
<p>If you prefer, you can work within an IDE. The following IDEs are recommended.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.jboss.org/products/devstudio/download/">Red Hat JBoss
Developer Studio 7.1.1</a> or newer</p>
</li>
<li>
<p><a href="https://www.eclipse.org/downloads/">Eclipse 4.3 (Kepler)</a> or newer</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The IDE must embed Maven 3.2.5 or later. See <a href="#Install-and-Configure-Maven">Install and Configure Maven</a> for details.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_prerequisites">3.2.3. Prerequisites</h4>
<div class="ulist">
<ul>
<li>
<p>Be sure you have configured Maven as described here: <a href="#Install-and-Configure-Maven">Install and Configure Maven</a>.</p>
</li>
<li>
<p>Windup source code is located in 3 GitHub projects. Follow the instructions to <a href="#Dev-Get-the-Source-Code">Get the Windup Source Code</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_build_using_red_hat_jboss_developer_studio_or_eclipse">3.2.4. Build Using Red Hat JBoss Developer Studio or Eclipse</h4>
<div class="paragraph">
<p>If you prefer, you can use an IDE to build Windup.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Configure the Maven installation in your IDE as described here:
<a href="https://github.com/windup/windup/wiki/Install-and-Configure-Maven">Install and Configure Maven</a>.</p>
</li>
<li>
<p>Start JBoss Developer Studio or Eclipse.</p>
</li>
<li>
<p>Import the <code>windup</code> project.</p>
<div class="ulist">
<ul>
<li>
<p>From the menu, select <code>File</code>  <code>Import</code>.</p>
</li>
<li>
<p>In the selection list, choose <code>Maven</code>  <code>Existing Maven Projects</code>,
then click Next.</p>
</li>
<li>
<p>Click <code>Browse</code> and navigate to the root of the <code>windup</code> project directory, then click <code>OK</code>.</p>
</li>
<li>
<p>After all projects are listed, click <code>Next</code>. Ignore any Maven build
or dependency errors and click <code>Finish</code>. If you get a dialog titled
<em>Incomplete Maven Goal Execution</em>, ignore it and click <code>OK</code> to continue.</p>
</li>
<li>
<p>In the Project Explorer tab, find the <code>windup_parent</code> project in the
list, right-click, and choose <code>Run As</code> -&#8594; <code>Maven install</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Import the <code>windup-ruleset</code> project.</p>
<div class="ulist">
<ul>
<li>
<p>From the menu, select <code>File</code>  <code>Import</code>.</p>
</li>
<li>
<p>In the selection list, choose <code>Maven</code>  <code>Existing Maven Projects</code>,
then click Next.</p>
</li>
<li>
<p>Click <code>Browse</code> and navigate to the root of the <code>windup-ruleset</code> project directory, then click <code>OK</code>.</p>
</li>
<li>
<p>After all projects are listed, click <code>Next</code>. Ignore any Maven build
or dependency errors and click <code>Finish</code>. If you get a dialog titled
<em>Incomplete Maven Goal Execution</em>, ignore it and click <code>OK</code> to continue.</p>
</li>
<li>
<p>In the Project Explorer tab, right-click on the <code>windup-ruleset</code> project and choose <code>Run As</code> -&#8594; <code>Maven install</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Import the <code>windup-distribution</code> project.</p>
<div class="ulist">
<ul>
<li>
<p>From the menu, select <code>File</code>  <code>Import</code>.</p>
</li>
<li>
<p>In the selection list, choose <code>Maven</code>  <code>Existing Maven Projects</code>,
then click Next.</p>
</li>
<li>
<p>Click <code>Browse</code> and navigate to the root of the <code>windup-distribution</code> project directory, then click <code>OK</code>.</p>
</li>
<li>
<p>After all projects are listed, click <code>Next</code>. Ignore any Maven build
or dependency errors and click <code>Finish</code>. If you get a dialog titled
<em>Incomplete Maven Goal Execution</em>, ignore it and click <code>OK</code> to continue.</p>
</li>
<li>
<p>In the Project Explorer tab, right-click on the <code>windup-distribution</code> project and choose <code>Run As</code> -&#8594; <code>Maven install</code>.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_build_using_maven_command_line">3.2.5. Build Using Maven Command Line</h4>
<div class="paragraph">
<p>Windup source code consists of 3 projects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/windup/windup">windup</a></p>
</li>
<li>
<p><a href="https://github.com/windup/windup-rulesets">windup-ruleset</a></p>
</li>
<li>
<p><a href="https://github.com/windup/windup-distribution">windup-distribution</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>windup-rulesets</code> project has a dependency on the <code>windup</code> project and the <code>windup-distribution</code> project has dependencies on the other 2 projects, so you must build the projects in the following order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>windup</code> project</p>
</li>
<li>
<p><code>windup-rulesets</code> project</p>
</li>
<li>
<p><code>windup-distribution</code> project</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Follow the steps below to build the Windup distribution.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Build the <a href="https://github.com/windup/windup">windup</a> project.</p>
<div class="ulist">
<ul>
<li>
<p>Open a command terminal and navigate to the root of the windup project directory.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">cd windup/</pre>
</div>
</div>
</li>
<li>
<p>Build the project.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">mvn clean install</pre>
</div>
</div>
</li>
<li>
<p>You can also build the project without the tests.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">mvn clean install -DskipTests</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Build the <a href="https://github.com/windup/windup-rulesets">windup-ruleset</a> project.</p>
<div class="ulist">
<ul>
<li>
<p>Open a command terminal and navigate to the root of the Windup Ruleset project directory.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">    cd windup-ruleset/</pre>
</div>
</div>
</li>
<li>
<p>Build the project.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">mvn clean install</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Build the <a href="https://github.com/windup/windup-distribution">windup-distribution</a> project.</p>
<div class="ulist">
<ul>
<li>
<p>Open a command terminal and navigate to the root of the Windup distribution project directory.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">cd windup-distribution/</pre>
</div>
</div>
</li>
<li>
<p>Build the project.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">mvn clean install</pre>
</div>
</div>
</li>
<li>
<p>This creates a <code>windup-distribution-&lt;VERSION&gt;-offline.zip</code> file in the <code>windup-distribution/target/</code> directory.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_extract_the_distribution_source_file">3.2.6. Extract the Distribution Source File</h4>
<div class="paragraph">
<p>The build process creates a <code>windup-distribution-&lt;VERSION&gt;-offline.zip file</code> in the <code>windup-distribution/target/</code> directory.</p>
</div>
<div class="paragraph">
<p>Unzip the file into a directory of your choice.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_understand_the_windup_architecture_and_structure">4. Understand the Windup Architecture and Structure</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Architectural-Components">4.1. Windup Architectural Components</h3>
<div class="paragraph">
<p>The following open source software, tools, and APIs are used within
Windup to analyze and provide migration information. If you plan to
contribute source code to the core Windup project, you should be
familiar with them.</p>
</div>
<div class="sect3">
<h4 id="_forge">4.1.1. Forge</h4>
<div class="paragraph">
<p>Forge is an open source, extendable, rapid application development tool
for creating Java EE applications using Maven. For more information
about Forge 2, see: <a href="http://forge.jboss.org/">JBoss Forge</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_forge_furnace">4.1.2. Forge Furnace</h4>
<div class="paragraph">
<p>Forge Furnace is a modular runtime container behind Forge that provides
the ability to run Forge add-ons in an embedded application. For more
information about Forge Furnace, see:
<a href="http://forge.jboss.org/document/run-forge-embedded">Run Forge Embedded</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_tinkerpop">4.1.3. TinkerPop</h4>
<div class="paragraph">
<p>TinkerPop is an open source graph computing framework. For more
information, see: <a href="http://www.tinkerpop.com/">TinkerPop</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_titan">4.1.4. Titan</h4>
<div class="paragraph">
<p>Titan is a scalable graph database optimized for storing and querying graphs.
For more information, see: <a href="http://thinkaurelius.github.io/titan/">Titan Distributed Graph Database</a> and <a href="https://github.com/thinkaurelius/titan/wiki/Beginner%27s-Guide">Titan Beginner&#8217;s Guide</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_frames">4.1.5. Frames</h4>
<div class="paragraph">
<p>Frames represents graph data in the form of interrelated Java Objects or
a collection of annotated Java Interfaces. For more information, see:
<a href="https://github.com/tinkerpop/frames/wiki">TinkerPop Frames</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_gremlin">4.1.6. Gremlin</h4>
<div class="paragraph">
<p>Gremlin is a graph traversal language that allows you to query, analyze,
and manipulate property graphs that implement the Blueprints property
graph data model. For more information, see:
<a href="https://github.com/tinkerpop/gremlin/wiki">TinkerPop Gremlin Wiki</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_blueprints">4.1.7. Blueprints</h4>
<div class="paragraph">
<p>Blueprints is an industry standard API used to access graph databases.
For more information about Blueprints, see:
<a href="https://github.com/tinkerpop/blueprints/wiki">TinkerPop Blueprints Wiki</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_pipes">4.1.8. Pipes</h4>
<div class="paragraph">
<p>Pipes is a dataflow framework used to process graph data. It for the
transformation of data from input to output. For more information, see:
<a href="https://github.com/tinkerpop/pipes/wiki">Tinkerpop Pipes Wiki</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_rexster">4.1.9. Rexster</h4>
<div class="paragraph">
<p>Rexster is a graph server that exposes any Blueprints graph through HTTP/REST and a binary protocol called RexPro. Rexster makes extensive use of Blueprints, Pipes, and Gremlin. For more information, see:
<a href="https://github.com/tinkerpop/rexster/wiki">TinkerPop Rexster Wiki</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ocpsoft_rewrite">4.1.10. OCPsoft Rewrite</h4>
<div class="paragraph">
<p>OCPsoft Rewrite is an open source routing and URL rewriting solution for
Servlets, Java Web Frameworks, and Java EE. For more information about
Ocpsoft Rewrite, see: <a href="http://ocpsoft.org/rewrite/">OCPsoft Rewrite</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Project-Structure">4.2. Windup Core Project Structure</h3>
<div class="paragraph">
<p>Windup source code consists of 3 projects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/windup/windup-rulesets">windup-ruleset</a></p>
</li>
<li>
<p><a href="https://github.com/windup/windup">windup core</a></p>
</li>
<li>
<p><a href="https://github.com/windup/windup-distribution">windup-distribution</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Windup core project contains the executable source code and consists of the following subprojects.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">config/</dt>
<dd>
<p>This project is for the engine that runs the rules and abstracts the graph operations.</p>
</dd>
<dt class="hdlist1">decompiler/</dt>
<dd>
<p>This subproject contains an API that wraps calls to the decompiler.
Windup currently uses only one decompiler: <em>FernFlower</em></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>To use a different compiler, pass the <code>-Dwindup.decompiler</code> argument on the Windup command line. For example, to use the <em>Procyon</em> compiler, specify <code>-Dwindup.decompiler=procyon</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">exec/</dt>
<dd>
<p>This subproject contains the bootstrap code to run the Windup application.</p>
</dd>
<dt class="hdlist1">ext/</dt>
<dd>
<p>This subproject is for code extensions. It currently only contains the
Groovy rules syntax. Eventually it will contain any code that is not
related to the rules or the core code base.</p>
</dd>
<dt class="hdlist1">graph/</dt>
<dd>
<p>This subproject contains the datastore and Frames extensions.</p>
</dd>
<dt class="hdlist1">logging/</dt>
<dd>
<p>This is the logging subproject. This subproject may be removed, depending on the outcome of this JIRA: <a href="https://issues.jboss.org/browse/WINDUP-49">WINDUP-49</a>.</p>
</dd>
<dt class="hdlist1">reporting/</dt>
<dd>
<p>This subproject contains code that does reporting.</p>
</dd>
<dt class="hdlist1">rules/</dt>
<dd>
<p>This subproject contains all the rules.</p>
</dd>
<dt class="hdlist1">test-files/</dt>
<dd>
<p>This subproject contains the demo applications that are used for test input.</p>
</dd>
<dt class="hdlist1">tests/</dt>
<dd>
<p>This subproject contains the integration test suite.</p>
</dd>
<dt class="hdlist1">tinkerpop/</dt>
<dd>
<p>This subproject contains a code fix for Titan NPE issues.</p>
</dd>
<dt class="hdlist1">ui/</dt>
<dd>
<p>This subproject contains experimental Forge UI code.</p>
</dd>
<dt class="hdlist1">utils/</dt>
<dd>
<p>This subproject contains all utility code.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rules_and_rulesets">5. Rules and Rulesets</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Processing-Overview">5.1. Windup Processing Overview</h3>
<div class="paragraph">
<p>Windup is a rule-based migration tool that allows you to write customized rules to analyze the APIs, technologies, and architectures used by the applications you plan to migrate. The Windup tool also executes its own core rules through all phases of the migration process.</p>
</div>
<div class="paragraph">
<p>The following is a high level conceptual overview of what happens within Windup when you execute the tool against an application or archive.</p>
</div>
<div class="sect3">
<h4 id="_windup_core_rules">5.1.1. Windup Core Rules</h4>
<div class="paragraph">
<p>Wnen you run the <code>WINDUP_HOME/bin/windup</code> command against an application, Windup executes its own core rules to process the following types of application input artifacts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Archive files such as EARs, WARs, JARs</p>
</li>
<li>
<p>Java classes</p>
</li>
<li>
<p>JSP files</p>
</li>
<li>
<p>Manifest files</p>
</li>
<li>
<p>XML files</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Windup extracts files from archives, decompiles classes, and analyzes the application code. In this phase, it builds a data model and stores component data and relationships in a graph database, which can then be queried and updated as needed by the migration rules and for reporting purposes.</p>
</div>
</div>
<div class="sect3">
<h4 id="_application_migration">5.1.2. Application Migration</h4>
<div class="paragraph">
<p>The next step in the process is the execution of the migration rules. In this phase, the rules typically do not execute against the application input files. Instead, they execute against the graph database model. Windup rules are independent and decoupled and they communicate with each other using the graph database model. Rules query the graph database to obtain information needed to test the rule condition. They also update the data model with information based on the result of the rule execution. This allows rules to easily interact with other rules and enables the creation of very complex rules.</p>
</div>
<div class="paragraph">
<p>The Windup distribution contains a large number of migration rules, but in some cases, you may need to create additional custom rules for your specific implementation. Windup is architected to allow you to create Java-based rule addons or XML rules and add easily add them to Windup. Custom rule creation is covered in the <a href="http://windup.github.io/windup/docs/latest/html/WindupRulesDevelopmentGuide.html">Windup Rules Development Guide</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_generate_findings_based_on_the_rule_execution_results">5.1.3. Generate Findings Based on the Rule Execution Results</h4>
<div class="paragraph">
<p>The final step in the process is to pull data from the graph database model to generate of reports and optionally generate scripts. Again, Windup uses rules to generate the final output.</p>
</div>
<div class="paragraph">
<p>By default, Windup generates the following reports at the end of the application migration process. The reports are located in the <code>reports/</code> subdirectory of the output report path specified when you execute Windup:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Application Report: This report provides a summary of the total estimated effort, or <a href="#Rules-Rule-Story-Points">story points</a>, that are required for the migration. It also provides a detailed list of issues and suggested changes, broken down by archive or folder.</p>
</li>
<li>
<p>RuleProvider report: This is a detailed listing of the rule providers that fired when running Windup and whether any errors occurred.</p>
</li>
<li>
<p>Additional reports are generated that provide detailed line-by-line migration tips for individual files.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Windup can also generate scripts to automate migration processes based on the findings. For example, some configuration files are easily mapped and can be automatically generated as part of the migration process.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Rules-Rule-Execution-Lifecycle">5.2. Rule Execution Lifecycle</h3>
<div class="paragraph">
<p>Rule phases provide a way for rule authors to control the rule lifecycle by specifying the phase in which the rule should execute. Windup executes rules sequentially within rule phases, however, you can also provide more fine-grained control over the order of rule execution within a phase. A rule may specify that one or more rules must be executed before it this rule is run. All named rules will be fired in the order specified before executing the the current rule. A rule may also specify that one or more rules must be executed after it is run. In this case, all named rules will be fired in the order specified after executing the the current rule.</p>
</div>
<div class="paragraph">
<p>The rule phase and execution order is stored in the associated rule&#8217;s <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/metadata/RuleMetadata.html">RuleMetadata</a>.</p>
</div>
<div class="paragraph">
<p>For a detailed description of Windup rule phases and the order of their execution, see: <a href="#Rule-Phases">Rule Phases</a></p>
</div>
<div class="sect3">
<h4 id="_set_the_rule_execution_phase">5.2.1. Set the Rule Execution Phase</h4>
<div class="paragraph">
<p>You can set the phase in which the rule executes in one of the following ways.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the <code>@RuleMetadata(phase = RulePhase)</code> annotation to the rule.</p>
</li>
<li>
<p>Code the <code>setPhase(RulePhase)</code> method in the constructor of the rule.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_control_the_execution_order_within_the_rule_phase">5.2.2. Control the Execution Order Within the Rule Phase</h4>
<div class="paragraph">
<p>You can also provide more fine-grained control over the order of rule execution within a phase. A rule may specify that one or more rules must be executed before it this rule is run. All named rules will be fired in the order specified before executing the the current rule. A rule may also specify that one or more rules must be executed after it is run. In this case, all named rules will be fired in the order specified after executing the the current rule.</p>
</div>
<div class="paragraph">
<p>This is done in one of the following ways.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the <code>@RuleMetadata(after = PreviousRuleProvider, before = NextRuleProvider)</code> annotation to the rule.</p>
</li>
<li>
<p>Use the <code>addExecuteAfter(NextRuleProvider)</code> or <code>addExecuteBefore(PreviousRuleProvider)</code> methods in the constructor, specifying the rules that should precede or follow this rule.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_code_example_using_the_annotation_method">5.2.3. Code Example Using the Annotation Method</h4>
<div class="paragraph">
<p>The following is an example of a rule that overrides the rule phase and sets the ordering using the <code>@RuleMetaData</code> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@RuleMetadata(id = "MyCustomRuleProvider",
            phase = DependentPhase.class,
            after = { MyFirstRuleProvider.class, MySecondRuleProvider.class },
            before = { MyFinalRuleProvider1.class })
public class MyCustomRuleProvider extends AbstractRuleProvider
{</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_code_example_using_the_constructor_method">5.2.4. Code Example Using the Constructor Method</h4>
<div class="paragraph">
<p>The following example provides the same results using constructor methods.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public MyCustomRuleProvider extends AbstractRuleProvider
{
    super(MetadataBuilder.forProvider(MyCustomRuleProvider.class)
                .setPhase(DiscoveryPhase.class)
                .addExecuteAfter({ MyFirstRuleProvider.class, MySecondRuleProvider.class }),
                .addExecuteBefore({MyLastRuleProvider.class}));
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_additional_information">5.2.5. Additional Information</h4>
<div class="paragraph">
<p>For more information about what can be specified in the <code>@RuleMetadata</code> annotation, see the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/metadata/RuleMetadata.html">RuleMetadata</a> JavaDoc.</p>
</div>
<div class="paragraph">
<p>For more information about RuleProvider constructor MetadataBuilder methods, see the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/metadata/MetadataBuilder.html">MetadataBuilder</a> JavaDoc.</p>
</div>
<div class="paragraph">
<p>For a graphical overview of rule processing, see <a href="https://docs.google.com/drawings/d/1IMnds3Qu8Wwcf7_mr7NJ9a3YgtcGJ7dejl09EhWl7Vc/edit">this
diagram</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Rule-Phases">5.3. Rule Phases</h3>
<div class="paragraph">
<p>Rule phases provide a way for rule authors to control the rule lifecycle by specifying the phase in which the rule should execute. Windup executes rules sequentially within rule phases, however, the order of rule execution within a phase can be controlled by specifying other rules that should be run before or after the rule.</p>
</div>
<div class="paragraph">
<p>By default, rules run in the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/MigrationRulesPhase.html">MigrationRulesPhase</a>.  However, a rule may require certain processing or actions to occur before it executes, such as the extraction of archives and scanning of java or XML files, so a rule can specify that it is run during another phase in the process.</p>
</div>
<div class="paragraph">
<p>The rule phases below are listed in the order in which they are executed by Windup. The exception is the last phase, which can occur during any phase of the execution lifecycle.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/InitializationPhase.html">InitializationPhase</a></dt>
<dd>
<p>This is the first phase of Windup Execution. Initialization related tasks, such as copying configuration data to the graph, should occur during this phase.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/DiscoveryPhase.html">DiscoveryPhase</a></dt>
<dd>
<p>This resource discovery phase immediately follows the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/InitializationPhase.html">InitializationPhase</a>. During this phase, input files are identified by the name, extension, location, and fully qualified Java class names. Typically, any rule that only puts data into the graph is executed during this phase.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/ArchiveExtractionPhase.html">ArchiveExtractionPhase</a></dt>
<dd>
<p>This phase immediately follows the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/DiscoveryPhase.html">DiscoveryPhase</a>. During this phase, input files such and EARs, WARs, JARs, and other zipped files are unzipped during this phase.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/ArchiveMetadataExtractionPhase.html">ArchiveMetadataExtractionPhase</a></dt>
<dd>
<p>This phase occurs immediately after <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/ArchiveExtractionPhase.html">ArchiveExtractionPhase</a>. It calculates checksums for archives and determines whether the archive is an EAR, WAR, JAR, or some other type of compressed file.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/ClassifyFileTypesPhase.html">ClassifyFileTypesPhase</a></dt>
<dd>
<p>This phase follows the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/ArchiveMetadataExtractionPhase.html">ArchiveMetadataExtractionPhase</a>. During this phase, files are scanned and metadata is created for them.For example, this phase may find all of the Java files in an application and mark them as Java, or it may find all of the bash scripts in an input and identify them appropriately.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/DiscoverProjectStructurePhase.html">DiscoverProjectStructurePhase</a></dt>
<dd>
<p>This phase, which follows <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/ClassifyFileTypesPhase.html">ClassifyFileTypesPhase</a>, identifies the project structure of the input application. This includes identification of project files, any subprojects, and the type of project, for example Maven or Ant.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/DecompilationPhase.html">DecompilationPhase</a></dt>
<dd>
<p>This phase follows the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/DiscoverProjectStructurePhase.html">DiscoverProjectStructurePhase</a>. This phase is responsible for identifying and decompiling classes included in the input application.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/InitialAnalysisPhase.html">InitialAnalysisPhase</a></dt>
<dd>
<p>This phase follows the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/DecompilationPhase.html">DecompilationPhase</a> and is called to perform a basic analysis of file content.
It extracts all method names from class files and extracts metadata, such as the XML namespace and root element, from XML files.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/MigrationRulesPhase.html">MigrationRulesPhase</a></dt>
<dd>
<p>This phase, which follows the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/InitialAnalysisPhase.html">InitialAnalysisPhase</a>, is the default phase for all rules unless it is specifically overridden. During this phase, migration rules attach data to the graph associated with migration. This can include hints to migrators for manual migration, automated migration of schemas or source segments, blacklists to indicate vendor specific APIs.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/PostMigrationRulesPhase.html">PostMigrationRulesPhase</a></dt>
<dd>
<p>This phase occurs immediately after <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/MigrationRulesPhase.html">MigrationRulesPhase</a>. This phase can be used to execute a rule that must follow all other migration rules. The primary use case at the moment involves unit tests.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/PreReportGenerationPhase.html">PreReportGenerationPhase</a></dt>
<dd>
<p>This phase occurs after the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/PostMigrationRulesPhase.html">PostMigrationRulesPhase</a> and immediately before the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/ReportGenerationPhase.html">ReportGenerationPhase</a>. It can be used for initialization tasks that will be needed by all reports during that phase.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/ReportGenerationPhase.html">ReportGenerationPhase</a></dt>
<dd>
<p>During this phase, reporting visitors produce report data in the graph that is used later by the report rendering phase.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/PostReportGenerationPhase.html">PostReportGenerationPhase</a></dt>
<dd>
<p>This phase occurs immediately after the main tasks of report generation. It can be used to generate reports that need data from all of the previously generated reports.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/ReportRenderingPhase.html">ReportRenderingPhase</a></dt>
<dd>
<p>This is the phase that renders the report.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/PostReportRenderingPhase.html">PostReportRenderingPhase</a></dt>
<dd>
<p>This phase occurs immediately after reports have been rendered. It can be used to render any reports that need to execute last. One possible use is to render all the entire contents of the graph itself.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/FinalizePhase.html">FinalizePhase</a></dt>
<dd>
<p>This phase is called to clean up resources and close streams. This phase occurs at the end of execution. Rules in this phase are responsible for any cleanup of resources and closing any streams that may have been opened.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/PostFinalizePhase.html">PostFinalizePhase</a></dt>
<dd>
<p>This occurs immediately after the FinalizePhase. This is an ideal place to put Rules that would like to be the absolute last things to fire, for example reporting on the execution time of previous rules or reporting on all of the rules that have executed and which AbstractRuleProviders executed them.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/DependentPhase.html">DependentPhase</a></dt>
<dd>
<p>This phase can occur during any phase of the execution lifecycle. It&#8217;s exact placement is determine by the code within the rule.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="Rules-Available-Rules-Utilities">5.4. Available Rule Utilities</h3>
<div class="sect3">
<h4 id="_programmatically_access_the_graph">5.4.1. Programmatically Access the Graph</h4>
<div class="paragraph">
<p><em>Note: Needs update. This is out of date!</em></p>
</div>
<div class="paragraph">
<p>(Lower Level API, to cover cases not provided by high level API)</p>
</div>
<div class="paragraph">
<p>This topic describes how to to programmatically access or update graph data when you create a Java-based rule add-on.</p>
</div>
<div class="sect4">
<h5 id="_query_the_graph">Query the graph</h5>
<div class="paragraph">
<p>There are several ways - including Query API, Gremlin support, or
GraphService methods.</p>
</div>
<div class="sect5">
<h6 id="_query_the_graph_within_the_when_method">Query the Graph Within the .when() method</h6>
<div class="paragraph">
<p>Building a rule contains the method when(), which is used to create a
<strong>condition</strong>. Vertices that fulfill the condition, are passed to the
perform() method.</p>
</div>
<div class="paragraph">
<p>For the queries in the when() method, class Query is used. There are
several methods which you can use to specify the condition. For example:
* <strong>find()</strong> specifies the Model type of the vertex * <strong>as()</strong> method
specifies the name of the final list, that is passed to the perform()
method * <strong>from(String name)</strong> starts the query not on the all vertices,
but only on the vertices already stored in the the given <strong>name</strong> (used to
begin query on the result of the other one) * <strong>withProperty()</strong> specify
the property value of the given vertex</p>
</div>
<div class="paragraph">
<p>The following are examples of simple queries.</p>
</div>
<div class="paragraph">
<p>Return a list of archives</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Query.find(ArchiveModel.class)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Query.find(ApplicationReportModel.class).as(VAR_APPLICATION_REPORTS)</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_iteration">Iteration</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ConfigurationBuilder.begin().addRule()
    .when(
        GraphSearchConditionBuilderGremlin.create("javaFiles", new ArrayList())
        .V().framedType( JavaFileModel.class ).has("analyze")
    )
    .perform(
        // For all java files...
        Iteration.over("javaFiles").var("javaFile").perform(</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_nested_iteration">Nested Iteration</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">code,java
// For all java files...
Iteration.over("javaFiles").var("javaFile").perform(
    // A nested rule.
    RuleSubset.evaluate(
        ConfigurationBuilder.begin().addRule()
        .when(...)
        .perform(
            Iteration.over("regexes").var(RegexModel.class, "regex").perform(
                new AbstractIterationOperator&lt;RegexModel&gt;( RegexModel.class, "regex" ) {
                    public void perform( GraphRewrite event, EvaluationContext context, RegexModel regex ) {
                        //...
                    }
                }
            )
            .endIteration()
        )// perform()
    )
)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_modify_graph_data">5.4.2. Modify Graph Data</h4>
<div class="paragraph">
<p>For more custom operations dealing with Graph data that are not covered by the <code>Query</code> mechanism, use the GraphService.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">GraphService&lt;FooModel&gt; fooService = new GraphService&lt;FooModel&gt;(graph,FooModel.class);

List&lt;FooModel&gt; = fooService.findAll();
FooModel = fooService.create();

// etc ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>GraphService&lt;&gt; can also be used to query the graph for models of the specified type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">FooModel foo = new GraphService&lt;&gt;(graphContext, FooModel.class).getUnique();</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">FooModel foo = new GraphService&lt;&gt;(graphContext, FooModel.class).getUniqueByProperty("size", 1);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Rules-Rule-Story-Points">5.5. Rule Story Points</h3>
<div class="sect3">
<h4 id="_what_are_story_points">5.5.1. What are Story Points?</h4>
<div class="paragraph">
<p><em>Story Points</em> are an abstract metric commonly used in Scrum Agile software development methodology to estimate the <em>level of effort</em> needed to implement a feature or change. They are based on a <a href="http://scrummethodology.com/scrum-effort-estimation-and-story-points/">modified Fibonacci sequence</a>.</p>
</div>
<div class="paragraph">
<p>In a similar manner, Windup uses <em>story points</em> to express the <em>level of effort</em> needed to migrate particular application constructs, and in a sum, the application as a whole. It does not necessarily translate to man-hours, but the value should be consistent across tasks.</p>
</div>
</div>
<div class="sect3">
<h4 id="_how_story_points_are_estimated_in_rules">5.5.2. How Story Points are Estimated in Rules</h4>
<div class="paragraph">
<p>Estimating the <em>level of effort</em> for the <em>story points</em> for a rule can be tricky. The following are the general guidelines Windup uses when estimating the <em>level of effort</em> required for a rule.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Level of Effort</th>
<th class="tableblock halign-left valign-top">Story Points</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trivial</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The migration is a trivial change or a simple library swap with no or minimal API changes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Complex</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The changes required for the migration task are complex, but have a documented solution.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Redesign</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The migration task requires a redesign or a complete library change, with significant API changes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rearchitecture</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The migration requires a complete rearchitecture of the component or subsystem.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unknown</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The migration solution is not known and may need a complete rewrite.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_task_severity">5.5.3. Task Severity</h4>
<div class="paragraph">
<p>In addition to the <em>level of effort</em>, migration tasks can be assigned a <em>severity</em> that indicates whether the task must be completed or can be postponed.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Mandatory</dt>
<dd>
<p>The task must be completed for a successful migration. If the changes are not made, the resulting application will not build or run successfully. Examples include replacement of proprietary APIs that are not supported in the target platform.</p>
</dd>
<dt class="hdlist1">Optional</dt>
<dd>
<p>If the migration task is not completed, the application will work, but the results may not be the optimal. If the change is not made at the time of migration, it is recommended to put it on the schedule soon after migration is completed. An example of this would be the upgrade of EJB 2.x code to EJB 3.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Rules-Difference-Between-XML-based-and-Java-based-Rules">5.6. Difference Between XML-based and Java-based Rules</h3>
<div class="sect3">
<h4 id="_summary">5.6.1. Summary</h4>
<div class="paragraph">
<p>As mentioned before, Windup provides a core and a default set of rules to analyze and report on migration of application code. Windup also allows you to write your own custom rules. These rules can be written using either XML or Java. Rules written using XML are referred to as <em>XML-based</em> rules. Rules written using the Java API are referred to as <em>Java-based</em> rule add-ons. Both <em>XML-based</em> and <em>Java-based</em> rule add-ons can be used to inspect (classify) and report on Java source, XML, properties, archives, and other types of files,</p>
</div>
</div>
<div class="sect3">
<h4 id="_which_one_to_choose">5.6.2. Which one to choose?</h4>
<div class="paragraph">
<p><em>XML-based</em> rules provide a quick, simple way to create rules to analyze Java, XML, and properties files. If you simply need to highlight a specific section of Java code or XML file content and provide migration hints for it, creation of <em>XML-based</em> rules is the recommended approach. Creation of custom <em>XML-based</em> rules is covered in the <a href="http://windup.github.io/windup/docs/latest/html/WindupRulesDevelopmentGuide.html">Windup Rules Development Guide</a>.</p>
</div>
<div class="paragraph">
<p><em>Java-based</em> rule add-ons provide the ability to create very complex rules, manipulate the shared data model graph, and customize the resulting reports. If you need to test or perform complex conditions and operations or want to manipulate the shared data model graph, create custom reports, or extend the functionality in any other way beyond what the <em>XML-based</em> rules provide, you must create <em>Java-based</em> rules. Creation of custom <em>Java-based</em> rules is covered in the <a href="http://windup.github.io/windup/docs/latest/html/WindupCoreDevelopmentGuide.html">Windup Core Development Guide</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_pros_and_cons_of_xml_based_rules">5.6.3. Pros and Cons of XML-based Rules</h4>
<div class="paragraph">
<p>Pros:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>XML rules are fairly easy to write and require less code.</p>
</li>
<li>
<p>XML rules are not compiled so you do not need to configure Maven to build from source.</p>
</li>
<li>
<p>XML rules are simple to deploy. You simply drop the rule into the appropriate path and Windup automatically scans the new rule.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>XML rules only support a simple subset of conditions and operations.</p>
</li>
<li>
<p>XML rules do not provide for direct custom graph data manipulation.</p>
</li>
<li>
<p>XML rules do not support the ability to create custom reports.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pros_and_cons_of_java_based_rules">5.6.4. Pros and Cons of Java-based Rules</h4>
<div class="paragraph">
<p>Pros:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Java rule add-ons allow you to write custom conditions and operations and provide a lot of flexibility.</p>
</li>
<li>
<p>Java rule add-ons allow you to access and manipulate the shared data model graph and to customize reports.</p>
</li>
<li>
<p>You can set breakpoints and test Java rule add-ons using a debugger.</p>
</li>
<li>
<p>IDEs provide code completion for the Windup API.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You must configure Maven to compile Java rule add-ons.</p>
</li>
<li>
<p>Java rule add-ons that are not included in the Windup core code base must be a full Forge add-on.</p>
</li>
<li>
<p>Java rule add-ons require that you write Java code.</p>
</li>
<li>
<p>Writing Java rule add-ons can be complex and require knowledge of Windup internals.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_examples_of_xml_based_and_java_based_rules">5.6.5. Examples of XML-based and Java Based Rules</h4>
<div class="paragraph">
<p>The following is an example of a rule written in XML that classifies Java code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0"?&gt;
&lt;ruleset id="EjbRules"
    xmlns="http://windup.jboss.org/schema/jboss-ruleset"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://windup.jboss.org/schema/jboss-ruleset http://windup.jboss.org/schema/jboss-ruleset/windup-jboss-ruleset.xsd"&gt;
    &lt;rules&gt;
        &lt;rule id="EjbRules_1000"&gt;
            &lt;when&gt;
                &lt;javaclass references="javax.persistence.Entity" as="default"&gt;
                    &lt;location&gt;TYPE&lt;/location&gt;
                &lt;/javaclass&gt;
            &lt;/when&gt;
            &lt;perform&gt;
                &lt;iteration&gt;
                    &lt;classification classification="JPA Entity" effort="0"/&gt;
                &lt;/iteration&gt;
            &lt;/perform&gt;
        &lt;/rule&gt;
    &lt;/rules&gt;
&lt;/ruleset&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following is an example of a rule written in Java that classifies Java code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-java" data-lang="java">/**
 * Scans for classes with EJB related annotations, and adds EJB related metadata for these.
 */
public class DiscoverEjbAnnotationsRuleProvider extends AbstractRuleProvider
{
    @Override
    public Configuration getConfiguration(GraphContext context) {
        return ConfigurationBuilder.begin()
        .addRule()
        .when(JavaClass.references("javax.ejb.{annotationType}").at(TypeReferenceLocation.ANNOTATION))
        .perform(new AbstractIterationOperation&lt;JavaTypeReferenceModel&gt;()
        {
            public void perform(GraphRewrite event, EvaluationContext context, JavaTypeReferenceModel payload)
            {
                extractEJBMetadata(event, payload);
            };
        })
        .where("annotationType").matches("Stateless|Stateful")
        .withId(ruleIDPrefix + "_StatelessAndStatefulRule")
        .addRule()
        .when(JavaClass.references("javax.ejb.MessageDriven").at(TypeReferenceLocation.ANNOTATION))
        .perform(new AbstractIterationOperation&lt;JavaTypeReferenceModel&gt;() {
            @Override
            public void perform(GraphRewrite event, EvaluationContext context, JavaTypeReferenceModel payload) {
                extractMessageDrivenMetadata(event, payload);
            }
        })
        .withId(ruleIDPrefix + "_MessageDrivenRule")
        .addRule()
        .when(JavaClass.references("javax.persistence.Entity").at(TypeReferenceLocation.ANNOTATION).as(ENTITY_ANNOTATIONS)
                    .or(JavaClass.references("javax.persistence.Table").at(TypeReferenceLocation.ANNOTATION).as(TABLE_ANNOTATIONS_LIST)))
        .perform(Iteration.over(ENTITY_ANNOTATIONS).perform(new AbstractIterationOperation&lt;JavaTypeReferenceModel&gt;() {
            @Override public void perform(GraphRewrite event, EvaluationContext context, JavaTypeReferenceModel payload) {
                extractEntityBeanMetadata(event, payload);
            }
        }).endIteration())
        .withId(ruleIDPrefix + "_EntityBeanRule");
    }
    ...
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_quick_comparison_summary">5.6.6. Quick Comparison Summary</h4>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 60%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Requirement</th>
<th class="tableblock halign-left valign-top">XML Rule</th>
<th class="tableblock halign-left valign-top">Java Rule Add-on</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy to write?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Depends on the complexity of the rule</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requires that you configure Maven?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requires that you compile the rule?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Simple deployment?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supports custom reports?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ability to create complex conditions and operations?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ability to directly manipulate the graph data?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_and_test_java_rule_add_ons">6. Create and Test Java Rule Add-ons</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide focuses on how to create Java-based rule add-ons. For instructions on how to create XML-based rules, see the <a href="http://windup.github.io/windup/docs/latest/html/WindupRulesDevelopmentGuide.html">Windup Rules Development Guide</a>.</p>
</div>
<div class="sect2">
<h3 id="Rules-Java-based-Rule-Structure">6.1. Java-based Rule Structure</h3>
<div class="sect3">
<h4 id="_ruleprovider">6.1.1. RuleProvider</h4>
<div class="paragraph">
<p>Windup rules are based on <a href="http://ocpsoft.org/rewrite/">OCPsoft Rewrite</a>, an open source routing and URL rewriting solution for Servlets, Java Web Frameworks, and Java EE. The <strong>rewrite</strong> framework allows you to create rule providers and rules in an easy to read format.</p>
</div>
<div class="paragraph">
<p>Windup rule add-ons can implement the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/RuleProvider.html">RuleProvider</a> interface or they can extend the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/AbstractRuleProvider.html">AbstractRuleProvider</a> class, the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/SingleRuleProvider.html">SingleRuleProvider</a> class, or the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/IteratingRuleProvider.html">IteratingRuleProvider</a> class.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the rule should run in a phase other than the default <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/RulePhase.html#MIGRATION_PHASE">MIGRATION_PHASE</a>, you must implement the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/RuleProvider.html#getPhase%28%29">getPhase()</a> method and specify in which Windup lifecycle phase the rule should be executed. For more information about rule phases, see <a href="#Rules-Rule-Execution-Lifecycle">Rule Execution Lifecycle</a>.</p>
</li>
<li>
<p>Rules are added in the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/RuleProvider.html">getConfiguration(GraphContext context)</a> method. This method is inherited from the <a href="http://ocpsoft.org/rewrite/">OCPsoft Rewrite</a> interface org.ocpsoft.rewrite.config.ConfigurationProvider. Rules are discussed in more detail below under <a href="#add-rule-code-structure">Add Rule Code Structure</a></p>
</li>
<li>
<p>If other rules must execute after or before the rules in this provider, you must provide the list of RuleProvider classes using the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/RuleProvider.html#getExecuteBefore%28%29">getExecuteBefore()</a> or <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/RuleProvider.html#getExecuteAfter%28%29getExecuteAfter()*" class="bare">http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/RuleProvider.html#getExecuteAfter%28%29getExecuteAfter()*</a> methods.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following is an example of a simple Java-based rule add-on.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class ExampleRuleProvider extends AbstractRuleProvider
{
    @Override public RulePhase getPhase(){
        return RulePhase.DISCOVERY;
    }

    // @formatter:off
    @Override
    public Configuration getConfiguration(GraphContext context)
    {
        return ConfigurationBuilder.begin()
        .addRule()
        .when(
            // Some implementation of GraphCondition.
            Query.find(...)....
        )
       .perform(
            ...
       );
    }
    // @formatter:on
    // (@formatter:off/on prevents Eclipse from formatting the rules.)
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="add-rule-code-structure">6.1.2. Add Rule Code Structure</h4>
<div class="paragraph">
<p>As mentioned above, individual rules are added to a ruleset in the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/RuleProvider.html">getConfiguration(GraphContext context)</a> method using the <a href="http://ocpsoft.org/rewrite/">OCPsoft Rewrite</a> ConfigurationBuilder class.</p>
</div>
<div class="paragraph">
<p>Like most rule-based frameworks, Windup rules consist of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Condition: This is the <strong>when(condition)</strong> that determines if the rule should execute.</p>
</li>
<li>
<p>Operation: This defines what to <strong>perform()</strong> if the condition is met.</p>
</li>
<li>
<p>Otherwise: The <strong>when(condition)</strong> is not met</p>
</li>
<li>
<p>Operation: This defines what to <strong>perform()</strong> if the condition is not met.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Rules must define the condition, or <em>when</em>, and an operation, or <em>perform</em>. However, the otherwise and remainder are optional.</p>
</div>
<div class="sect4">
<h5 id="_when">when()</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">.when(Query.fromType(XmlMetaFacetModel.class))</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>.when()</code> clause of a rule typically queries the graph using the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/query/Query.html">Query</a> API. Results of the query are put on variables stack (<code>Variables</code>), many times indirectly through the querying API.</p>
</div>
<div class="paragraph">
<p>The <code>.when()</code> clause can also subclass <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/condition/GraphCondition.html">GraphCondition</a>. The <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/query/Query.html">Query</a> class extends <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/condition/GraphCondition.html">GraphCondition</a> and is  a convenient way to create a condition. You can also use multiple conditions within one when() call using and().</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">.when(Query.fromType(XmlMetaFacetModel.class).and(Query...))</code></pre>
</div>
</div>
<div class="paragraph">
<p>One last but important feature is the ability to use <a href="https://github.com/tinkerpop/gremlin/wiki">Gremlin</a> queries. See the <a href="http://gremlindocs.com/">Gremlin Documentation</a> reference manual for more information.</p>
</div>
</div>
<div class="sect4">
<h5 id="_perform">perform()</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">.perform(
   new AbstractIterationOperation&lt;XmlMetaFacetModel&gt;(XmlMetaFacetModel.class, "xml")
   {
      public void perform(GraphRewrite event, EvaluationContext context, XmlMetaFacetModel model)
      {
         // for each model, do something
      }
   }
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>.perform()</code> clause of the rule typically iterates over the items of interest, such as Java and XML files and querying services, processes them, and writes the findings into the graph.</p>
</div>
<div class="paragraph">
<p>For that, various operations are available, which are subclasses of <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/operation/GraphOperation.html">GraphOperation</a>. You can also implement your own operations.</p>
</div>
<div class="paragraph">
<p>There are several convenient implementations for constructs like iteration (<code>Iteration</code>).</p>
</div>
<div class="sect5">
<h6 id="_iteration_2">Iteration</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">.perform(
    Iteration.over(XmlMetaFacetModel.class, "xmlModels").as("xml")
    .when(...)
    .perform(
        new AbstractIterationOperation&lt;XmlMetaFacetModel&gt;(XmlMetaFacetModel.class, "xml"){
            public void perform(GraphRewrite event, EvaluationContext context, XmlMetaFacetModel xmlFacetModel)
            {
            }
        })
    .otherwise(
        new AbstractIterationOperation&lt;XmlMetaFacetModel&gt;(XmlMetaFacetModel.class, "xml"){
            public void perform(GraphRewrite event, EvaluationContext context, XmlMetaFacetModel payload)
                { ... }
        })
    .endIteration()</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_nested_iterations">Nested iterations</h6>
<div class="paragraph">
<p>An iteration is also an operation, so anywhere an operation is expected, you can use the Iteration. If the Iteration is placed within the perform method of another Iteration, it is called nested iteration.</p>
</div>
<div class="paragraph">
<p>The following is an example of a nested iteration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">.addRule()
     .when(...)
     .perform(
     Iteration.over("list_variable").as("single_var")
       .perform(
         Iteration.over("single_var") //second iteration
           .perform(...).endIteration()
     )
     .endIteration()
);</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_otherwise">otherwise</h6>
<div class="paragraph">
<p>As previously mentioned, Windup rules are based on <a href="http://ocpsoft.org/rewrite/">OCPsoft Rewrite</a>. The <code>.otherwise()</code> clause allows you to perform something if the condition specified in <code>.when()</code> clause is not matched. For more information, see <a href="http://ocpsoft.org/rewrite/">OCP Rewrite web</a>.</p>
</div>
<div class="paragraph">
<p>The following is an example of an otherwise operation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">.otherwise(
   new AbstractIterationOperation&lt;XmlMetaFacetModel&gt;(XmlMetaFacetModel.class, "xml")
   {
      public void perform(GraphRewrite event, EvaluationContext context, XmlMetaFacetModel model)
      {
         // for each model, do something altenate
      }
   }
)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_where">Where</h5>
<div class="paragraph">
<p>The <code>where()</code> clause is used to provide information about used parameters within the rule. So for example if you have used a parameter in some condition like for example <code>JavaClass.references("{myMatch}")</code>, you may use the where clause to specify what the <code>myMatch</code> is like <code>.where("myMatch").matches("java.lang.String.toString\(.*\)")</code>.</p>
</div>
<div class="paragraph">
<p>The following is an example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">.when(JavaClass.references("{myMatch}").at(TypeReferenceLocation.METHOD))
.perform(...)
.where("myMatch").matches("java.lang.String.toString\(.*\)")</code></pre>
</div>
</div>
<div class="paragraph">
<p>+
Please note that within the where clause the regex is used in contrast to JavaClass.references() where a windup specific syntax is expected.</p>
</div>
</div>
<div class="sect4">
<h5 id="_metadata">Metadata</h5>
<div class="paragraph">
<p>Rules can specify metadata. Currently, the only appearing in some rules,
and not actually used, is <code>RuleMetadata.CATEGORY</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">.withMetadata(RuleMetadata.CATEGORY, "Basic")</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>.withMetadata()</code> is basically putting key/value to a
<code>Map&lt;Object, Object&gt;</code>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_available_utilities">6.1.3. Available utilities</h4>
<div class="paragraph">
<p>For a list of what key services and constructs can be used in the rule,
see <a href="#Rules-Available-Rules-Utilities">Available Rules Utilities</a>.</p>
</div>
<div class="sect4">
<h5 id="_variable_stack">Variable stack</h5>
<div class="paragraph">
<p>The communication between the conditions and operations is done using the variable stack that is filled with the output of the condition/s and then given to the Iteration to be processed.
Within conditions, you can specify the name of the result iterable that is saved in the stack using <code>as()</code> method, the iteration can specify the iterable to iterate over using the <code>over()</code> method and even specify the name of for each processed single model of the result being processed.
Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">.addRule()
     .when(Query...as("result_list"))
     .perform(
     Iteration.over("result_list").as("single_var")
          ...
     )
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The varstack may be accesed even from the second condition in order to narrow the result of the previous one. After that the iteration may choose which result it wants to iterate over (it is even possible to have multiple iterations listed in the perform, each of which may access different result saved in the variable stack).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">.addRule()
     .when(Query...as("result_list").and(Query.from("result_list")....as("second_result_list")))
     .perform(
     Iteration.over("second_result_list")
          ...
     )
);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Rules-Basic-Rule-Execution-Flow-Patterns">6.2. Basic Rule Execution Flow Patterns</h3>
<div class="sect3">
<h4 id="_single_operation_operation">6.2.1. Single Operation - operation();</h4>
<div class="paragraph">
<p>No condition or iteration is needed. The following is an example of a single operation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-java" data-lang="java">return ConfigurationBuilder.begin()
    .addRule()
    .perform(new GraphOperation(){
        @Override
        public void perform(GraphRewrite event, EvaluationContext context){
            ...
        }
    });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Windup source code example: <a href="https://github.com/windup/windup/blob/master/rules-java/impl/src/main/java/org/jboss/windup/rules/apps/java/config/CopyJavaConfigToGraphRuleProvider.java#L99-L101" class="bare">https://github.com/windup/windup/blob/master/rules-java/impl/src/main/java/org/jboss/windup/rules/apps/java/config/CopyJavaConfigToGraphRuleProvider.java#L99-L101</a></p>
</div>
<div class="paragraph">
<p>The <code>copyConfigToGraph</code> GraphOperation used in the perform() above is defined before the rule.</p>
</div>
</div>
<div class="sect3">
<h4 id="_single_conditional_operation_if_operation">6.2.2. Single Conditional Operation - if( &#8230;&#8203; ){ operation()}</h4>
<div class="paragraph">
<p>A single condition must be met. The following is an example of a single conditional operation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-java" data-lang="java">return ConfigurationBuilder.begin()
    .addRule()
    .when( ... )
    .perform(new GraphOperation(){
        @Override
        public void perform(GraphRewrite event, EvaluationContext context){
            ...
        }
    });</code></pre>
</div>
</div>
<div class="paragraph">
<p>Windup source code example: <a href="https://github.com/windup/windup/blob/master/reporting/api/src/main/java/org/jboss/windup/reporting/rules/AttachApplicationReportsToIndexRuleProvider.java#L39-L41" class="bare">https://github.com/windup/windup/blob/master/reporting/api/src/main/java/org/jboss/windup/reporting/rules/AttachApplicationReportsToIndexRuleProvider.java#L39-L41</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_single_iteration_for_foomodel_class">6.2.3. Single Iteration - for( FooModel.class ){ &#8230;&#8203; }</h4>
<div class="paragraph">
<p>For simple iterations, you can extend the <code>IteratingRuleProvider</code> class to simplify the <code>perform</code> code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-java" data-lang="java">public class ComputeArchivesSHA512 extends IteratingRuleProvider&lt;ArchiveModel&gt;
{
    public ConditionBuilder when() {
        return Query.find(ArchiveModel.class);
    }

    // @formatter:off
    public void perform( GraphRewrite event, EvaluationContext context, ArchiveModel archive ){
        try( InputStream is = archive.asInputStream() ){
            String hash = DigestUtils.sha512Hex(is);
            archive.asVertex().setProperty(KEY_SHA512, hash);
        }
        catch( IOException e ){
            throw new WindupException("Failed to read archive: " + archive.getFilePath() +
                "\n    Due to: " + e.getMessage(), e);
        }
    }
    // @formatter:on

    @Override public String toStringPerform() { return this.getClass().getSimpleName(); }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Windup source code example: <a href="https://github.com/windup/windup/blob/master/rules-java/api/src/main/java/org/jboss/windup/rules/apps/java/scan/provider/DiscoverArchiveManifestFilesRuleProvider.java" class="bare">https://github.com/windup/windup/blob/master/rules-java/api/src/main/java/org/jboss/windup/rules/apps/java/scan/provider/DiscoverArchiveManifestFilesRuleProvider.java</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_conditional_iteration_if_for">6.2.4. Conditional Iteration - if( &#8230;&#8203; ){ for( &#8230;&#8203; ) }</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-java" data-lang="java">return ConfigurationBuilder.begin()
    .addRule()
    .when(
        new GraphCondition(){ ... }
    ).perform(
        Iteration.over(ArchiveModel.class)
            .perform( ... )
    )</code></pre>
</div>
</div>
<div class="paragraph">
<p>Windup source code example: <a href="https://github.com/windup/windup/blob/master/rules-java-ee/addon/src/main/java/org/jboss/windup/rules/apps/javaee/rules/DiscoverEjbAnnotationsRuleProvider.java#L82-L93" class="bare">https://github.com/windup/windup/blob/master/rules-java-ee/addon/src/main/java/org/jboss/windup/rules/apps/javaee/rules/DiscoverEjbAnnotationsRuleProvider.java#L82-L93</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_iteration_with_a_condition_for_if">6.2.5. Iteration With a Condition - for( &#8230;&#8203; ){ if( &#8230;&#8203; ){ &#8230;&#8203; } }</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-java" data-lang="java">return ConfigurationBuilder.begin()
.addRule()
    .when(
        // Stores all ArchiveModel's into variables stack, under that type.
        Query.find(ArchiveModel.class)
    ).perform(
        Iteration.over(ArchiveModel.class) // Picks up ArchiveModel's from the varstack.
            .when(new AbstractIterationFilter&lt;ArchiveModel&gt;(){
                @Override
                public boolean evaluate(GraphRewrite event, EvaluationContext context, ArchiveModel payload)
                {
                    return payload.getProjectModel() == null;
                }
                @Override
                public String toString()
                {
                    return "ProjectModel == null";
                }
            })
            .perform( ... )</code></pre>
</div>
</div>
<div class="paragraph">
<p>Windup source code example: <a href="https://github.com/windup/windup/blob/master/reporting/impl/src/main/java/org/jboss/windup/reporting/rules/rendering/RenderReportRuleProvider.java#L46-L66" class="bare">https://github.com/windup/windup/blob/master/reporting/impl/src/main/java/org/jboss/windup/reporting/rules/rendering/RenderReportRuleProvider.java#L46-L66</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_nested_iterations_for_for">6.2.6. Nested Iterations - for( &#8230;&#8203; ){ for( &#8230;&#8203; ) { &#8230;&#8203; } }</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-java" data-lang="java">.addRule()
     .when(...)
     .perform(Iteration //first iteration
     .over("list_variable").as("single_var")
     .perform(
         Iteration.over("single_var") //second iteration
         .perform(...).endIteration()
     )
     .endIteration()
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Windup source code example: <a href="https://github.com/windup/windup/blob/master/config/tests/src/test/java/org/jboss/windup/config/iteration/payload/IterationPayLoadPassTest.java#L186-L202" class="bare">https://github.com/windup/windup/blob/master/config/tests/src/test/java/org/jboss/windup/config/iteration/payload/IterationPayLoadPassTest.java#L186-L202</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Rules-Create-a-Basic-Java-based-Rule-Add-on">6.3. Create a Basic Java-based Rule Add-on</h3>
<div class="paragraph">
<p>You can create a Windup rule using Java or XML. This topic describes how to create a rule add-on using Java.</p>
</div>
<div class="sect3">
<h4 id="_prerequisites_2">6.3.1. Prerequisites</h4>
<div class="ulist">
<ul>
<li>
<p>You must install Windup.</p>
</li>
<li>
<p>You must install and configure Maven. Follow the instructions here: <a href="#Install-and-Configure-Maven">Install and Configure Maven</a>.</p>
</li>
<li>
<p>Before you begin, you may want also want to be familiar with the following documentation:</p>
<div class="ulist">
<ul>
<li>
<p>Windup rules are based on the ocpsoft <strong>rewrite</strong> project. You can find more information about ocpsoft <strong>rewrite</strong> here: <a href="http://ocpsoft.org/rewrite/" class="bare">http://ocpsoft.org/rewrite/</a></p>
</li>
<li>
<p>The JavaDoc for the Windup API is located here: <a href="http://windup.github.io/windup/docs/latest/javadoc/" class="bare">http://windup.github.io/windup/docs/latest/javadoc/</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Working examples of Java-based rules can be found in the <a href="https://github.com/windup/windup">Windup source code</a> and the <a href="https://github.com/windup/windup-quickstarts">Windup quickstarts</a> repositories.</p>
</div>
</div>
<div class="sect3">
<h4 id="_create_the_maven_project_2">6.3.2. Create the Maven Project</h4>
<div class="paragraph">
<p>Create a new Maven Java Project. The instructions below refer to the project folder location with the <strong>replaceable</strong> variable <code>RULE_PROJECT_HOME</code>.</p>
</div>
<div class="paragraph">
<p>Modify the project <code>pom.xml</code> file as follows.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the following properties. Be sure to replace <code>WINDUP_VERSION</code> with the current version of Windup, for example: 2.4.0-Final.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-xml" data-lang="xml">&lt;properties&gt;
    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
    &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;
    &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;
    &lt;version.windup&gt;WINDUP_VERSION&lt;/version.windup&gt;
&lt;/properties&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Add a dependency management section for the Windup BOM.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-xml" data-lang="xml">&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
        &lt;!-- BOM --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.jboss.windup&lt;/groupId&gt;
            &lt;artifactId&gt;windup-bom&lt;/artifactId&gt;
            &lt;version&gt;${version.windup}&lt;/version&gt;
            &lt;type&gt;pom&lt;/type&gt;
               &lt;scope&gt;import&lt;/scope&gt;
         &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Add a <code>&lt;dependencies&gt;</code> section to include Windup, rulesets, and test dependencies required by your rule add-on. Windup is a Forge/Furnace based application and has a modular design, so the dependencies will vary depending on the Windup APIs used by the rule.</p>
<div class="paragraph">
<p>The following are examples of some dependencies you may need for your rule add-on.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-xml" data-lang="xml">&lt;!-- API dependencies --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.windup.graph&lt;/groupId&gt;
    &lt;artifactId&gt;windup-graph&lt;/artifactId&gt;
    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.windup.config&lt;/groupId&gt;
    &lt;artifactId&gt;windup-config&lt;/artifactId&gt;
    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.windup.config&lt;/groupId&gt;
    &lt;artifactId&gt;windup-config-xml&lt;/artifactId&gt;
    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.windup.config&lt;/groupId&gt;
    &lt;artifactId&gt;windup-config-groovy&lt;/artifactId&gt;
    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.windup.utils&lt;/groupId&gt;
    &lt;artifactId&gt;windup-utils&lt;/artifactId&gt;
    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.windup.reporting&lt;/groupId&gt;
    &lt;artifactId&gt;windup-reporting&lt;/artifactId&gt;
    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;

&lt;!-- Dependencies on other rulesets --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.windup.rules.apps&lt;/groupId&gt;
    &lt;artifactId&gt;windup-rules-java&lt;/artifactId&gt;
    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.windup.rules.apps&lt;/groupId&gt;
    &lt;artifactId&gt;windup-rules-java-ee&lt;/artifactId&gt;
    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.forge.furnace.container&lt;/groupId&gt;
    &lt;artifactId&gt;cdi-api&lt;/artifactId&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.forge.furnace.container&lt;/groupId&gt;
    &lt;artifactId&gt;cdi&lt;/artifactId&gt;
    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;

&lt;!-- Test dependencies --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.forge.furnace.test&lt;/groupId&gt;
    &lt;artifactId&gt;furnace-test-harness&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.forge.furnace.test&lt;/groupId&gt;
    &lt;artifactId&gt;arquillian-furnace-classpath&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;junit&lt;/groupId&gt;
    &lt;artifactId&gt;junit&lt;/artifactId&gt;
    &lt;version&gt;4.11&lt;/version&gt;
    &lt;type&gt;jar&lt;/type&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.windup.exec&lt;/groupId&gt;
    &lt;artifactId&gt;windup-exec&lt;/artifactId&gt;
    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Add the <code>&lt;plugins&gt;</code> section to make it a Forge add-on.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-xml" data-lang="xml">&lt;build&gt;
    &lt;plugins&gt;
        &lt;!-- This plugin makes this artifact a Forge add-on. --&gt;
        &lt;plugin&gt;
            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;id&gt;create-forge-addon&lt;/id&gt;
                    &lt;phase&gt;package&lt;/phase&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;jar&lt;/goal&gt;
                    &lt;/goals&gt;
                    &lt;configuration&gt;
                        &lt;classifier&gt;forge-addon&lt;/classifier&gt;
                    &lt;/configuration&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;build&gt;</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_create_the_java_ruleprovider_class">6.3.3. Create the Java RuleProvider Class</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Within your Maven project, create the Java RuleProvider class.</p>
<div class="ulist">
<ul>
<li>
<p>This class can extend <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/AbstractRuleProvider.html">AbstractRuleProvider</a> or one of the following helper classes: <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/SingleRuleProvider.html">SingleRuleProvider</a> or  <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/IteratingRuleProvider.html">IteratingRuleProvider</a>.</p>
</li>
<li>
<p>If you prefer not to extend one of these classes, you can implement the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/RuleProvider.html">RuleProvider</a> interface.</p>
</li>
<li>
<p>It is recommended that you end the name of the class with <code>RuleProvider</code>. For example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class MyCustomRuleProvider extends AbstractRuleProvider
{
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Provide a constructor for your rule class.</p>
<div class="ulist">
<ul>
<li>
<p>In the constructor, you can create a new <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/metadata/RuleProviderMetadata.html">RuleProviderMetadata</a> builder instance for thisn RuleProvider type, using the provided parameters and <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/metadata/RulesetMetadata.html">RulesetMetadata</a>.</p>
</li>
<li>
<p>By default, rules run in the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/MigrationRulesPhase.html">MigrationRulesPhase</a>. If your rule should run earlier during the initial <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/phase/DiscoveryPhase.html">DiscoveryPhase</a>, this can be overridden in the constructor using the <code>setPhase()</code> method.</p>
</li>
<li>
<p>Use the <code>addExecuteAfter()</code> or <code>addExecuteBefore()</code> method to control the order in which the rule is executed,</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public MyCustomRuleProvider()
{
    super(MetadataBuilder.forProvider(MyCustomRuleProvider.class)
                .setPhase(DiscoveryPhase.class)
                .addExecuteBefore(MyOtherRuleProvider.class));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information about rule phases, see <a href="#Rules-Rule-Execution-Lifecycle">Rules Execution Lifecycles</a>.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Finally, add rules to the rule provider. Rules are added in the <code>getConfiguration()</code> method using the <code>ConfigurationBuilder.begin().addRule()</code> code construct.</p>
<div class="ulist">
<ul>
<li>
<p>Java rules consist of <em>conditions</em> and <em>actions</em> and follow the familiar "if/then/else" construct:</p>
<div class="literalblock">
<div class="content">
<pre>when(condition)
    perform(action)
otherwise
    perform(action</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Conditions are specified using <code>.when()</code>.</p>
</li>
<li>
<p>Actions are performed using <code>.perform()</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>High-level Conditions and Operations</p>
<div class="paragraph">
<p>The following is a specific high-level rule which uses high-level conditions (<code>JavaClass</code>) and operations (<code>Classification</code>). See the documentation of those conditions and operations for the details.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-java" data-lang="java">@Override
public Configuration getConfiguration(GraphContext context)
{
    return ConfigurationBuilder.begin()
        .addRule()
        .when(JavaClass.references("com.example.proprietary.servlet.annotation.ProprietaryServlet").at(TypeReferenceLocation.ANNOTATION)
        )
        .perform(
            Classification.as("Proprietary @ProprietaryServlet")
               .with(Link.to("Java EE 6 @WebServlet", "https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/index.html"))
               .withEffort(0)
               .and(Hint.withText("Migrate to Java EE 6 @WebServlet.").withEffort(8))
        );
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Working examples of Java-based rules can be found in the <a href="https://github.com/windup/windup-quickstarts">Windup quickstarts</a> and <a href="https://github.com/windup/windup">Windup source code</a> repositories.</p>
</div>
</li>
<li>
<p>Low-level Conditions and Operations</p>
<div class="paragraph">
<p>As you can see, the conditions and operations above are Java-specific.
They come with the <code>Java Basic</code> ruleset. The list of existing rulesets
will be part of the project documentation. Each ruleset will be
accompanied with a documentation for its `Condition`s and `Operation`s
(and also `Model`s).</p>
</div>
<div class="paragraph">
<p>These high-level elements provided by rulesets may cover majority of
cases, but not all. Then, you will need to dive into the mid-level
Windup building elements.</p>
</div>
</li>
<li>
<p>Mid-level Conditions and Operations</p>
</li>
</ul>
</div>
</li>
<li>
<p>Create a <code>beans.xml</code> file in the project <code>META-INF/</code> directory, for example:</p>
<div class="listingblock">
<div class="content">
<pre>PROJECT_DIRECTORY/src/main/resources/META-INF/beans.xml</pre>
</div>
</div>
<div class="paragraph">
<p>This file tells CDI to scan your add-on for CDI beans. The file can be empty, but it is a good practice to include the basic schema information.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap"><code class="language-xml" data-lang="xml">&lt;!-- Marker file indicating CDI 1.0 should be enabled --&gt;
&lt;beans xmlns="http://java.sun.com/xml/ns/javaee"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="
      http://java.sun.com/xml/ns/javaee
      http://java.sun.com/xml/ns/javaee/beans_1_0.xsd"&gt;
&lt;/beans&gt;</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_install_the_java_based_rule_add_on_in_your_local_maven_repository">6.3.4. Install the Java-based Rule Add-on in Your Local Maven Repository</h4>
<div class="paragraph">
<p>Before you can add the rule to Windup, you must compile it and install it in your local Maven repository.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a command prompt and navigate to <code>RULE_PROJECT_HOME</code> directory.</p>
</li>
<li>
<p>Type the following command to compile the rule and install it into the local Maven repository:</p>
<div class="listingblock">
<div class="content">
<pre>mvn clean install</pre>
</div>
</div>
</li>
<li>
<p>You should see the message <code>BUILD SUCCESS</code></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="add-the-rule-to-windup">6.3.5. Add the Rule to Windup</h4>
<div class="paragraph">
<p>The command to install the rule in Windup uses the Maven GAV (groupId, artifactId, and version) to locate the rule in the Maven repository. The command uses the following syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">WINDUP_HOME/bin/windup --install GROUP_ID:ARTIFACT_ID[,VERSION]</pre>
</div>
</div>
<div class="paragraph">
<p>The Maven groupId, artifactId, and version are the values you provided when you generated the Maven project and can be found in the project POM file. The following is an example of these values in a POM file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;groupId&gt;com.example.rules&lt;/groupId&gt;
&lt;artifactId&gt;my-custom-rule-provider&lt;/artifactId&gt;
&lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Follow these steps to add the rule to Windup.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a command prompt and navigate to the <code>WINDUP_HOME</code> directory.</p>
</li>
<li>
<p>Type the following command, replacing the example rule GAV values with your project values.</p>
<div class="listingblock">
<div class="content">
<pre>WINDUP_HOME/bin/windup --install org.example.rules:my-custom-rule-provider,1.0.0-SNAPSHOT</pre>
</div>
</div>
</li>
<li>
<p>At the following prompt, choose <code>Y</code>.</p>
<div class="listingblock">
<div class="content">
<pre>Confirm installation [Y/n]? Y</pre>
</div>
</div>
</li>
<li>
<p>You should see the following result.</p>
<div class="listingblock">
<div class="content">
<pre>Installation completed successfully.</pre>
</div>
</div>
</li>
<li>
<p>Type <code>exit</code> to exit the Windup console.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_test_the_java_based_rule_add_on">6.3.6. Test the Java-based Rule Add-on</h4>
<div class="paragraph">
<p>Test the Java-based rule add-on against your application file by running Windup in a terminal.</p>
</div>
<div class="paragraph">
<p>The command uses this syntax:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>WINDUP_HOME/bin/windup [--sourceMode] --input INPUT_ARCHIVE_OR_FOLDER --output OUTPUT_REPORT_DIRECTORY --packages PACKAGE_1 PACKAGE_2 PACKAGE_N</pre>
</div>
</div>
<div class="paragraph">
<p>You should see the following result:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>***SUCCESS*** Windup report created: QUICKSTART_HOME/windup-reports-java/index.html</pre>
</div>
</div>
<div class="paragraph">
<p>For more detailed instructions on how to execute Windup, see the <a href="http://windup.github.io/windup/docs/latest/html/WindupUserGuide.html">Windup User Guide</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_review_the_output_report">6.3.7. Review the Output Report</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open OUTPUT_REPORT_DIRECTORY /index.html file in a browser.</p>
</li>
<li>
<p>You are presented with an Overview page containing the application profiles.</p>
</li>
<li>
<p>Click on the application link to review the detail page. Check to be sure the warning messages, links, and story points match what you expect to see.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_debugging_profiling_and_logging">6.3.8. Debugging, Profiling, and Logging</h4>

</div>
</div>
<div class="sect2">
<h3 id="Dev-Debugging-and-Profiling">6.4. Debugging and Profiling</h3>
<div class="sect3">
<h4 id="_configure_logging">6.4.1. Configure Logging</h4>
<div class="paragraph">
<p>Frequently the first step in debugging is to produce more verbose logs. Windup uses JDK logging, which can be configured by editing <code>$WINDUP_HOME/logging.properties</code>.</p>
</div>
<div class="paragraph">
<p>Alternatively, you can create a logging.properties file and <code>export WINDUP_OPTS="-Djava.util.logging.config.file=/path/to/logging.properties"</code> before running windup.</p>
</div>
<div class="paragraph">
<p>On Windows, the command would be <code>set WINDUP_OPTS="-Djava.util.logging.config.file=c:\path\to\logging.properties"</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_debug_the_windup_distribution_runtime">6.4.2. Debug the Windup Distribution Runtime</h4>
<div class="paragraph">
<p>You can debug the Windup distribution using one of the following approaches.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pass the <code>--debug</code> argument on the command line when you execute Windup.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">For Linux:    WINDUP_HOME/bin $ ./windup --debug
For Windows:  C:\WINDUP_HOME\bin&gt; windup --debug</pre>
</div>
</div>
</li>
<li>
<p>Configure the <code>FORGE_OPTS</code> for debugging.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">export FORGE_OPTS="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=8000"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_debug_a_test_using_netbeans">6.4.3. Debug a Test Using NetBeans</h4>
<div class="paragraph">
<p>Click the <code>Debug Test File</code> button, or choose <code>Menu</code>  <code>Debug</code>  <code>Debug Test File</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_profile_a_test_using_netbeans">6.4.4. Profile a Test Using NetBeans</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Profiling requires a lot of memory, so be sure to increase the NetBeans memory settings.</p>
<div class="ulist">
<ul>
<li>
<p>Open the <code>NETBEANS_HOME/etc/netbeans.conf</code> file</p>
</li>
<li>
<p>Find the line with <code>netbeans_default_options=</code></p>
</li>
<li>
<p>Add the following option</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">-J-Xmx5200m -J-XX:MaxPermSize=1024m</pre>
</div>
</div>
</li>
<li>
<p>Restart NetBeans.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <code>Menu &gt; Profile &gt; Profile Test File</code>.</p>
</li>
<li>
<p>In the resulting dialog, enter the following.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">exec.args=-Djboss.modules.system.pkgs=org.netbeans</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_profile_forge_runtime_using_yourkit">6.4.5. Profile Forge Runtime Using YourKit</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download and unzip <a href="http://www.yourkit.com/">YourKit</a>. Be sure to get the trial license.</p>
</li>
<li>
<p>Configure the <code>FORGE_OPTS</code> for Yourkit:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">export YOURKIT_HOME=/home/ondra/sw/prog/YourKit-b14092
export FORGE_OPTS="-Djboss.modules.system.pkgs=com.yourkit -agentpath:$YOURKIT_HOME/bin/linux-x86-64/libyjpagent.so=sampling,onexit=snapshot,delay=0"</pre>
</div>
</div>
</li>
<li>
<p>Run <code>forge</code>. For details, see <a href="http://forge.jboss.org/1.x/docs/using/profiling-forge.html">Profiling
Forge</a>, but skip the first 2 points that direct you to copy the YourKit module and JAR into the Forge installation. Forge 2 already contains the YourKit module and JAR&gt;.</p>
</li>
<li>
<p>Run <code>windup-analyze-app</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">forge -e windup-migrate-app</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_developer_contributing_information">6.4.6. Developer Contributing Information</h4>

</div>
</div>
<div class="sect2">
<h3 id="Dev-Development-Guidelines-and-Conventions">6.5. Development Guidelines and Conventions</h3>
<div class="ulist">
<ul>
<li>
<p><a href="#project-source-code-formatting">Project Source Code Formatting</a></p>
</li>
<li>
<p><a href="#source-code-naming-conventions">Source Code Naming Conventions</a></p>
</li>
<li>
<p><a href="#maven-project-naming-conventions">Maven Project Naming Conventions</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="project-source-code-formatting">6.5.1. Project Source Code Formatting</h4>
<div class="paragraph">
<p>All project source code contributed to Windup should be formatted using the settings defined in the <code>Eclipse_Code_Format_Profile.xml</code> file located in the <code>ide-config</code> directory of the Windup project.</p>
</div>
<div class="sect4">
<h5 id="_eclipse_ide">Eclipse IDE</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Eclipse, choose Windows &#8594; Preferences.</p>
</li>
<li>
<p>Expand Java &#8594; Code Style &#8594; Formatter</p>
</li>
<li>
<p>Click Import</p>
</li>
<li>
<p>Browse to the <code>Eclipse_Code_Format_Profile.xml</code> located in the <code>ide-config</code> directory of the Windup project, then click 'OK'.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_netbeans_ide">Netbeans IDE</h5>
<div class="paragraph">
<p>Use this file to format Windup source code:</p>
</div>
<div class="paragraph">
<p><a href="http://plugins.netbeans.org/plugin/50877/eclipse-code-formatter-for-java">http://plugins.netbeans.org/plugin/50877/eclipse-code-formatter-for-java</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_intellij_idea">IntelliJ IDEA</h5>
<div class="paragraph">
<p>Use this file to format Windup source code:</p>
</div>
<div class="paragraph">
<p><a href="http://plugins.jetbrains.com/plugin/?id=6546">http://plugins.jetbrains.com/plugin/?id=6546</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="source-code-naming-conventions">6.5.2. Source Code Naming Conventions</h4>
<div class="sect4">
<h5 id="_class_interface_and_implementation_names">Class Interface and Implementation Names</h5>
<div class="ulist">
<ul>
<li>
<p>Do not name interfaces using the prefix 'I' for interface names. Instead, use a descriptive term for the interface, like <code>Module.java</code>.</p>
</li>
<li>
<p>The implementation class name should begin with a descriptive name, followed by the interface name, for example, for example <code>JavaHandlerModule.java</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_standard_prefixes_and_suffixes">Standard Prefixes and Suffixes</h5>
<div class="ulist">
<ul>
<li>
<p>Append all RuleProvider class names with <code>RuleProvider</code>.</p>
</li>
<li>
<p>Append all XML rule file names with <code>.windup.xml</code></p>
</li>
<li>
<p>Append all Model class names with <code>Model</code>.</p>
</li>
<li>
<p>All test names should be prefixed with 'Test'.</p>
</li>
<li>
<p>Property constants: TBD</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="maven-project-naming-conventions">6.5.3. Maven Project Naming Conventions</h4>
<div class="sect4">
<h5 id="_maven_module_names">Maven Module Names</h5>
<div class="paragraph">
<p>The following are not really accurate at this time. This is still TBD!</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Lowercase with dashes. Start with <code>windup-</code>.</p>
</li>
<li>
<p>Ruleset add-ons start with <code>windup-rules-</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Submit-Code-Updates-to-the-Project">6.6. Submit Code Updates to the Windup Project</h3>
<div class="paragraph">
<p>To get the Windup Source Code, see <a href="#Dev-Get-the-Source-Code">Get the Source Code</a> for instructions.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a command terminal and navigate to the root of the Windup project directory.</p>
</li>
<li>
<p>Create a new topic branch to contain your features, changes, or fixes using the <code>git checkout</code> command:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap"> git checkout -b  &lt;topic-branch-name&gt; upstream/master</pre>
</div>
</div>
<div class="paragraph">
<p>If you are fixing a JIRA, it is a good practice to use the number in the
branch name. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">git checkout -b WINDUP-225 upstream/master</pre>
</div>
</div>
</li>
<li>
<p>Make changes or updates to the source files. Be sure to test the changes thoroughly!</p>
</li>
<li>
<p>When you are sure your updates are ready and working, use the <code>git add</code> command to add new or changed file contents to the
staging area.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">git add &lt;folder-name&gt;/
git add &lt;file-name&gt;</pre>
</div>
</div>
</li>
<li>
<p>Use the <code>git status</code> command to view the status of the files in the
directory and in the staging area and ensure that all modified files are
properly staged:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">git status</pre>
</div>
</div>
</li>
<li>
<p>Commit your changes to your local topic branch. For example:</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">git commit -m 'WINDUP-225: Description of change...'</pre>
</div>
</div>
</li>
<li>
<p>Push your local topic branch to your GitHub forked repository. This
will create a branch on your GitHub fork repository with the same name as
your local topic branch name.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">git push origin HEAD</pre>
</div>
</div>
<div class="paragraph">
<p><em>Note: The above command assumes your remote repository is named
'origin'. You can verify your forked remote repository name using the
command `git remote -v`</em>.</p>
</div>
</li>
<li>
<p>Browse to the newly created branch on your forked GitHub repository.</p>
<div class="listingblock">
<div class="content">
<pre class="nowrap">https://github.com/&lt;your-username&gt;/windup/tree/&lt;topic-branch-name&gt;</pre>
</div>
</div>
</li>
<li>
<p>Open a Pull Request. For details, see
<a href="https://help.github.com/articles/using-pull-requests">Using Pull
Requests</a>.</p>
<div class="ulist">
<ul>
<li>
<p>Give the pull request a clear title and description.</p>
</li>
<li>
<p>Review the modifications that are to be submitted in the pull to be sure it contains
only the changes you expect.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The pull request will be reviewed and merged by a Windup project administrator.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appendix">7. Appendix</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="About-the-HOME-Variable">7.1. About the WINDUP_HOME Variable</h3>
<div class="paragraph">
<p>This documentation uses the <strong>WINDUP_HOME</strong> <em>replaceable</em> value to denote the path to the Windup distribution. When you encounter this value in the documentation, be sure to replace it with the actual path to your Windup installation.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you download and install the latest distribution of Windup from the JBoss Nexus repository, WINDUP_HOME refers to the windup-distribution-2.4.0-Final folder extracted from the downloaded ZIP file.</p>
</li>
<li>
<p>If you build Windup from GitHub source, WINDUP_HOME refers to the windup-distribution-2.4.0-Final folder extracted from the windup-distribution/target/windup-distribution-2.4.0-Final.zip file.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Project-Information">7.2. Windup Project Information</h3>
<div class="sect3">
<h4 id="_github_repository">7.2.1. Github Repository</h4>
<div class="paragraph">
<p>The Windup project github repository is located at <a href="https://github.com/windup/windup/" class="bare">https://github.com/windup/windup/</a>.</p>
</div>
<div class="paragraph">
<p>For details on how to contribute to the Windup project source code, see the <a href="http://windup.github.io/windup/docs/latest/html/WindupCoreDevelopmentGuide.html">Windup Core Development Guide</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_documentation">7.2.2. Documentation</h4>
<div class="paragraph">
<p>The latest Windup documentation is currently located here in the Windup project <a href="https://github.com/windup/windup/wiki/">Wiki</a>.</p>
</div>
<div class="paragraph">
<p>For additional information, refer to the Windup <a href="http://windup.github.io/windup/docs/latest/javadoc/index.html">Javadoc</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_website">7.2.3. Website</h4>
<div class="paragraph">
<p>There is currently no website for Windup.</p>
</div>
<div class="paragraph">
<p>The windup.jboss.org website currently provides information primarily for legacy Windup 1.x (legacy).</p>
</div>
</div>
<div class="sect3">
<h4 id="_irc_chat">7.2.4. IRC chat</h4>
<div class="paragraph">
<p>Server: irc.freenode.net<br>
Channel: #windup</p>
</div>
</div>
<div class="sect3">
<h4 id="_mailing_lists">7.2.5. Mailing lists</h4>
<div class="paragraph">
<p>Subscribe to the JBoss mailing lists at
<a href="https://lists.jboss.org/mailman/listinfo/windup-dev" class="bare">https://lists.jboss.org/mailman/listinfo/windup-dev</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Core development discussion: <a href="mailto:windup-dev@redhat.com">windup-dev@redhat.com</a></p>
</li>
<li>
<p>Rules development discussion, usage: <a href="mailto:windup-users@redhat.com">windup-users@redhat.com</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_core_development_team_and_irc_nicks">7.2.6. Core development team (and IRC nicks)</h4>
<div class="paragraph">
<p>Lead: Lincoln Baxter (lincolnthree)<br>
Members: Jess Sightler (jsightler), Matej Briskar (mbriskar), Ondrej
Zizka (ozizka)</p>
</div>
</div>
<div class="sect3">
<h4 id="_irc_meeting_bot_commands_hint_for_the_moderator">7.2.7. IRC meeting bot commands (hint for the moderator)</h4>
<div class="listingblock">
<div class="content">
<pre class="nowrap">#startmeeting
#chair lincolnthree, ozizka, jsightler, mbriskar
#addtopic Status Reports
#addtopic Next steps
#nexttopic
#info ...
#endmeeting
Useful Commands: #action #agreed #help #info #idea #link #topic.</pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-09-09 14:32:24 EDT
</div>
</div>
</body>
</html>