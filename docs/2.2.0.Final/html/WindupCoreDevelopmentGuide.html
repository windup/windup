<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<title>Windup Core Development Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
</head>
<body class="book">
<div id="header">
<h1>Windup Core Development Guide</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_overview">1. Overview</a>
<ul class="sectlevel2">
<li><a href="#_what_is_windup">1.1. What is Windup?</a></li>
<li><a href="#Features-of-Windup-2.0">1.2. Features of Windup 2.0</a></li>
<li><a href="#About-the-WINDUP_HOME-Variable">1.3. About the WINDUP_HOME Variable</a></li>
</ul>
</li>
<li><a href="#_get_started">2. Get Started</a>
<ul class="sectlevel2">
<li><a href="#Install-and-Configure-Maven">2.1. Install and Configure Maven</a></li>
<li><a href="#Dev-Get-the-Windup-Source-Code">2.2. Get the Windup Source Code</a></li>
<li><a href="#Dev-Build-Windup-from-Source">2.3. Build Windup from Source</a></li>
<li><a href="#Dev-Execute-Windup-Built-from-Source">2.4. Execute Windup (Built from Windup Source)</a></li>
<li><a href="#Execute-Windup">2.5. Execute Windup</a></li>
<li><a href="#Review-the-Report">2.6. Review the Report</a></li>
</ul>
</li>
<li><a href="#_developer_contributing_information">3. Developer Contributing Information</a>
<ul class="sectlevel2">
<li><a href="#Dev-Development-Guidelines-and-Conventions">3.1. Development Guidelines and Conventions</a></li>
<li><a href="#Dev-Submit-Code-Updates-to-the-Windup-Project">3.2. Submit Code Updates to the Windup Project</a></li>
</ul>
</li>
<li><a href="#_understand_the_windup_architecture_and_structure">4. Understand the Windup Architecture and Structure</a>
<ul class="sectlevel2">
<li><a href="#Windup-Architectural-Components">4.1. Windup Architectural Components</a></li>
<li><a href="#Dev-Windup-Project-Structure">4.2. Windup Project Structure</a></li>
</ul>
</li>
<li><a href="#_rules_and_rulesets">5. Rules and Rulesets</a>
<ul class="sectlevel2">
<li><a href="#Windup-Processing-Overview">5.1. Windup Processing Overview</a></li>
<li><a href="#Rules-Rule-Execution-Lifecycle">5.2. Rule Execution Lifecycle</a></li>
<li><a href="#Rules-Rule-Story-Points">5.3. Rule Story Points</a></li>
<li><a href="#Rules-Difference-Between-XML-based-and-Java-based-Rules">5.4. Difference Between XML-based and Java-based Rules</a></li>
</ul>
</li>
<li><a href="#_create_and_test_java_rule_add_ons">6. Create and Test Java Rule Add-ons</a>
<ul class="sectlevel2">
<li><a href="#Install-and-Configure-Maven">6.1. Install and Configure Maven</a></li>
<li><a href="#Rules-Java-based-Rule-Structure">6.2. Java-based Rule Structure</a></li>
<li><a href="#Rules-Basic-Rule-Execution-Flow-Patterns">6.3. Basic Rule Execution Flow Patterns</a></li>
<li><a href="#Rules-Create-a-Basic-Java-based-Rule-Add-on">6.4. Create a Basic Java-based Rule Add-on</a></li>
</ul>
</li>
<li><a href="#_create_and_test_xml_rules">7. Create and Test XML Rules</a>
<ul class="sectlevel2">
<li><a href="#Rules-Create-a-Basic-XML-Rule">7.1. Create a Basic XML Rule</a></li>
<li><a href="#Rules-XML-Rule-When-Condition-Syntax">7.2. XML Rule - When Condition Syntax</a></li>
<li><a href="#Rules-XML-Rule-Perform-Action-Syntax">7.3. XML Rule - Perform Action Syntax</a></li>
<li><a href="#Rules-Test-an-XML-Rule-In-Windup">7.4. Test an XML Rule in Windup</a></li>
</ul>
</li>
<li><a href="#_core_developer_topics">8. Core Developer topics</a>
<ul class="sectlevel2">
<li><a href="#Dev-Windup-Bootstrap">8.1. Windup Bootstrap</a></li>
<li><a href="#_classloading_notes">8.2. Classloading Notes</a></li>
<li><a href="#Dev-Connect-to-the-Graph-via-Rexster">8.3. Connect to the Graph via Rexster</a></li>
<li><a href="#Dev-Decompiling">8.4. Decompiling</a></li>
<li><a href="#Dev-Dependencies">8.5. Dependencies (Forge add-ons)</a></li>
<li><a href="#Dev-Frames-Extensions">8.6. Frames Extensions</a></li>
<li><a href="#Dev-Internal-API-Features">8.7. Internal API Features</a></li>
<li><a href="#Dev-Logging">8.8. Logging</a></li>
<li><a href="#Dev-Variables-Stack">8.9. Variables Stack</a></li>
<li><a href="#Dev-Git-Rebasing">8.10. Git Rebasing</a></li>
</ul>
</li>
<li><a href="#_rules_topics">9. Rules topics</a>
<ul class="sectlevel2">
<li><a href="#Rules-Available-Rules-Utilities">9.1. Available Rule Utilities</a></li>
<li><a href="#Dev-Concepts-and-Philosophy">9.2. Concepts &amp; Philosophy</a></li>
<li><a href="#Rules-Creating-Rule-Operations">9.3. Creating Rule Operations</a></li>
<li><a href="#Rules-Rulesets">9.4. Rulesets</a></li>
<li><a href="#Ruleset-Java-Basic-Ruleset">9.5. Java Basic Ruleset</a></li>
<li><a href="#Ruleset-Java-Classifications-and-Inline-Hints">9.6. Ruleset Java Classifications and Inline Hints</a></li>
<li><a href="#Ruleset-Java-EE-Apps">9.7. Ruleset Java EE Apps</a></li>
<li><a href="#Ruleset-Reporting">9.8. Ruleset Reporting</a></li>
<li><a href="#Ruleset-XML">9.9. XML Ruleset</a></li>
<li><a href="#Rules-Windup-Models">9.10. Windup Models</a></li>
<li><a href="#Rules-Create-Java-Queries">9.11. Create Java Queries</a></li>
<li><a href="#Rules-Rules-Metadata">9.12. Rules Metadata</a></li>
<li><a href="#Rules-Rules-Operations">9.13. Rules Operations</a></li>
<li><a href="#Rules-Ops-Reporting-TypeReference">9.14. Ops Reporting TypeReference</a></li>
</ul>
</li>
<li><a href="#_debugging_and_troubleshooting">10. Debugging and Troubleshooting</a>
<ul class="sectlevel2">
<li><a href="#Dev-Debugging-and-Profiling">10.1. Debugging and Profiling</a></li>
<li><a href="#_troubleshoot_windup_issues">10.2. Troubleshoot Windup Issues</a></li>
</ul>
</li>
<li><a href="#_wiki_information">11. Wiki Information</a>
<ul class="sectlevel2">
<li><a href="#About-the-Windup-Wiki">11.1. About the Windup Wiki</a></li>
<li><a href="#Dev-Add-Images-to-the-Windup-Wiki">11.2. Add Images to the Windup Wiki</a></li>
</ul>
</li>
<li><a href="#_windup_product_release_and_documentation_process">12. Windup Product Release and Documentation Process</a>
<ul class="sectlevel2">
<li><a href="#Dev-Windup-Release-Process">12.1. Windup Release Process</a></li>
<li><a href="#Dev-Create-Windup-JavaDoc">12.2. Create Windup JavaDoc</a></li>
<li><a href="#Dev-Windup-Documentation-Process">12.3. Windup Documentation Process</a></li>
</ul>
</li>
<li><a href="#_additional_resources_2">13. Additional Resources</a>
<ul class="sectlevel2">
<li><a href="#Review-the-Windup-Quickstarts">13.1. Review the Windup Quickstarts</a></li>
<li><a href="#Get-Involved">13.2. Get Involved</a></li>
<li><a href="#Known-Issues">13.3. Known Windup Issues</a></li>
<li><a href="#Report-Issues-with-Windup">13.4. Report Issues with Windup</a></li>
</ul>
</li>
<li><a href="#_appendix">14. Appendix</a>
<ul class="sectlevel2">
<li><a href="#Glossary">14.1. Glossary of Terms Used in Windup</a></li>
<li><a href="#Dev-Windup-Project-Information">14.2. Windup Project Information</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_overview">1. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide is for developers who plan to contribute source code updates
or core rule add-ons to the Windup 2.0 project.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/windup-logo-large.png" alt="Windup Logo"></span></p>
</div>
<hr>
<div class="sect2">
<h3 id="_what_is_windup">1.1. What is Windup?</h3>
<div class="paragraph">
<p>JBoss Windup is a rule-based tool to simplify application migrations.</p>
</div>
<div class="paragraph">
<p>Running from a <a href="http://forge.jboss.org">Forge</a> environment, the tool examines EAR, WAR, and
JAR deployments (or a project source directory) and produces an HTML report detailing the inner workings of
the Java application to simplify migration efforts. It seeks to make
migrating from other containers to JBoss EAP a piece of cake.</p>
</div>
<div class="sect3">
<h4 id="_windup_2_0_vs_windup_0_7_x">1.1.1. Windup 2.0 vs. Windup 0.7.x</h4>
<div class="paragraph">
<p>Windup 2.0 aims to deliver the same functionality as legacy Windup, however, the internal architecture and rule structure is very different and allows for the creation of much more complex rules.</p>
</div>
</div>
<div class="sect3">
<h4 id="_how_does_windup_simplify_migration">1.1.2. How Does Windup Simplify Migration?</h4>
<div class="paragraph">
<p>Windup looks for common resources and highlight technologies and known “trouble
spots” in migrating applications. The goal of Windup is to provide a
high level view into relevant technologies in use within the
application, and provide a consumable report for organizations to
estimate, document, and migrate enterprise applications to Java EE and JBoss EAP.</p>
</div>
<div class="paragraph">
<p>These are some of the of the areas targetted by current core Windup rulesets:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Ruleset</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reads compiled Java files, determines if blacklisted classes are imported, and if so, continues to profile the resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSP code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reads JSP files, extracts the JSP imports and taglibs, and continues to
profile the resource</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">XML configuration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reads XML files into a DOM objects and continues to profile the resource.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_follow_windup_on_twitter">1.1.3. Follow Windup on Twitter!</h4>
<div class="paragraph">
<p>Follow Windup on Twitter <a href="https://twitter.com/jbosswindup">@JBossWindup</a> for updates and more!</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Features-of-Windup-2.0">1.2. Features of Windup 2.0</h3>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Shared Data Model
</td>
<td class="hdlist2">
<p>Windup 2.0 creates a shared data model graph that provides the following benefits.</p>
<div class="ulist">
<ul>
<li>
<p>It enables complex rule interaction, allowing rules to pass findings to other rules.</p>
</li>
<li>
<p>It enables 3rd-party plug-ins to interact with other plugins, rules and reports.</p>
</li>
<li>
<p>The data graph organizes the findings to be searchable and queryable.</p>
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
Extensibility
</td>
<td class="hdlist2">
<p>Windup 2.0 can be extended by developers, users, and 3rd-parties.</p>
<div class="ulist">
<ul>
<li>
<p>It provides a plug-in API to inject other applications into Windup.</p>
</li>
<li>
<p>It enables 3rd-parties to create simple POJO plug-ins that can interact with the data graph.</p>
</li>
<li>
<p>Means we don’t have to invent everything. Users with domain knowledge can implement their own rules.</p>
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
Better Rules
</td>
<td class="hdlist2">
<p>Windup 2.0 provides more powerful and complex rules.</p>
<div class="ulist">
<ul>
<li>
<p>XML-based rules are simple to write and and easy to implement.</p>
</li>
<li>
<p>Java-based rule add-ons are based on  <a href="http://ocpsoft.org/rewrite/">OCPsoft Rewrite</a> and provide greater flexibility and power creating when rules.</p>
</li>
<li>
<p>Rules can now be nested to handle more complex situations. This means you can nest simple statements rather than use complex XPATH or REGEX expressions.
*Rules can be linked using and/or statements</p>
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
Automation
</td>
<td class="hdlist2">
<p>Windup 2.0 has the ability to automate some of the migration processes.</p>
<div class="ulist">
<ul>
<li>
<p>Windup is integrated with Forge 2.0, meaning it can generate projects, libraries, and configuration files.</p>
</li>
<li>
<p>Rules can create Forge inputs and put them into the data graph.</p>
</li>
<li>
<p>During the automation phase, the data graph inputs can be processed to generate a new project.</p>
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
Work Estimation
</td>
<td class="hdlist2">
<p>Estimates for the level of effort is based on the skills required and the classification of migration work needed.</p>
<div class="ulist">
<ul>
<li>
<p>Lift and Shift - The code or file is standards-based and can be ported to the new environment with no changes.</p>
</li>
<li>
<p>Mapped - There is a standard mapping algorithm to port the code or file to the new environment.</p>
</li>
<li>
<p>Custom – The code or file must be rewritten or modified to work in the new environment.</p>
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
Better Reporting
</td>
<td class="hdlist2">
<p>Windup 2.0  reports are now targeted for specific audiences.</p>
<div class="ulist">
<ul>
<li>
<p>IT Management - Applications are ranked by cost of migration.</p>
</li>
<li>
<p>Project Management - Reports detail the type of work and estimation of effort to complete the tasks.</p>
</li>
<li>
<p>Developers - An Eclipse plug-in provides hints and suggested code changes within the IDE.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="About-the-WINDUP_HOME-Variable">1.3. About the WINDUP_HOME Variable</h3>
<div class="paragraph">
<p>This documentation uses the <code>WINDUP_HOME</code> <strong>replaceable</strong> value to denote the path to the Windup distribution. When you encounter this value in the documentation, be sure to replace it with the actual path to your Windup installation.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you download and install the latest distribution of Windup from the JBoss Nexus repository, <code>WINDUP_HOME</code> refers to the <code>windup-distribution-2.0.0.VERSION</code> folder extracted from the downloaded ZIP file.</p>
</li>
<li>
<p>If you build Windup from GitHub source, <code>WINDUP_HOME</code> refers to the <code>windup-distribution-2.0.0-VERSION</code> folder extracted from the Windup source <code>dist/target/windup-distribution-2.0.0-VERSION.zip</code> file.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_get_started">2. Get Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before you begin to contribute to Windup, take a quick tour to see how to use it.</p>
</div>
<div class="sect2">
<h3 id="Install-and-Configure-Maven">2.1. Install and Configure Maven</h3>
<div class="paragraph">
<p>If you plan to contribute to the core code base or create Java-based rule add-ons, you must first install and configure Maven to build Windup from source.</p>
</div>
<div class="sect3">
<h4 id="_download_and_install_maven">2.1.1. Download and Install Maven</h4>
<div class="paragraph">
<p>If you plan to use Eclipse Luna (4.4) to build Windup, you can skip this
step and go directly to the section entitled <a href="#configure-maven-to-build-windup">Configure Maven to Build Windup</a>. This version of Eclipse embeds Maven 3.2.1 so you do not need to
install it separately.</p>
</div>
<div class="paragraph">
<p>If you plan to run Maven using the command line or plan to use Red Hat
JBoss Developer Studio 7.1.1 or an older version of Eclipse, you must
install Maven 3.1.1. or later.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <a href="http://maven.apache.org/download.html">Apache Maven Project -
Download Maven</a> and download the latest distribution for your operating
system.</p>
</li>
<li>
<p>See the Maven documentation for information on how to download and
install Apache Maven for your operating system.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_configure_the_maven_installation_in_your_ide">2.1.2. Configure the Maven Installation in Your IDE</h4>
<div class="paragraph">
<p>JBoss Developer Studio 7.1.1 is built upon Eclipse Kepler (4.3), which
embeds Maven 3.0.4. If you plan to use JBoss Developer Studio 7.1.1 or
an Eclipse version earier than Eclipse Luna (4.4), you must replace the
embedded 3.0.4 version of Maven with this newer version.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the menu, choose <code>Window</code> -&#8594; <code>Preferences</code>.</p>
</li>
<li>
<p>Expand <code>Maven</code> and click on <code>Installations</code>.</p>
</li>
<li>
<p>Uncheck <code>Embedded (3.0.4/1.4.0.20130531-2315)</code></p>
</li>
<li>
<p>Click <code>Add</code> and navigate to your Maven install directory. Select it
and click <code>OK</code>.</p>
</li>
<li>
<p>Make sure the new external Maven installation is checked and click
<code>OK</code> to return to JBoss Developer Studio.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><em>Note: If you use another IDE, refer to the product documentation to
update the Maven installation.</em></p>
</div>
</div>
<div class="sect3">
<h4 id="configure-maven-to-build-windup">2.1.3. Configure Maven to Build Windup</h4>
<div class="paragraph">
<p>Windup uses artifacts located in the
<a href="http://repository.jboss.org/nexus/content/groups/public/">JBoss Nexus</a>
repository. You must configure Maven to use this repository before you
build Windup.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open your <code>${user.home}/.m2/settings.xml</code> file for editing.</p>
</li>
<li>
<p>Copy the following <code>jboss-nexus-repository</code> profile XML prior to the
ending <code>&lt;/profiles&gt;</code> element.</p>
<div class="listingblock">
<div class="content">
<pre>&lt;profile&gt;
  &lt;id&gt;jboss-nexus-repository&lt;/id&gt;
  &lt;repositories&gt;
    &lt;repository&gt;
      &lt;id&gt;jboss-nexus-repository&lt;/id&gt;
      &lt;url&gt;http://repository.jboss.org/nexus/content/groups/public/&lt;/url&gt;
      &lt;releases&gt;
        &lt;enabled&gt;true&lt;/enabled&gt;
      &lt;/releases&gt;
      &lt;snapshots&gt;
        &lt;enabled&gt;true&lt;/enabled&gt;
      &lt;/snapshots&gt;
    &lt;/repository&gt;
  &lt;/repositories&gt;
  &lt;pluginRepositories&gt;
    &lt;pluginRepository&gt;
      &lt;id&gt;jboss-nexus-plugin-repository&lt;/id&gt;
      &lt;url&gt;http://repository.jboss.org/nexus/content/groups/public/&lt;/url&gt;
      &lt;releases&gt;
        &lt;enabled&gt;true&lt;/enabled&gt;
      &lt;/releases&gt;
      &lt;snapshots&gt;
        &lt;enabled&gt;true&lt;/enabled&gt;
      &lt;/snapshots&gt;
    &lt;/pluginRepository&gt;
  &lt;/pluginRepositories&gt;
&lt;/profile&gt;</pre>
</div>
</div>
</li>
<li>
<p>Copy the following XML prior to the ending <code>&lt;/activeprofiles&gt;</code>
element to make the profile active.</p>
<div class="listingblock">
<div class="content">
<pre>&lt;activeProfile&gt;jboss-nexus-repository&lt;/activeProfile&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You are now configured to build Windup.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Get-the-Windup-Source-Code">2.2. Get the Windup Source Code</h3>
<div class="paragraph">
<p>To contribute to the Windup 2.0 project source code, you must fork the Windup repository to your own Git, clone your fork, commit your work on topic branches, and make pull requests back to the Windup repository.</p>
</div>
<div class="sect3">
<h4 id="_install_the_git_client">2.2.1. Install the Git Client</h4>
<div class="paragraph">
<p>If you don&#8217;t have the Git client (<code>git</code>), get it from:
<a href="http://git-scm.com/" class="bare">http://git-scm.com/</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Be sure to generate an SSH key and add the public key to your GitHub account: <a href="https://help.github.com/articles/generating-ssh-keys" class="bare">https://help.github.com/articles/generating-ssh-keys</a>. You can verify the key using the following command:</p>
<div class="literalblock">
<div class="content">
<pre>ssh -T git@github.com</pre>
</div>
</div>
<div class="paragraph">
<p>You should see a message indicating your ID has successfully authenticated.</p>
</div>
</li>
<li>
<p>You should also configure your name and email identity using the following commands:</p>
<div class="literalblock">
<div class="content">
<pre>git config --global user_name "FIRST_NAME LAST_NAME"
git config --global user_email "YOUR_EMAIL_ADDRESS"</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_fork_and_clone_the_windup_repository">2.2.2. Fork and Clone the Windup Repository</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://github.com/windup/windup/fork">Fork</a> the Windup project. This
creates the <code>windup</code> project in your own Git with the default remote
name 'origin'.</p>
</li>
<li>
<p>Clone your fork. This creates and populates a directory in your
local file system.</p>
<div class="listingblock">
<div class="content">
<pre>git clone https://github.com/&lt;your-username&gt;/windup.git</pre>
</div>
</div>
</li>
<li>
<p>Change to the <code>windup</code> directory.</p>
</li>
<li>
<p>Add the remote <code>upstream</code> repository so you can fetch any changes to
the original forked repository.</p>
<div class="listingblock">
<div class="content">
<pre>git remote add upstream git@github.com:windup/windup.git</pre>
</div>
</div>
</li>
<li>
<p>Get the latest files from the <code>upstream</code> repository.</p>
<div class="listingblock">
<div class="content">
<pre>git fetch upstream</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Build-Windup-from-Source">2.3. Build Windup from Source</h3>
<div class="paragraph">
<p>This information is provided for new developers who plan to contribute code
to the Windup open source project. This section describes how to build Windup from source and how to extract the Windup distribution that is created during the build process.</p>
</div>
<div class="paragraph">
<p>If you use Linux and are an experienced Windup developer looking for a quick refresher, jump to: <a href="#quick-build-review-for-experienced-windup-developers">Quick Build Review for Experienced Windup Developers</a>.</p>
</div>
<div class="sect3">
<h4 id="_system_requirements_to_build_windup">2.3.1. System Requirements to Build Windup</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Java 1.7.</p>
<div class="paragraph">
<p>You can choose from the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>OpenJDK
Oracle Java SE</pre>
</div>
</div>
</li>
<li>
<p>Maven 3.1.1 or newer</p>
<div class="paragraph">
<p>If you have not yet installed or configured Maven, see
<a href="#Install-and-Configure-Maven">Install and Configure Maven</a> for details.</p>
</div>
<div class="paragraph">
<p>If you have installed Maven, you can check the version by typing the
following in a command prompt:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mvn --version</pre>
</div>
</div>
</li>
<li>
<p>IDE requirements</p>
<div class="paragraph">
<p>If you prefer, you can work within an IDE. The following IDEs are recommended.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.jboss.org/products/devstudio/download/">Red Hat JBoss
Developer Studio 7.1.1</a> or newer</p>
</li>
<li>
<p><a href="https://www.eclipse.org/downloads/">Eclipse 4.3 (Kepler)</a> or newer</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You must also make sure the IDE embeds Maven 3.1.1 or later. See
<a href="#Install-and-Configure-Maven">Install and Configure Maven</a> for details.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_build_windup_using_maven_command_line">2.3.2. Build Windup Using Maven Command Line</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure you have configured Maven as described here:
<a href="#Install-and-Configure-Maven">Install and Configure Maven</a>.</p>
</li>
<li>
<p>Check out Windup source code: <code>git clone <a href="mailto:git@github.com">git@github.com</a>:windup/windup.git Windup</code>. See <a href="#Dev-Get-the-Windup-Source-Code">Get the Windup Source Code</a> for more info.</p>
</li>
<li>
<p>Open a command terminal and navigate to the root of the Windup project directory.</p>
<div class="listingblock">
<div class="content">
<pre>    cd Windup/</pre>
</div>
</div>
</li>
<li>
<p>To create a branch and build Windup using the latest version of the source code:</p>
<div class="ulist">
<ul>
<li>
<p>Fetch the latest source code from the upstream repository.</p>
<div class="listingblock">
<div class="content">
<pre>git fetch upstream</pre>
</div>
</div>
</li>
<li>
<p>Checkout a local copy of the branch.</p>
<div class="listingblock">
<div class="content">
<pre>git checkout -b BRANCH_NAME upstream/master</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>If, at any point, you want to toss your changes and reset your local branch to the contents of the upstream repository, issue the following 2 commands. Do NOT do this if you have made changes that you don&#8217;t want to lose!</p>
<div class="listingblock">
<div class="content">
<pre>git fetch upstream</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>git reset --hard upstream/master</pre>
</div>
</div>
</li>
<li>
<p>Build the project.</p>
<div class="listingblock">
<div class="content">
<pre>mvn clean install</pre>
</div>
</div>
<div class="paragraph">
<p>You can also build the project without the tests.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mvn clean install -DskipTests</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_build_windup_using_red_hat_jboss_developer_studio_or_eclipse">2.3.3. Build Windup Using Red Hat JBoss Developer Studio or Eclipse</h4>
<div class="paragraph">
<p>If you prefer, you can use an IDE to build Windup.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Make sure you have configured the Maven installation in your IDE as
described here:
<a href="https://github.com/windup/windup/wiki/Install-and-Configure-Maven">Install
and Configure Maven</a>.</p>
</li>
<li>
<p>Start JBoss Developer Studio or Eclipse.</p>
</li>
<li>
<p>From the menu, select <code>File</code> → <code>Import</code>.</p>
</li>
<li>
<p>In the selection list, choose <code>Maven</code> → <code>Existing Maven Projects</code>,
then click Next.</p>
</li>
<li>
<p>Click <code>Browse</code> and navigate to the root of the Windup
project directory, then click <code>OK</code>.</p>
</li>
<li>
<p>After all projects are listed, click <code>Next</code>. Ignore any Maven build
or dependency errors and click <code>Finish</code>. If you get a dialog titled
<em>Incomplete Maven Goal Execution</em>, ignore it and click <code>OK</code> to continue.</p>
</li>
<li>
<p>In the Project Explorer tab, find the <code>windup_parent</code> project in the
list, right-click, and choose <code>Run As</code> -&#8594; <code>Maven install</code>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_extract_the_windup_distribution_source_file">2.3.4. Extract the Windup Distribution Source File</h4>
<div class="paragraph">
<p>The build process creates a <code>windup-distribution-2.0.0-SNAPSHOT-offline.zip file</code> in the Windup source <code>dist/target/</code> directory.</p>
</div>
<div class="paragraph">
<p>Unzip the <code>dist/target/windup-distribution-2.0.0-SNAPSHOT-offline.zip</code> file into a directory of your choice.</p>
</div>
</div>
<div class="sect3">
<h4 id="quick-build-review-for-experienced-windup-developers">2.3.5. Quick Build Review for Experienced Windup Developers</h4>
<div class="listingblock">
<div class="content">
<pre>git clone git@github.com:windup/windup.git windup
## Or if you haven't set up github account:
#git clone https://github.com/windup/windup.git
cd windup
mvn clean install -DskipTests
rm -rf /tmp/windup-zip/ /tmp/windup/
unzip -q dist/target/windup-distribution-*-offline.zip -d /tmp/windup-zip
mv /tmp/windup-zip/windup-distribution-* /tmp/windup</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Execute-Windup-Built-from-Source">2.4. Execute Windup (Built from Windup Source)</h3>
<div class="paragraph">
<p>These instructions are for Windup core developers who plan to build Windup from source to test code updates.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you are new to the project and not familiar with the procedures to execute Windup, see <a href="#Execute-Windup">Execute Windup</a>. It contains complete step-by-step instructions to execute Windup and also provides command line examples.</p>
</li>
<li>
<p>Experienced users who need a refresher can follow the steps below.</p>
<div class="listingblock">
<div class="content">
<pre>mkdir tmp
cd tmp
unzip -q ../dist/target/windup-*.zip
cd windup-*
rm -rf ~/.forge/addons/
bin/windup.sh

## Execute Windup
$ windup-migrate-app --input /home/username/work/Migration/TestApps/_apps/BradApp --output Report --packages org com net

## Exit Windup
$ exit

## View the Report
firefox Report/index.html</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="Execute-Windup">2.5. Execute Windup</h3>
<div class="sect3">
<h4 id="_prerequisites">2.5.1. Prerequisites</h4>
<div class="paragraph">
<p>Before you begin, you must gather the following information.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The fully qualified path of the application archive or folder you plan to migrate.</p>
</li>
<li>
<p>The fully qualified path to a folder that will contain the resulting report information.</p>
<div class="ulist">
<ul>
<li>
<p>If the folder does not exist, it is created by Windup.</p>
</li>
<li>
<p>If the folder exists, you are prompted with the message:</p>
<div class="literalblock">
<div class="content">
<pre>Overwrite all contents of &lt;OUTPUT_DIRECTORY&gt; (anything already in the directory will be deleted)? [y/N]</pre>
</div>
</div>
<div class="paragraph">
<p>Choose "y" if you want Windup to delete and recreate the directory.</p>
</div>
</li>
<li>
<p>If you are confident you want to overwrite the output directory, you can specify <code>--overwrite</code> on the command line to automatically delete and recreate the directory.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Be careful not to specify a directory that contains important information!
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>You must also provide a list of the application packages to be evaluated.</p>
<div class="ulist">
<ul>
<li>
<p>In most cases, you are interested only in evaluating the custom application class packages and not the standard Java EE or 3rd party packages. For example, if the <em>MyCustomApp</em> application uses the package <code>com.mycustomapp</code>, you provide that package using the <code>--packages</code> argument on the command line. It is not necessary to provide the standard Java EE packages, like <code>java.util</code> or <code>javax.ejb</code>.</p>
</li>
<li>
<p>While you can provide package names for standard Java EE 3rd party software like <code>org.apache</code>, it is usually best not to include them as they should not impact the migration effort.</p>
</li>
<li>
<p>If you omit the <code>--packages</code> argument, every package in the application is scanned, resulting in very slow performance. It is best to provide the argument with one or more packages.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_start_windup">2.5.2. Start Windup</h4>
<div class="paragraph">
<p>For information about the use of WINDUP_HOME in the instructions below, see <a href="#About-the-WINDUP_HOME-Variable">About the WINDUP_HOME Variable</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a terminal and navigate to the <code>WINDUP_HOME/bin</code> directory</p>
</li>
<li>
<p>Type the following command to start Windup:</p>
<div class="listingblock">
<div class="content">
<pre>For Linux:    WINDUP_HOME/bin $ ./windup
For Windows:  C:\WINDUP_HOME\bin&gt; windup</pre>
</div>
</div>
</li>
<li>
<p>You are presented with the following prompt.</p>
<div class="listingblock">
<div class="content">
<pre>Using Windup at WINDUP_HOME

 _       ___           __
| |     / (_)___  ____/ /_  ______
| | /| / / / __ \/ __  / / / / __ \
| |/ |/ / / / / / /_/ / /_/ / /_/ /
|__/|__/_/_/ /_/\__,_/\__,_/ .___/
                          /_/

JBoss Windup, version [ 2.0.0-VERSION ] - JBoss, by Red Hat, Inc. [ http://windup.jboss.org ]

[windup-distribution-2.0.0-VERSION]$</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_run_windup">2.5.3. Run Windup</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The command to run Windup is <code>windup-migrate-app</code>.</p>
</li>
<li>
<p>This command can take arbitrary options processed by different addons. The list of options in the core Windup distribution can be found in <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/ConfigurationOption.html">Javadoc</a>. Most commonly used command line arguments are:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">--input <strong>INPUT_ARCHIVE_OR_FOLDER</strong></dt>
<dd>
<p>This is the fully qualified application archive or source path.</p>
</dd>
<dt class="hdlist1">--output <strong>OUTPUT_REPORT_DIRECTORY</strong></dt>
<dd>
<p>The fully qualified path to the folder that will contain the the report information produced by Windup.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If the <strong>OUTPUT_REPORT_DIRECTORY</strong> directory exists and you do not specify the <code>--overwrite</code> argument, you are prompted to overwrite the contents. If you respond "y", it is deleted and recreated by Windup, so be careful not to specify an output directory that contains important information!
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">--overwrite (optional)</dt>
<dd>
<p>Specify this optional argument only if you are certain you want to force Windup to delete the existing <strong>OUTPUT_REPORT_DIRECTORY</strong>. The default value is <code>false</code>.</p>
</dd>
<dt class="hdlist1">--userRulesDirectory</dt>
<dd>
<p>Points to a directory to load XML rules from. (Search pattern: *.windup.groovy and *.windup.xml)</p>
</dd>
<dt class="hdlist1">--packages <strong>PACKAGE_1</strong>, <strong>PACKAGE_2</strong>, <strong>PACKAGE_N</strong> (optional)</dt>
<dd>
<p>This is a comma-delimited list of the packages to be evaluated by Windup.</p>
</dd>
<dt class="hdlist1">--excludePackages <strong>PACKAGE_1</strong>, <strong>PACKAGE_2</strong>, <strong>PACKAGE_N</strong> (optional)</dt>
<dd>
<p>This is a comma-delimited list of the packages to be excluded by Windup.</p>
</dd>
<dt class="hdlist1">--source-mode true (optional)</dt>
<dd>
<p>This argument is optional and is only required if the application to be evaluated contains source files rather than compiled binaries. The default value is <code>false</code>.</p>
</dd>
</dl>
</div>
</li>
<li>
<p>To evaluate an application archive, use the following syntax:</p>
<div class="listingblock">
<div class="content">
<pre>windup-migrate-app --input INPUT_ARCHIVE_OR_FOLDER --output OUTPUT_REPORT_DIRECTORY --packages PACKAGE_1 PACKAGE_2 PACKAGE_N</pre>
</div>
</div>
<div class="paragraph">
<p>To run Windup against application source code, you must add the <code>--sourceMode true</code> argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>windup-migrate-app --sourceMode true --input INPUT_ARCHIVE_OR_FOLDER --output OUTPUT_REPORT_DIRECTORY --packages PACKAGE_1 PACKAGE_2 PACKAGE_N</pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#windup-command-examples">Windup Command Examples</a> below for concrete examples of commands that use source code directories and archives located in the Windup GitHub repository.</p>
</div>
</li>
<li>
<p>You should see the following result upon completion of the command:</p>
<div class="listingblock">
<div class="content">
<pre>***SUCCESS*** Windup execution successful!</pre>
</div>
</div>
</li>
<li>
<p>To exit Windup, type:</p>
<div class="listingblock">
<div class="content">
<pre>exit</pre>
</div>
</div>
</li>
<li>
<p>Open the <code>OUTPUT_REPORT_DIRECTORY/index.html</code> file in a browser to access the report.
The following subdirectories in the <code>OUTPUT_REPORT_DIRECTORY</code> contain the supporting information for the report:</p>
<div class="literalblock">
<div class="content">
<pre>OUTPUT_REPORT_DIRECTORY/
    graph/
    renderedGraph/
    reports/
    stats/
    index.html</pre>
</div>
</div>
</li>
<li>
<p>For details on how to evaluate the report data, see <a href="#Review-the-Report">Review the Report</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_run_windup_in_batch_mode">2.5.4. Run Windup in Batch Mode</h4>
<div class="paragraph">
<p>Windup can be also executed in batch mode within a shell or batch script using the <code>--evaluate</code> argument as follows.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a terminal and navigate to the WINDUP_HOME directory.</p>
</li>
<li>
<p>Type the following command to run Windup in batch mode:</p>
<div class="listingblock">
<div class="content">
<pre>For Linux:     $ bin/windup --evaluate "windup-migrate-app --input INPUT_ARCHIVE --output OUTPUT_REPORT --packages PACKAGE_1 PACKAGE_2 PACKAGE_N"
For Windows:   &gt; bin\windup.bat --evaluate "windup-migrate-app --input INPUT_ARCHIVE --output OUTPUT_REPORT --packages PACKAGE_1 PACKAGE_2 PACKAGE_N"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_windup_help">2.5.5. Windup Help</h4>
<div class="paragraph">
<p>To see the complete list of available arguments for the <code>windup-migrate-app</code> command, execute the following command in the Windup prompt:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>man windup-migrate-app</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="windup-command-examples">2.5.6. Windup Command Examples</h4>
<div class="paragraph">
<p>The following Windup command examples report against applications located in the Windup source <a href="https://github.com/windup/windup/tree/master/test-files">test-files</a> directory.</p>
</div>
<div class="sect4">
<h5 id="_source_code_example">Source Code Example</h5>
<div class="paragraph">
<p>The following command runs against the <a href="https://github.com/windup/windup/tree/master/test-files/seam-booking-5.2">seam-booking-5.2</a> application source code. It evaluates all <code>org.jboss.seam</code> packages and creates a folder named 'seam-booking-report' in the <code>/home/username/windup-reports/</code> directory to contain the reporting output.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>windup-migrate-app --sourceMode true --input /home/username/windup-source/test-files/seam-booking-5.2/ --output /home/username/windup-reports/seam-booking-report --packages org.jboss.seam</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_archive_example">Archive Example</h5>
<div class="paragraph">
<p>The following command runs against the <a href="https://github.com/windup/windup/blob/master/test-files/jee-example-app-1.0.0.ear">jee-example-app-1.0.0.ear</a> EAR archive. It evaluates all <code>com.acme</code> and <code>org.apache</code> packages and creates a folder named 'jee-example-app-1.0.0.ear-report' in the <code>/home/username/windup-reports/</code> directory to contain the reporting output.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>windup-migrate-app --input /home/username/windup-source/test-files/jee-example-app-1.0.0.ear/ --output /home/username/windup-reports/jee-example-app-1.0.0.ear-report --packages com.acme org.apache</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_windup_batch_example">Windup Batch Example</h5>
<div class="paragraph">
<p>The following Windup batch command runs against the <a href="https://github.com/windup/windup/blob/master/test-files/jee-example-app-1.0.0.ear">jee-example-app-1.0.0.ear</a> EAR archive. It evaluates all <code>com.acme</code> and <code>org.apache</code> packages and creates a folder named 'jee-example-app-1.0.0.ear-report' in the <code>/home/username/windup-reports/</code> directory to contain the reporting output.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>For Linux: $ bin/windup --evaluate "windup-migrate-app --input /home/username/windup-source/test-files/jee-example-app-1.0.0.ear/ --output /home/username/windup-reports/jee-example-app-1.0.0.ear-report --packages com.acme org.apache"
For Windows: &gt; bin\windup.bat --evaluate "windup-migrate-app --input \windup-source\test-files\jee-example-app-1.0.0.ear --output \windup-reports\jee-example-app-1.0.0.ear-report --packages com.acme org.apache</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_windup_quickstart_examples">Windup Quickstart Examples</h5>
<div class="paragraph">
<p>For more concrete examples, see the Windup quickstarts located on GitHub here: <a href="https://github.com/windup/windup-quickstarts" class="bare">https://github.com/windup/windup-quickstarts</a>. If you prefer, you can download the <a href="https://github.com/windup/windup-quickstarts/releases/tag/2.0.0.Alpha1">2.0.0.Alpha1 release</a> ZIP or TAR  distribution of the quickstarts.</p>
</div>
<div class="paragraph">
<p>The quickstarts provide examples of Java-based and XML-based rules you can run and test using Windup. The README instructions provide a step-by-step guide to run the quickstart example. You can also look through the code examples and use them as a starting point for creating your own rules.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Review-the-Report">2.6. Review the Report</h3>
<div class="sect3">
<h4 id="_about_the_report">2.6.1. About the Report</h4>
<div class="paragraph">
<p>When you execute Windup, the report is generated in the <code>OUTPUT_REPORT_DIRECTORY</code> you specify for the <code>--output</code> argument in the command line. This output directory contains the following files and subdirectories:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>index.html</code>: This is the landing page for the report.</p>
</li>
<li>
<p><code>archives/</code>: Contains the archives extracted from the application</p>
</li>
<li>
<p><code>graph/</code>: Contains binary graph database files</p>
</li>
<li>
<p><code>reports/</code>: This directory contains the generated HTML report files</p>
</li>
<li>
<p><code>stats/</code>: Contains Windup performance statistics</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The examples below use the <a href="https://github.com/windup/windup/blob/master/test-files/jee-example-app-1.0.0.ear">test-files/jee-example-app-1.0.0.ear</a> located in the Windup GitHub source repository for input and specify the <code>com.acme</code> and <code>org.apache</code> package name prefixes to scan. For example:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>windup-migrate-app --input /home/username/windup-source/test-files/jee-example-app-1.0.0.ear/ --output /home/username/windup-reports/jee-example-app-1.0.0.ear-report --packages com.acme org.apache</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_open_the_report">2.6.2. Open the Report</h4>
<div class="paragraph">
<p>Use your favorite browser to open the <code>index.html</code> file located in the output report directory. You should see something like the following:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/report-index-page.png" alt="Report Index Page" width="500"></span></p>
</div>
<div class="paragraph">
<p>Click on the link under the <strong>Name</strong> column to view the Windup application report page.</p>
</div>
</div>
<div class="sect3">
<h4 id="_report_sections">2.6.3. Report Sections</h4>
<div class="sect4">
<h5 id="_application_report_page">Application Report Page</h5>
<div class="paragraph">
<p>The first section of the application report page summarizes the migration effort. It provides the total <em>Story Points</em> and a graphically displays the effort by technology. A <em>Story Point</em> is a term commonly used in Scrum Agile software development methodology to estimate the level of effort needed to implement a feature or change. It does not necessarily translate to man-hours, but the value should be consistent across tasks.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The migration of the <strong>JEE Example App</strong> EAR is assigned a total of 42 story points. A pie chart shows the breakdown of story points by package.</p>
</li>
<li>
<p>This is followed by a section for each of the archives contained in the EAR. It provides the total of the story points assigned to the archive and lists the files contained in archive along with the warnings and story point assigned to each file.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following is an example of a Windup Application Report.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/report-javaee-ear-summary.png" alt="Report Summary Page" width="500"></span></p>
</div>
</div>
<div class="sect4">
<h5 id="_archive_analysis_sections">Archive Analysis Sections</h5>
<div class="paragraph">
<p>Each archive summary begins with a total of the story points assigned to its migration, followed by a table detailing the changes required for each file in the archive. The report contains the following columns.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Name</dt>
<dd>
<p>The name of the file being analyzed</p>
</dd>
<dt class="hdlist1">Technology</dt>
<dd>
<p>The type of file being analyzed. For example:</p>
<div class="ulist">
<ul>
<li>
<p>Java Source</p>
</li>
<li>
<p>Decompiled Java File</p>
</li>
<li>
<p>Manifest</p>
</li>
<li>
<p>Properties</p>
</li>
<li>
<p>EJB XML</p>
</li>
<li>
<p>Spring XML</p>
</li>
<li>
<p>Web XML</p>
</li>
<li>
<p>Hibernate Cfg</p>
</li>
<li>
<p>Hibernate Mapping</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Issues</dt>
<dd>
<p>Warnings about areas of code that need review or changes.</p>
</dd>
<dt class="hdlist1">Estimated Story Points</dt>
<dd>
<p>Level of effort required for migrating the file.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The following is an example of the archive analysis summary section of a Windup Report. In this example, it&#8217;s the analysis of the <code>WINDUP_SOURCE/test-files/jee-example-app-1.0.0.ear/jee-example-services.jar</code>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/report-javaee-ear-03-services-jar.png" alt="Report Archive Page" width="500"></span></p>
</div>
</div>
<div class="sect4">
<h5 id="_file_analysis_pages">File Analysis Pages</h5>
<div class="paragraph">
<p>The analysis of the <code>jee-example-services.jar</code> lists the files in the JAR and the warnings and story points assigned to each one. Notice the <code>com.acme.anvil.listener.AnvilWebLifecycleListener</code> file has 5 warnings and is assigned 7 story points. Click on the file to see the detail.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <strong>Information</strong> section provides a summary of the story points and notes that the file was decompiled by Windup.</p>
</li>
<li>
<p>This is followed by the file source code listing. Warnings appear in the file at the point where  migration is required.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this example, warnings appear at the import of <code>weblogic.application.ApplicationLifecycleEvent</code> and report that the class is proprietary to WebLogic and must be removed.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/report-javaee-ear-file-detail-part1.png" alt="File Detail - Part 1" width="500"></span></p>
</div>
<div class="paragraph">
<p>Later in the code, warnings appear for the creation of the InitialContext and for the object name when registering and unregistering an MBeans</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/report-javaee-ear-file-detail-part2.png" alt="File Detail - Part 2" width="500"></span></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_additional_reports">2.6.4. Additional Reports</h4>
<div class="paragraph">
<p>Explore the Windup <code>OUTPUT_REPORT_DIRECTORY/reports</code> folder to find additional reporting information.</p>
</div>
<div class="sect4">
<h5 id="_rule_provider_execution_report">Rule Provider Execution Report</h5>
<div class="paragraph">
<p>The <code>OUTPUT_REPORT_DIRECTORY/reports/windup_ruleproviders.html</code> page provides the list of rule providers that executed when running the Windup migration command against the application.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/report-javaee-ear-ruleprovider.png" alt="RuleProvider Report" width="500"></span></p>
</div>
</div>
<div class="sect4">
<h5 id="_rule_provider_execution_report_2">Rule Provider Execution Report</h5>
<div class="paragraph">
<p>The <code>OUTPUT_REPORT_DIRECTORY/reports/windup_ruleproviders.html</code> page provides the list of rule providers that executed when running the Windup migration command against the application.</p>
</div>
</div>
<div class="sect4">
<h5 id="_individual_file_analysis_reports">Individual File Analysis Reports</h5>
<div class="paragraph">
<p>You can directly access the the file analysis report pages described above by browsing for them by name in the <code>OUTPUT_REPORT_DIRECTORY/reports/</code> directory. Because the same common file names can exist in multiple archives, for example "manifest.mf" or "web.xml", Windup adds a unique numeric suffix to each report file name.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/report-directory-file-list.png" alt="Report Directory File List" width="500"></span></p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_developer_contributing_information">3. Developer Contributing Information</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Dev-Development-Guidelines-and-Conventions">3.1. Development Guidelines and Conventions</h3>
<div class="ulist">
<ul>
<li>
<p><a href="#project-source-code-formatting">Project Source Code Formatting</a></p>
</li>
<li>
<p><a href="#source-code-naming-conventions">Source Code Naming Conventions</a></p>
</li>
<li>
<p><a href="#maven-project-naming-conventions">Maven Project Naming Conventions</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="project-source-code-formatting">3.1.1. Project Source Code Formatting</h4>
<div class="paragraph">
<p>All project source code contributed to Windup should be formatted using the settings defined in the <code>Eclipse_Code_Format_Profile.xml</code> file located in the root directory of the Windup project.</p>
</div>
<div class="sect4">
<h5 id="_eclipse_ide">Eclipse IDE</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Eclipse, choose Windows &#8594; Preferences.</p>
</li>
<li>
<p>Expand Java &#8594; Code Style &#8594; Formatter</p>
</li>
<li>
<p>Click Import</p>
</li>
<li>
<p>Browse to the <code>Eclipse_Code_Format_Profile.xml</code> located in the root of the Windup project directory, then click 'OK'.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_netbeans_ide">Netbeans IDE</h5>
<div class="paragraph">
<p>Use this file to format Windup source code:</p>
</div>
<div class="paragraph">
<p><a href="http://plugins.netbeans.org/plugin/50877/eclipse-code-formatter-for-java">http://plugins.netbeans.org/plugin/50877/eclipse-code-formatter-for-java</a></p>
</div>
</div>
<div class="sect4">
<h5 id="_intellij_idea">IntelliJ IDEA</h5>
<div class="paragraph">
<p>Use this file to format Windup source code:</p>
</div>
<div class="paragraph">
<p><a href="http://plugins.jetbrains.com/plugin/?id=6546">http://plugins.jetbrains.com/plugin/?id=6546</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="source-code-naming-conventions">3.1.2. Source Code Naming Conventions</h4>
<div class="sect4">
<h5 id="_class_interface_and_implementation_names">Class Interface and Implementation Names</h5>
<div class="ulist">
<ul>
<li>
<p>Do not name interfaces using the prefix 'I' for interface names. Instead, use a descriptive term for the interface, like <code>Module.java</code>.</p>
</li>
<li>
<p>The implementation class name should begin with a descriptive name, followed by the interface name, for example, for example <code>JavaHandlerModule.java</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_standard_prefixes_and_suffixes">Standard Prefixes and Suffixes</h5>
<div class="ulist">
<ul>
<li>
<p>Append all RuleProvider class names with <code>RuleProvider</code>.</p>
</li>
<li>
<p>Append all XML rule file names with <code>.windup.xml</code></p>
</li>
<li>
<p>Append all Model class names with <code>Model</code>.</p>
</li>
<li>
<p>All test names should be prefixed with 'Test'.</p>
</li>
<li>
<p>Property constants: TBD</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="maven-project-naming-conventions">3.1.3. Maven Project Naming Conventions</h4>
<div class="sect4">
<h5 id="_maven_module_names">Maven Module Names</h5>
<div class="paragraph">
<p>The following are not really accurate at this time. This is still TBD!</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Lowercase with dashes. Start with <code>windup-</code>.</p>
</li>
<li>
<p>Ruleset add-ons start with <code>windup-rules-</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Submit-Code-Updates-to-the-Windup-Project">3.2. Submit Code Updates to the Windup Project</h3>
<div class="paragraph">
<p>To get the Windup Source Code, see <a href="#Dev-Get-the-Windup-Source-Code">Get the Windup Source Code</a> for instructions.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a command terminal and navigate to the root of the Windup project directory.</p>
</li>
<li>
<p>Create a new topic branch to contain your features, changes, or fixes using the <code>git checkout</code> command:</p>
<div class="listingblock">
<div class="content">
<pre> git checkout -b  &lt;topic-branch-name&gt; upstream/master</pre>
</div>
</div>
<div class="paragraph">
<p>If you are fixing a JIRA, it is a good practice to use the number in the
branch name. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>git checkout -b WINDUP-225 upstream/master</pre>
</div>
</div>
</li>
<li>
<p>Make changes or updates to the source files. Be sure to test the changes thoroughly!</p>
</li>
<li>
<p>When you are sure your updates are ready and working, use the <code>git add</code> command to add new or changed file contents to the
staging area.</p>
<div class="listingblock">
<div class="content">
<pre>git add &lt;folder-name&gt;/
git add &lt;file-name&gt;</pre>
</div>
</div>
</li>
<li>
<p>Use the <code>git status</code> command to view the status of the files in the
directory and in the staging area and ensure that all modified files are
properly staged:</p>
<div class="listingblock">
<div class="content">
<pre>git status</pre>
</div>
</div>
</li>
<li>
<p>Commit your changes to your local topic branch. For example:</p>
<div class="listingblock">
<div class="content">
<pre>git commit -m 'WINDUP-225: Description of change...'</pre>
</div>
</div>
</li>
<li>
<p>Push your local topic branch to your GitHub forked repository. This
will create a branch on your GitHub fork repository with the same name as
your local topic branch name.</p>
<div class="listingblock">
<div class="content">
<pre>git push origin HEAD</pre>
</div>
</div>
<div class="paragraph">
<p><em>Note: The above command assumes your remote repository is named
'origin'. You can verify your forked remote repository name using the
command `git remote -v`</em>.</p>
</div>
</li>
<li>
<p>Browse to the newly created branch on your forked GitHub repository.</p>
<div class="listingblock">
<div class="content">
<pre>https://github.com/&lt;your-username&gt;/windup/tree/&lt;topic-branch-name&gt;</pre>
</div>
</div>
</li>
<li>
<p>Open a Pull Request. For details, see
<a href="https://help.github.com/articles/using-pull-requests">Using Pull
Requests</a>.</p>
<div class="ulist">
<ul>
<li>
<p>Give the pull request a clear title and description.</p>
</li>
<li>
<p>Review the modifications that are to be submitted in the pull to be sure it contains
only the changes you expect.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The pull request will be reviewed and merged by a Windup project administrator.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_understand_the_windup_architecture_and_structure">4. Understand the Windup Architecture and Structure</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Windup-Architectural-Components">4.1. Windup Architectural Components</h3>
<div class="paragraph">
<p>The following open source software, tools, and APIs are used within
Windup to analyze and provide migration information. If you plan to
contribute source code to the core Windup 2.0 project, you should be
familiar with them.</p>
</div>
<div class="sect3">
<h4 id="_forge">4.1.1. Forge</h4>
<div class="paragraph">
<p>Forge is an open source, extendable, rapid application development tool
for creating Java EE applications using Maven. For more information
about Forge 2, see: <a href="http://forge.jboss.org/">JBoss Forge</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_forge_furnace">4.1.2. Forge Furnace</h4>
<div class="paragraph">
<p>Forge Furnace is a modular runtime container behind Forge that provides
the ability to run Forge add-ons in an embedded application. For more
information about Forge Furnace, see:
<a href="http://forge.jboss.org/document/run-forge-embedded">Run Forge Embedded</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_tinkerpop">4.1.3. TinkerPop</h4>
<div class="paragraph">
<p>TinkerPop is an open source graph computing framework. For more
information, see: <a href="http://www.tinkerpop.com/">TinkerPop</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_titan">4.1.4. Titan</h4>
<div class="paragraph">
<p>Titan is a scalable graph database optimized for storing and querying graphs.
For more information, see: <a href="http://thinkaurelius.github.io/titan/">Titan Distributed Graph Database</a> and <a href="https://github.com/thinkaurelius/titan/wiki/Beginner%27s-Guide">Titan Beginner&#8217;s Guide</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_frames">4.1.5. Frames</h4>
<div class="paragraph">
<p>Frames represents graph data in the form of interrelated Java Objects or
a collection of annotated Java Interfaces. For more information, see:
<a href="https://github.com/tinkerpop/frames/wiki">TinkerPop Frames</a>.</p>
</div>
<div class="paragraph">
<p>Windup includes several Frames extensions, which are documented here:
<a href="#Dev-Frames-extensions">Frames Extensions</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_gremlin">4.1.6. Gremlin</h4>
<div class="paragraph">
<p>Gremlin is a graph traversal language that allows you to query, analyze,
and manipulate property graphs that implement the Blueprints property
graph data model. For more information, see:
<a href="https://github.com/tinkerpop/gremlin/wiki">TinkerPop Gremlin Wiki</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_blueprints">4.1.7. Blueprints</h4>
<div class="paragraph">
<p>Blueprints is an industry standard API used to access graph databases.
For more information about Blueprints, see:
<a href="https://github.com/tinkerpop/blueprints/wiki">TinkerPop Blueprints Wiki</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_pipes">4.1.8. Pipes</h4>
<div class="paragraph">
<p>Pipes is a dataflow framework used to process graph data. It for the
transformation of data from input to output. For more information, see:
<a href="https://github.com/tinkerpop/pipes/wiki">Tinkerpop Pipes Wiki</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_rexster">4.1.9. Rexster</h4>
<div class="paragraph">
<p>Rexster is a graph server that exposes any Blueprints graph through HTTP/REST and a binary protocol called RexPro. Rexster makes extensive use of Blueprints, Pipes, and Gremlin. For more information, see:
<a href="https://github.com/tinkerpop/rexster/wiki">TinkerPop Rexster Wiki</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ocpsoft_rewrite">4.1.10. OCPsoft Rewrite</h4>
<div class="paragraph">
<p>OCPsoft Rewrite is an open source routing and URL rewriting solution for
Servlets, Java Web Frameworks, and Java EE. For more information about
Ocpsoft Rewrite, see: <a href="http://ocpsoft.org/rewrite/">OCPsoft Rewrite</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Windup-Project-Structure">4.2. Windup Project Structure</h3>
<div class="paragraph">
<p>The Windup 2.0 project consists of the following subprojects.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">config/</dt>
<dd>
<p>This project is for the engine that runs the rules and abstracts the graph operations.</p>
</dd>
<dt class="hdlist1">decompiler/</dt>
<dd>
<p>This subproject contains an API that wraps calls to the decompiler.
Windup currently uses only one decompiler: <em>Procyon</em></p>
</dd>
<dt class="hdlist1">exec/</dt>
<dd>
<p>This subproject contains the bootstrap code to run the Windup application.</p>
</dd>
<dt class="hdlist1">ext/</dt>
<dd>
<p>This subproject is for code extensions. It currently only contains the
Groovy rules syntax. Eventually it will contain any code that is not
related to the rules or the core code base.</p>
</dd>
<dt class="hdlist1">graph/</dt>
<dd>
<p>This subproject contains the datastore and Frames extensions.</p>
</dd>
<dt class="hdlist1">logging/</dt>
<dd>
<p>This is the logging subproject. This subproject may be removed, depending on the outcome of this JIRA: <a href="https://issues.jboss.org/browse/WINDUP-49">WINDUP-49</a>.</p>
</dd>
<dt class="hdlist1">reporting/</dt>
<dd>
<p>This subproject contains code that does reporting.</p>
</dd>
<dt class="hdlist1">rules/</dt>
<dd>
<p>This subproject contains all the rules.</p>
</dd>
<dt class="hdlist1">test-files/</dt>
<dd>
<p>This subproject contains the demo applications that are used for test input.</p>
</dd>
<dt class="hdlist1">tests/</dt>
<dd>
<p>This subproject contains the integration test suite.</p>
</dd>
<dt class="hdlist1">tinkerpop/</dt>
<dd>
<p>This subproject contains a code fix for Titan NPE issues.</p>
</dd>
<dt class="hdlist1">ui/</dt>
<dd>
<p>This subproject contains experimental Forge UI code.</p>
</dd>
<dt class="hdlist1">utils/</dt>
<dd>
<p>This subproject contains all utility code.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rules_and_rulesets">5. Rules and Rulesets</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Windup-Processing-Overview">5.1. Windup Processing Overview</h3>
<div class="paragraph">
<p>Windup is a rule-based migration tool that allows you to write customized rules to analyze the APIs, technologies, and architectures used by the applications you plan to migrate. The Windup tool also executes its own core rules through all phases of the migration process.</p>
</div>
<div class="paragraph">
<p>The following is a high level conceptual overview of what happens within Windup when you execute the tool against your application or archive.</p>
</div>
<div class="sect3">
<h4 id="_discovery_phase">5.1.1. Discovery Phase</h4>
<div class="paragraph">
<p>Wnen you run the <code>windup-migrate-app</code> command, Windup executes its own core rules to extract files from archives, decompile classes, and analyze the application. In this phase Windup builds a data model and stores component data and relationships in a graph database, which can then be queried and updated as needed by the migration rules and for reporting purposes.</p>
</div>
<div class="paragraph">
<p>For more information about the phases of rule execution and how to control rule dependencies, see <a href="#Rules-Rule-Execution-Lifecycle">Rule Execution Lifecycle</a>.</p>
</div>
<div class="paragraph">
<p>For more information about the graph database components, see <a href="#Windup-Architectural-Components">Windup Architectural Components</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_application_migration">5.1.2. Application Migration</h4>
<div class="paragraph">
<p>The next step in the process is the execution of the migration rules. In this phase, the rules typically do not execute against the application input files. Instead, they execute against the graph database model. Windup rules are independent and decoupled and they communicate with each other using the graph database model. Rules query the graph database to obtain information needed to test the rule condition. They also update the data model with information based on the result of the rule execution. This allows rules to easily interact with other rules and enables the creation of very complex rules.</p>
</div>
<div class="paragraph">
<p>The Windup distribution contains a large number of migration rules, but in some cases, you may need to create additional custom rules for your specific implementation. Windup&#8217;s architecture allows you to create Java-based rule addons or XML rules and add easily add them to Windup. Custom rule creation is covered in the <em>Windup Rules Development Guide</em>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_generate_findings_based_on_the_rule_execution_results">5.1.3. Generate Findings Based on the Rule Execution Results</h4>
<div class="paragraph">
<p>The final step in the process is to pull data from the graph database model to generate of reports and optionally generate scripts. Again, Windup uses rules to generate the final output.</p>
</div>
<div class="paragraph">
<p>By default, Windup generates the following reports at the end of the application migration process. The reports are located in the <code>reports/</code> subdirectory of the output report path specified when you execute Windup:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Application Report: This report provides a summary of the total estimated effort, or <a href="#Rules-Rule-Story-Points">story points</a>, that are required for the migration. It also provides a detailed list of issues and suggested changes, broken down by archive or folder.</p>
</li>
<li>
<p>RuleProvider report: This is a detailed listing of the rule providers that fired when running Windup and whether any errors occurred.</p>
</li>
<li>
<p>Additional reports are generated that provide detailed line-by-line migration tips for individual files.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Windup can also generate scripts to automate migration processes based on the findings. For example, some configuration files are easily mapped and can be automatically generated as part of the migration process.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Rules-Rule-Execution-Lifecycle">5.2. Rule Execution Lifecycle</h3>
<div class="sect3">
<h4 id="_rule_lifecycle">5.2.1. Rule Lifecycle</h4>
<div class="paragraph">
<p>Windup executes each rule in a sequential order. The following
sections describe the phases of rule execution and how rules may specify
that one or more other rules must be executed before or after they are
run.</p>
</div>
<div class="paragraph">
<p>For a graphical overview of rule processing, see
<a href="https://docs.google.com/drawings/d/1IMnds3Qu8Wwcf7_mr7NJ9a3YgtcGJ7dejl09EhWl7Vc/edit">this
diagram</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_rule_phases">5.2.2. Rule Phases</h4>
<div class="listingblock">
<div class="content">
<pre>INFO: Loaded [67] org.jboss.windup.config.WindupRuleProvider [
org.jboss.windup.config.phase.Implicit
org.jboss.windup.config.phase.Initialization
org.jboss.windup.config.phase.Discovery
org.jboss.windup.config.phase.ArchiveExtraction
org.jboss.windup.config.phase.ArchiveMetadataExtraction
org.jboss.windup.config.phase.ClassifyFileTypes
org.jboss.windup.config.phase.DiscoverProjectStructure
org.jboss.windup.config.phase.Decompilation
org.jboss.windup.config.phase.InitialAnalysis
org.jboss.windup.config.phase.MigrationRules
org.jboss.windup.config.phase.PostMigrationRules
org.jboss.windup.config.phase.PreReportGeneration
org.jboss.windup.config.phase.ReportGeneration
org.jboss.windup.config.phase.PostReportGeneration
org.jboss.windup.config.phase.ReportRendering
org.jboss.windup.config.phase.PostReportRendering
org.jboss.windup.config.phase.Finalize
org.jboss.windup.config.phase.PostFinalize
]</pre>
</div>
</div>
<div class="paragraph">
<p>By default, a rule runs during the <a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/config/RulePhase.html#MIGRATION_RULES">MIGRATION_RULES</a> phase. However, a
rule may require certain processing or actions to occur before it
executes, such as the extraction of archives and scanning of java or XML
files.</p>
</div>
<div class="paragraph">
<p>Rule phases provide a way for rule authors to specify and control in
which phase of the rule lifecycle the rule should execute. This is done
by overriding the <code>WindupRuleProvider.getPhase()</code> method. The following
example specifies this rule should execute during the <a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/config/RulePhase.html#INITIAL_ANALYSIS">INITIAL_ANALYSIS</a> rule phase.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Override
public RulePhase getPhase() {
    return InitialAnalysis.class;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following is the list of rule phases as defined in the <code>RulePhase</code>
enum class. Note that there are also <code>PRE_</code> processing and <code>POST_</code>
processing phases for each of the following rule phases.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/config/RulePhase.html#DISCOVERY">DISCOVERY</a></dt>
<dd>
<p>This phase is called during resource discovery. Static files are scanned
by their basic properties, for example, the name, extension, location,
and fully qualified Java class name. Archives are unzipped in this
phase. Typically, any rule that only puts data into the graph is
executed during this phase.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/config/RulePhase.html#INITIAL_ANALYSIS">INITIAL_ANALYSIS</a></dt>
<dd>
<p>This phase is called to perform a basic analysis of the files content.
It extracts all method names from class files, extracts metadata, such
as the XML namespace and root element, from XML files.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/config/RulePhase.html#COMPOSITION">COMPOSITION</a></dt>
<dd>
<p>This phase is called to perform high-level composition operations on the
graph. For example, it may link items found in XML files to the related
Java classes or references to server resources in Java classes.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/config/RulePhase.html#MIGRATION_RULES">MIGRATION_RULES</a></dt>
<dd>
<p>This phase is the default phase for all rules unless overridden.
During this phase, migration rules attach data to the graph associated
with migration. This could include: - Hints to migrators for manual
migration - Automated migration of schemas or source segments -
Blacklists to indicate vendor specific APIs.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/config/RulePhase.html#REPORT_GENERATION">REPORT_GENERATION</a></dt>
<dd>
<p>During this phase, reporting visitors produce report data in the graph
that will later be used by the report rendering phase.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/config/RulePhase.html#REPORT_RENDERING">REPORT_RENDERING</a></dt>
<dd>
<p>This is the phase that renders the report.</p>
</dd>
<dt class="hdlist1"><a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/config/RulePhase.html#FINALIZE">FINALIZE</a></dt>
<dd>
<p>This phase is called to clean up resources and close streams.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For more information about rule phases, see the <a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/config/RulePhase.html">RulePhase Javadoc</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_execute_before_and_execute_after">5.2.3. Execute Before and Execute After</h4>
<div class="paragraph">
<p>A rule may specify that one or more rules must be executed before it is
run. In this case, all named rules will be fired in the order specified
before executing the the current rule.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Override
public List&lt;Class&lt;? extends WindupRuleProvider&gt;&gt; getExecuteBefore()
{
   return asClassList(RuleToFireBefore.class);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A rule may also specify that one or more rules must be executed after it
is run. In this case, all named rules will be fired in the order
specified after executing the the current rule.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Override
public List&lt;Class&lt;? extends WindupRuleProvider&gt;&gt; getExecuteAfter()
{
    return asClassList(RuleToFireAfter.class);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Rules-Rule-Story-Points">5.3. Rule Story Points</h3>
<div class="sect3">
<h4 id="_what_are_story_points">5.3.1. What are Story Points?</h4>
<div class="paragraph">
<p>Story points are an abstract metric commonly used in Scrum Agile software development methodology to estimate the level of effort needed to implement a feature or change. They are based on a <a href="http://scrummethodology.com/scrum-effort-estimation-and-story-points/">modified Fibonacci sequence</a>.</p>
</div>
<div class="paragraph">
<p>In a similar manner, Windup uses story points to express the level of effort needed to migrate particular application constructs, and in a sum, the application as a whole. It does not necessarily translate to man-hours, but the value should be consistent across tasks.</p>
</div>
</div>
<div class="sect3">
<h4 id="_how_story_points_are_estimated_in_rules">5.3.2. How Story Points are Estimated in Rules</h4>
<div class="paragraph">
<p>Estimating story points for a rule can be tricky. The following are the general guidelines Windup uses when estimating the level of effort required for a rule.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Level of Effort</th>
<th class="tableblock halign-left valign-top">Story Points</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lift and Shift</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The code or file is standards-based and requires no effort.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mapped</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1- 2 per file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">There is a standard mapping algorithm to port the code or file. The number of story points required is small, but is dependent on the number of files to port.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5 - 20 per change or component</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The number of story points required to modify and rewrite code depends on the complexity of the change, the number of unknown imports, the size of the files, and the number of components. The following are examples of how to estimate story points.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Port MyBatis to JPA: '20' story points per query.</p>
</li>
<li>
<p>Port a web page from one web framework to another depends on the complexity and the number of components involved in the migration. You could estimate '20' story points per component.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="Rules-Difference-Between-XML-based-and-Java-based-Rules">5.4. Difference Between XML-based and Java-based Rules</h3>
<div class="sect3">
<h4 id="_first_of_all_to_prevent_confusion">5.4.1. First of all, to prevent confusion:</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Rules can be <em>written</em> using XML or the Java API. We call them XML-based and Java-based Rules.</p>
</li>
<li>
<p>Independent of the syntax, the rules may <em>inspect</em> (classify) XML or Java code.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>See the examples below.</p>
</div>
</div>
<div class="sect3">
<h4 id="_which_one_to_choose">5.4.2. Which one to choose?</h4>
<div class="paragraph">
<p>The XML rules provide a quick, simple way to create rules to analyze Java and XML files. Java rules provide the ability to create very complex rules.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you simply need to highlight a specific section of Java code or XML file content and provide hints for it, it is recommended that you create the rule using XML.</p>
</li>
<li>
<p>If you need to create a new custom report, you need to create the reporting rules using Java.</p>
</li>
<li>
<p>If you need to extend functionality beyond what the XML rules provide, you need to create the rule using Java.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pros_and_cons_xml">5.4.3. Pros and cons - XML</h4>
<div class="paragraph">
<p>Pros:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>XML rules are fairly easy to write and require less code.</p>
</li>
<li>
<p>You do not need to configure Maven to build from source because there is no need for compilation of
XML rules.</p>
</li>
<li>
<p>Deployment is simple. You simply drop the XML rule into the appropriate path  and Windup automatically scans the new rule.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>XML rules only support a simple subset of conditions and operations.</p>
</li>
<li>
<p>XML rules do not provide for direct custom graph data manipulation.</p>
</li>
<li>
<p>XML rules do not support the ability to create custom reports.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_pros_and_cons_java">5.4.4. Pros and Cons - Java</h4>
<div class="paragraph">
<p>Pros:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Java rule add-ons allow you to write custom rules and provide a lot of flexibility.</p>
</li>
<li>
<p>You can set breakpoints and test Java rule add-ons using a debugger.</p>
</li>
<li>
<p>IDEs provide code completion for the Windup API.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cons:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You must configure Maven to compile the Windup Java rule add-ons.</p>
</li>
<li>
<p>Java rule add-ons that are not included in the Windup core code base must be a full Forge add-on.</p>
</li>
<li>
<p>Java rule add-ons require writing a lot of Java code/</p>
</li>
<li>
<p>Writing Java rule add-ons are complex and required knowledge of Windup internals.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_examples">5.4.5. Examples</h4>
<div class="paragraph">
<p>Example of a rule written in XML classifying Java code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;?xml version="1.0"?&gt;
&lt;ruleset xmlns="http://windup.jboss.org/v1/xml" id="EjbRules"&gt;
    &lt;rules&gt;
        &lt;rule id="EjbRules_2fmb"&gt;
            &lt;when&gt;
                &lt;javaclass references="javax.persistence.Entity" as="default"&gt;
                    &lt;location&gt;TYPE&lt;/location&gt;
                &lt;/javaclass&gt;
            &lt;/when&gt;
            &lt;perform&gt;
                &lt;iteration&gt;
                    &lt;classification classification="JPA Entity" effort="0"/&gt;
                &lt;/iteration&gt;
            &lt;/perform&gt;
        &lt;/rule&gt;
    &lt;/rules&gt;
&lt;/ruleset&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Example of a rule written in Java classifying Java code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">/**
 * Scans for classes with EJB related annotations, and adds EJB related metadata for these.
 */
public class DiscoverEjbAnnotationsRuleProvider extends WindupRuleProvider
{
    @Override
    public Configuration getConfiguration(GraphContext context) {
        return ConfigurationBuilder.begin()
        .addRule()
        .when(JavaClass.references("javax.ejb.{annotationType}").at(TypeReferenceLocation.ANNOTATION))
        .perform(new AbstractIterationOperation&lt;JavaTypeReferenceModel&gt;()
        {
            public void perform(GraphRewrite event, EvaluationContext context, JavaTypeReferenceModel payload)
            {
                extractEJBMetadata(event, payload);
            };
        })
        .where("annotationType").matches("Stateless|Stateful")
        .withId(ruleIDPrefix + "_StatelessAndStatefulRule")
        .addRule()
        .when(JavaClass.references("javax.ejb.MessageDriven").at(TypeReferenceLocation.ANNOTATION))
        .perform(new AbstractIterationOperation&lt;JavaTypeReferenceModel&gt;() {
            @Override
            public void perform(GraphRewrite event, EvaluationContext context, JavaTypeReferenceModel payload) {
                extractMessageDrivenMetadata(event, payload);
            }
        })
        .withId(ruleIDPrefix + "_MessageDrivenRule")
        .addRule()
        .when(JavaClass.references("javax.persistence.Entity").at(TypeReferenceLocation.ANNOTATION).as(ENTITY_ANNOTATIONS)
                    .or(JavaClass.references("javax.persistence.Table").at(TypeReferenceLocation.ANNOTATION).as(TABLE_ANNOTATIONS_LIST)))
        .perform(Iteration.over(ENTITY_ANNOTATIONS).perform(new AbstractIterationOperation&lt;JavaTypeReferenceModel&gt;() {
            @Override public void perform(GraphRewrite event, EvaluationContext context, JavaTypeReferenceModel payload) {
                extractEntityBeanMetadata(event, payload);
            }
        }).endIteration())
        .withId(ruleIDPrefix + "_EntityBeanRule");
    }
    ...
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_summary">5.4.6. Summary</h4>
<div class="paragraph">
<p>The following is a draft&#8230;&#8203; it may go.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Requirement</th>
<th class="tableblock halign-left valign-top">XML Rule</th>
<th class="tableblock halign-left valign-top">Java Rule Add-on</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Easy to write?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Depends on the complexity of the rule</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requires that you configure Maven?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Requires that you compile the rule?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Simple deployment?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Supports custom reports?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ability to create complex conditions and operations?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ability to directly manipulate the graph data?</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_and_test_java_rule_add_ons">6. Create and Test Java Rule Add-ons</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Install-and-Configure-Maven">6.1. Install and Configure Maven</h3>
<div class="paragraph">
<p>If you plan to contribute to the core code base or create Java-based rule add-ons, you must first install and configure Maven to build Windup from source.</p>
</div>
<div class="sect3">
<h4 id="_download_and_install_maven_2">6.1.1. Download and Install Maven</h4>
<div class="paragraph">
<p>If you plan to use Eclipse Luna (4.4) to build Windup, you can skip this
step and go directly to the section entitled <a href="#configure-maven-to-build-windup">Configure Maven to Build Windup</a>. This version of Eclipse embeds Maven 3.2.1 so you do not need to
install it separately.</p>
</div>
<div class="paragraph">
<p>If you plan to run Maven using the command line or plan to use Red Hat
JBoss Developer Studio 7.1.1 or an older version of Eclipse, you must
install Maven 3.1.1. or later.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <a href="http://maven.apache.org/download.html">Apache Maven Project -
Download Maven</a> and download the latest distribution for your operating
system.</p>
</li>
<li>
<p>See the Maven documentation for information on how to download and
install Apache Maven for your operating system.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_configure_the_maven_installation_in_your_ide_2">6.1.2. Configure the Maven Installation in Your IDE</h4>
<div class="paragraph">
<p>JBoss Developer Studio 7.1.1 is built upon Eclipse Kepler (4.3), which
embeds Maven 3.0.4. If you plan to use JBoss Developer Studio 7.1.1 or
an Eclipse version earier than Eclipse Luna (4.4), you must replace the
embedded 3.0.4 version of Maven with this newer version.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the menu, choose <code>Window</code> -&#8594; <code>Preferences</code>.</p>
</li>
<li>
<p>Expand <code>Maven</code> and click on <code>Installations</code>.</p>
</li>
<li>
<p>Uncheck <code>Embedded (3.0.4/1.4.0.20130531-2315)</code></p>
</li>
<li>
<p>Click <code>Add</code> and navigate to your Maven install directory. Select it
and click <code>OK</code>.</p>
</li>
<li>
<p>Make sure the new external Maven installation is checked and click
<code>OK</code> to return to JBoss Developer Studio.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><em>Note: If you use another IDE, refer to the product documentation to
update the Maven installation.</em></p>
</div>
</div>
<div class="sect3">
<h4 id="configure-maven-to-build-windup">6.1.3. Configure Maven to Build Windup</h4>
<div class="paragraph">
<p>Windup uses artifacts located in the
<a href="http://repository.jboss.org/nexus/content/groups/public/">JBoss Nexus</a>
repository. You must configure Maven to use this repository before you
build Windup.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open your <code>${user.home}/.m2/settings.xml</code> file for editing.</p>
</li>
<li>
<p>Copy the following <code>jboss-nexus-repository</code> profile XML prior to the
ending <code>&lt;/profiles&gt;</code> element.</p>
<div class="listingblock">
<div class="content">
<pre>&lt;profile&gt;
  &lt;id&gt;jboss-nexus-repository&lt;/id&gt;
  &lt;repositories&gt;
    &lt;repository&gt;
      &lt;id&gt;jboss-nexus-repository&lt;/id&gt;
      &lt;url&gt;http://repository.jboss.org/nexus/content/groups/public/&lt;/url&gt;
      &lt;releases&gt;
        &lt;enabled&gt;true&lt;/enabled&gt;
      &lt;/releases&gt;
      &lt;snapshots&gt;
        &lt;enabled&gt;true&lt;/enabled&gt;
      &lt;/snapshots&gt;
    &lt;/repository&gt;
  &lt;/repositories&gt;
  &lt;pluginRepositories&gt;
    &lt;pluginRepository&gt;
      &lt;id&gt;jboss-nexus-plugin-repository&lt;/id&gt;
      &lt;url&gt;http://repository.jboss.org/nexus/content/groups/public/&lt;/url&gt;
      &lt;releases&gt;
        &lt;enabled&gt;true&lt;/enabled&gt;
      &lt;/releases&gt;
      &lt;snapshots&gt;
        &lt;enabled&gt;true&lt;/enabled&gt;
      &lt;/snapshots&gt;
    &lt;/pluginRepository&gt;
  &lt;/pluginRepositories&gt;
&lt;/profile&gt;</pre>
</div>
</div>
</li>
<li>
<p>Copy the following XML prior to the ending <code>&lt;/activeprofiles&gt;</code>
element to make the profile active.</p>
<div class="listingblock">
<div class="content">
<pre>&lt;activeProfile&gt;jboss-nexus-repository&lt;/activeProfile&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>You are now configured to build Windup.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Rules-Java-based-Rule-Structure">6.2. Java-based Rule Structure</h3>
<div class="paragraph">
<p>TO_DO: Add a how-to for compound rules, nested rules, rules over multiple sources, negative queries (not matched by anything).</p>
</div>
<div class="sect3">
<h4 id="_windup_rule_provider">6.2.1. Windup Rule Provider</h4>
<div class="paragraph">
<p>Windup rules are based on <a href="http://ocpsoft.org/rewrite/">OCPsoft Rewrite</a>, an open source routing and URL rewriting solution for Servlets, Java Web Frameworks, and Java EE. The <strong>rewrite</strong> framework allows you to create rule providers and rules in an easy to read format.</p>
</div>
<div class="paragraph">
<p>Windup rule add-ons must extend the <a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/config/WindupRuleProvider.html">WindupRuleProvider</a> class.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the rule should run in a phase other than the default <a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/config/RulePhase.html#MIGRATION_PHASE">MIGRATION_PHASE</a>, you must implement the <a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/config/WindupRuleProvider.html#getPhase%28%29">getPhase()</a> method and specify in which Windup lifecycle phase the rule should be executed. For more information about rule phases, see <a href="#Rules-Rule-Execution-Lifecycle">Rule Execution Lifecycle</a>.</p>
</li>
<li>
<p>Rules are added using the <a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/config/WindupRuleProvider.html">getConfiguration(GraphContext context)</a> method. This method is inherited from the <a href="http://ocpsoft.org/rewrite/">OCPsoft Rewrite</a> interface org.ocpsoft.rewrite.config.ConfigurationProvider. Rules are discussed in more detail later.</p>
</li>
<li>
<p>If other rules must execute after or before the rules in this provider, you must provide the list of WindupRuleProvider classes using the <strong>getExecuteAfter()</strong> or <strong>getExecuteAfter()</strong> methods.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following is an example of a simple Java-based rule add-on.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class ExampleRuleProvider extends WindupRuleProvider
{
    @Override public RulePhase getPhase(){
        return RulePhase.DISCOVERY;
    }

    // @formatter:off
    @Override
    public Configuration getConfiguration(GraphContext context)
    {
        return ConfigurationBuilder.begin()
        .addRule()
        .when(
            // Some implementation of GraphCondition.
            Query.find(...)....
        )
       .perform(
            ...
       );
    }
    // @formatter:on
    // (@formatter:off/on prevents Eclipse from formatting the rules.)
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_add_rule_code_structure">6.2.2. Add Rule Code Structure</h4>
<div class="paragraph">
<p>Like most rule-based frameworks, Windup rules consist of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Condition: This is the <strong>when(condition)</strong> that determines if the rule should execute.</p>
</li>
<li>
<p>Operation: This defines what to <strong>perform()</strong> if the condition is met.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Rules consist of the <em>when</em> part, the <em>perform</em>, the <em>otherwise</em> part,
and some others, all of which are optional.</p>
</div>
<div class="sect4">
<h5 id="_when">when()</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">.when(Query.fromType(XmlMetaFacetModel.class))</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the <code>.when()</code> part, the rule typically queries the graph, using the
<code>Query</code> API. Results of the query are put on variables stack
(<code>Variables</code>), many times indirectly through the querying API.</p>
</div>
<div class="paragraph">
<p>Other way to fill a when part is subclassing the <code>GraphCondition</code>.
Actually, <code>Query</code> also implements it, and is only a convenient way to
create a condition.
You can also use multiple conditions within one when() call using and().
Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>.when(Query.fromType(XmlMetaFacetModel.class).and(Query...))</pre>
</div>
</div>
<div class="paragraph">
<p>Last noticable but important feature is the ability to use
<a href="https://github.com/tinkerpop/gremlin/wiki">Gremlin</a> queries. See
<a href="http://gremlindocs.com/">Gremlin docs</a> for reference manual.</p>
</div>
</div>
<div class="sect4">
<h5 id="_perform">perform()</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">.perform(
   new AbstractIterationOperation&lt;XmlMetaFacetModel&gt;(XmlMetaFacetModel.class, "xml")
   {
      public void perform(GraphRewrite event, EvaluationContext context, XmlMetaFacetModel model)
      {
         // for each model, do something
      }
   }
)</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the <code>.perform()</code> part, the rule typically iterates over the items of interest
(Java files, XML files, querying services, &#8230;&#8203;), processes them, and
writes the findings into the graph.</p>
</div>
<div class="paragraph">
<p>For that, various operations are available. These are subclasses of
<code>GraphOperation</code>. You can also implement your own. See
<a href="#Rules-Rules-Operations">Rules Operations</a> for more information. Again, there are
several convenient implementations for constructs like iteration
(<code>Iteration</code>).</p>
</div>
<div class="sect5">
<h6 id="_iteration">Iteration</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">.perform(
    Iteration.over(XmlMetaFacetModel.class, "xmlModels").as("xml")
    .when(...)
    .perform(
        new AbstractIterationOperation&lt;XmlMetaFacetModel&gt;(XmlMetaFacetModel.class, "xml"){
            public void perform(GraphRewrite event, EvaluationContext context, XmlMetaFacetModel xmlFacetModel)
            {
            }
        })
    .otherwise(
        new AbstractIterationOperation&lt;XmlMetaFacetModel&gt;(XmlMetaFacetModel.class, "xml"){
            public void perform(GraphRewrite event, EvaluationContext context, XmlMetaFacetModel payload)
                { ... }
        })
    .endIteration()</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_nested_iterations">Nested iterations</h6>
<div class="paragraph">
<p>An iteration is also an operation, so everywhere an operation is expected, you can freely put the Iteration. If the Iteration is put inside the perform method of another Iteration, we speak about nested iterations.
An example of such nested iteration may be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>.addRule()
     .when(...)
     .perform(
     Iteration.over("list_variable").as("single_var")
       .perform(
         Iteration.over("single_var") //second iteration
           .perform(...).endIteration()
     )
     .endIteration()
);</pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_otherwise">otherwise</h6>
<div class="paragraph">
<p>Windup rules inherit the rule constructs from OCP Rewrite. For example,
<code>.otherwise()</code> Gives you a chance to perform something in case the
conditions in <code>.when()</code> return false (e.g. they do not match anything).
For more information, see <a href="http://ocpsoft.org/rewrite/">OCP Rewrite web</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">.otherwise(
   new AbstractIterationOperation&lt;XmlMetaFacetModel&gt;(XmlMetaFacetModel.class, "xml")
   {
      public void perform(GraphRewrite event, EvaluationContext context, XmlMetaFacetModel model)
      {
         // for each model, do something altenate
      }
   }
)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_where">Where</h5>
<div class="paragraph">
<p>The where clause is used to provide information about used parameters within the rule. So for example if you have used a parameter in some condition like for example <code>JavaClass.references("{myMatch}")</code>, you may use the where clause to specify what the <code>myMatch</code> is like <code>.where("myMatch").matches("java.lang.String.toString\(.*\)")</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>.when(JavaClass.references("{myMatch}").at(TypeReferenceLocation.METHOD))
.perform(...)
.where("myMatch").matches("java.lang.String.toString\(.*\)")</pre>
</div>
</div>
<div class="paragraph">
<p>+
Please note that within the where clause the regex is used in contrast to JavaClass.references() where a windup specific syntax is expected.</p>
</div>
</div>
<div class="sect4">
<h5 id="_metadata">Metadata</h5>
<div class="paragraph">
<p>Rules can specify metadata. Currently, the only appearing in some rules,
and not actually used, is <code>RuleMetadata.CATEGORY</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">.withMetadata(RuleMetadata.CATEGORY, "Basic")</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>.withMetadata()</code> is basically putting key/value to a
<code>Map&lt;Object, Object&gt;</code>.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_available_utilities">6.2.3. Available utilities</h4>
<div class="paragraph">
<p>For a list of what key services and constructs can be used in the rule,
see <a href="#Rules-Available-Rules-Utilities">Available Rules Utilities</a>.</p>
</div>
<div class="sect4">
<h5 id="_variable_stack">Variable stack</h5>
<div class="paragraph">
<p>The communication between the conditions and operations is done using the variable stack that is filled with the output of the condition/s and then given to the Iteration to be processed.
Within conditions, you can specify the name of the result iterable that is saved in the stack using <code>as()</code> method, the iteration can specify the iterable to iterate over using the <code>over()</code> method and even specify the name of for each processed single model of the result being processed.
Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>.addRule()
     .when(Query...as("result_list"))
     .perform(
     Iteration.over("result_list").as("single_var")
          ...
     )
);</pre>
</div>
</div>
<div class="paragraph">
<p>The varstack may be accesed even from the second condition in order to narrow the result of the previous one. After that the iteration may choose which result it wants to iterate over (it is even possible to have multiple iterations listed in the perform, each of which may access different result saved in the variable stack).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>.addRule()
     .when(Query...as("result_list").and(Query.from("result_list")....as("second_result_list")))
     .perform(
     Iteration.over("second_result_list")
          ...
     )
);</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Rules-Basic-Rule-Execution-Flow-Patterns">6.3. Basic Rule Execution Flow Patterns</h3>
<div class="sect3">
<h4 id="_single_operation_operation">6.3.1. Single Operation - operation();</h4>
<div class="paragraph">
<p>No condition or iteration is needed. The following is an example of a single operation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>return ConfigurationBuilder.begin()
    .addRule()
    .perform(new GraphOperation(){
        @Override
        public void perform(GraphRewrite event, EvaluationContext context){
            ...
        }
    });</pre>
</div>
</div>
<div class="paragraph">
<p>Windup source code example: <a href="https://github.com/windup/windup/blob/master/rules-java/impl/src/main/java/org/jboss/windup/rules/apps/java/config/CopyJavaConfigToGraphRuleProvider.java#L99-L101" class="bare">https://github.com/windup/windup/blob/master/rules-java/impl/src/main/java/org/jboss/windup/rules/apps/java/config/CopyJavaConfigToGraphRuleProvider.java#L99-L101</a></p>
</div>
<div class="paragraph">
<p>The <code>copyConfigToGraph</code> GraphOperation used in the perform() above is defined before the rule.</p>
</div>
</div>
<div class="sect3">
<h4 id="_single_conditional_operation_if_operation">6.3.2. Single Conditional Operation - if( &#8230;&#8203; ){ operation()}</h4>
<div class="paragraph">
<p>A single condition must be met. The following is an example of a single conditional operation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>return ConfigurationBuilder.begin()
    .addRule()
    .when( ... )
    .perform(new GraphOperation(){
        @Override
        public void perform(GraphRewrite event, EvaluationContext context){
            ...
        }
    });</pre>
</div>
</div>
<div class="paragraph">
<p>Windup source code example: <a href="https://github.com/windup/windup/blob/master/reporting/api/src/main/java/org/jboss/windup/reporting/rules/AttachApplicationReportsToIndexRuleProvider.java#L39-L41" class="bare">https://github.com/windup/windup/blob/master/reporting/api/src/main/java/org/jboss/windup/reporting/rules/AttachApplicationReportsToIndexRuleProvider.java#L39-L41</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_single_iteration_for_foomodel_class">6.3.3. Single Iteration - for( FooModel.class ){ &#8230;&#8203; }</h4>
<div class="paragraph">
<p>For simple iterations, you can extend the <code>IteratingRuleProvider</code> class to simplify the <code>perform</code> code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class ComputeArchivesSHA512 extends IteratingRuleProvider&lt;ArchiveModel&gt;
{
    public ConditionBuilder when() {
        return Query.find(ArchiveModel.class);
    }

    // @formatter:off
    public void perform( GraphRewrite event, EvaluationContext context, ArchiveModel archive ){
        try( InputStream is = archive.asInputStream() ){
            String hash = DigestUtils.sha512Hex(is);
            archive.asVertex().setProperty(KEY_SHA512, hash);
        }
        catch( IOException e ){
            throw new WindupException("Failed to read archive: " + archive.getFilePath() +
                "\n    Due to: " + e.getMessage(), e);
        }
    }
    // @formatter:on

    @Override public String toStringPerform() { return this.getClass().getSimpleName(); }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Windup source code example: <a href="https://github.com/windup/windup/blob/master/rules-java/api/src/main/java/org/jboss/windup/rules/apps/java/scan/provider/DiscoverArchiveManifestFilesRuleProvider.java" class="bare">https://github.com/windup/windup/blob/master/rules-java/api/src/main/java/org/jboss/windup/rules/apps/java/scan/provider/DiscoverArchiveManifestFilesRuleProvider.java</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_conditional_iteration_if_for">6.3.4. Conditional Iteration - if( &#8230;&#8203; ){ for( &#8230;&#8203; ) }</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">return ConfigurationBuilder.begin()
    .addRule()
    .when(
        new GraphCondition(){ ... }
    ).perform(
        Iteration.over(ArchiveModel.class)
            .perform( ... )
    )</code></pre>
</div>
</div>
<div class="paragraph">
<p>Windup source code example: <a href="https://github.com/windup/windup/blob/master/rules-java-ee/addon/src/main/java/org/jboss/windup/rules/apps/javaee/rules/DiscoverEjbAnnotationsRuleProvider.java#L82-L93" class="bare">https://github.com/windup/windup/blob/master/rules-java-ee/addon/src/main/java/org/jboss/windup/rules/apps/javaee/rules/DiscoverEjbAnnotationsRuleProvider.java#L82-L93</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_iteration_with_a_condition_for_if">6.3.5. Iteration With a Condition - for( &#8230;&#8203; ){ if( &#8230;&#8203; ){ &#8230;&#8203; } }</h4>
<div class="listingblock">
<div class="content">
<pre>return ConfigurationBuilder.begin()
.addRule()
    .when(
        // Stores all ArchiveModel's into variables stack, under that type.
        Query.find(ArchiveModel.class)
    ).perform(
        Iteration.over(ArchiveModel.class) // Picks up ArchiveModel's from the varstack.
            .when(new AbstractIterationFilter&lt;ArchiveModel&gt;(){
                @Override
                public boolean evaluate(GraphRewrite event, EvaluationContext context, ArchiveModel payload)
                {
                    return payload.getProjectModel() == null;
                }
                @Override
                public String toString()
                {
                    return "ProjectModel == null";
                }
            })
            .perform( ... )</pre>
</div>
</div>
<div class="paragraph">
<p>Windup source code example: <a href="https://github.com/windup/windup/blob/master/reporting/impl/src/main/java/org/jboss/windup/reporting/rules/rendering/RenderReportRuleProvider.java#L46-L66" class="bare">https://github.com/windup/windup/blob/master/reporting/impl/src/main/java/org/jboss/windup/reporting/rules/rendering/RenderReportRuleProvider.java#L46-L66</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_nested_iterations_for_for">6.3.6. Nested Iterations - for( &#8230;&#8203; ){ for( &#8230;&#8203; ) { &#8230;&#8203; } }</h4>
<div class="listingblock">
<div class="content">
<pre>.addRule()
     .when(...)
     .perform(Iteration //first iteration
     .over("list_variable").as("single_var")
     .perform(
         Iteration.over("single_var") //second iteration
         .perform(...).endIteration()
     )
     .endIteration()
);</pre>
</div>
</div>
<div class="paragraph">
<p>Windup source code example: <a href="https://github.com/windup/windup/blob/master/config/tests/src/test/java/org/jboss/windup/config/iteration/payload/IterationPayLoadPassTest.java#L183-L202" class="bare">https://github.com/windup/windup/blob/master/config/tests/src/test/java/org/jboss/windup/config/iteration/payload/IterationPayLoadPassTest.java#L183-L202</a></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Rules-Create-a-Basic-Java-based-Rule-Add-on">6.4. Create a Basic Java-based Rule Add-on</h3>
<div class="paragraph">
<p>You can create a rule using Java or XML. This topic describes how to create a rule add-on using Java.</p>
</div>
<div class="sect3">
<h4 id="_prerequisites_2">6.4.1. Prerequisites</h4>
<div class="ulist">
<ul>
<li>
<p>You must <a href="#Install-Windup">Install Windup</a>.</p>
</li>
<li>
<p>Be sure you <a href="#Install-and-Configure-Maven">Install and Configure Maven</a>.</p>
</li>
<li>
<p>Before you begin, may want also want to be familiar with the following documentation:</p>
<div class="ulist">
<ul>
<li>
<p>Windup rules are based on the ocpsoft <strong>rewrite</strong> project. You can find more information about ocpsoft <strong>rewrite</strong> here: <a href="http://ocpsoft.org/rewrite/" class="bare">http://ocpsoft.org/rewrite/</a></p>
</li>
<li>
<p>The JavaDoc for the Windup API is located here: <a href="http://windup.github.io/windup/docs/javadoc/latest/" class="bare">http://windup.github.io/windup/docs/javadoc/latest/</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Working examples of Java-based rules can be found in the Windup quickstarts GitHub repository located here: <a href="https://github.com/windup/windup-quickstarts" class="bare">https://github.com/windup/windup-quickstarts</a>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_create_a_rule_add_on">6.4.2. Create a Rule Add-on</h4>
<div class="sect4">
<h5 id="_create_a_maven_project">Create a Maven Project</h5>
<div class="paragraph">
<p>Create a new Maven Java Project. These instructions will refer to the project folder location with the <strong>replaceable</strong> variable 'RULE_PROJECT_HOME'. Modify the project <code>pom.xml</code> file as follows</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the following properties:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;properties&gt;
    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
    &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;
    &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;
    &lt;version.windup&gt;2.0.0.VERSION&lt;/version.windup&gt;
    &lt;version.forge&gt;2.12.1.Final&lt;/version.forge&gt;
&lt;/properties&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Add a dependency management section for the Windup BOM.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
        &lt;!-- Windup BOM --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.jboss.windup&lt;/groupId&gt;
            &lt;artifactId&gt;windup-bom&lt;/artifactId&gt;
            &lt;version&gt;${version.windup}&lt;/version&gt;
            &lt;type&gt;pom&lt;/type&gt;
               &lt;scope&gt;import&lt;/scope&gt;
         &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Add a <code>&lt;dependencies&gt;</code> section to include Windup, rulesets, and test dependencies required by your rule add-on. Windup is a Forge/Furnace based application and has a modular design, so the dependencies will vary depending on the Windup APIs used by the rule. For more information on Windup dependencies, see <a href="#Dev-Dependencies">Windup Dependencies</a>.</p>
<div class="paragraph">
<p>The following are examples of some dependencies you may need for your rule add-on.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;!-- Windup API dependencies --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.windup.graph&lt;/groupId&gt;
    &lt;artifactId&gt;windup-graph&lt;/artifactId&gt;
    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.windup.config&lt;/groupId&gt;
    &lt;artifactId&gt;windup-config&lt;/artifactId&gt;
    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.windup.ext&lt;/groupId&gt;
    &lt;artifactId&gt;windup-config-groovy&lt;/artifactId&gt;
    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.windup.utils&lt;/groupId&gt;
    &lt;artifactId&gt;utils&lt;/artifactId&gt;
    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.windup.reporting&lt;/groupId&gt;
    &lt;artifactId&gt;windup-reporting&lt;/artifactId&gt;
    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;

&lt;!-- Dependencies on other rulesets --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.windup.rules.apps&lt;/groupId&gt;
    &lt;artifactId&gt;rules-java&lt;/artifactId&gt;
    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.forge.furnace.container&lt;/groupId&gt;
    &lt;artifactId&gt;cdi-api&lt;/artifactId&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.forge.furnace.container&lt;/groupId&gt;
    &lt;artifactId&gt;cdi&lt;/artifactId&gt;
    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;

&lt;!-- Test dependencies --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.forge.furnace.test&lt;/groupId&gt;
    &lt;artifactId&gt;furnace-test-harness&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.forge.furnace.test&lt;/groupId&gt;
    &lt;artifactId&gt;arquillian-furnace-classpath&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;junit&lt;/groupId&gt;
    &lt;artifactId&gt;junit&lt;/artifactId&gt;
    &lt;version&gt;4.11&lt;/version&gt;
    &lt;type&gt;jar&lt;/type&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.windup.exec&lt;/groupId&gt;
    &lt;artifactId&gt;windup-exec&lt;/artifactId&gt;
    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Add the <code>&lt;plugins&gt;</code> section to make it a Forge add-on.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;plugins&gt;
    &lt;!-- The following plugins make this artifact a Forge add-on. --&gt;
    &lt;plugin&gt;
        &lt;groupId&gt;org.jboss.forge.furnace&lt;/groupId&gt;
        &lt;artifactId&gt;furnace-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;${version.forge}&lt;/version&gt;
        &lt;executions&gt;
            &lt;execution&gt;
                &lt;id&gt;generate-dot&lt;/id&gt;
                &lt;phase&gt;prepare-package&lt;/phase&gt;
                &lt;goals&gt; &lt;goal&gt;generate-dot&lt;/goal&gt; &lt;/goals&gt;
                &lt;configuration&gt; &lt;attach&gt;true&lt;/attach&gt; &lt;/configuration&gt;
            &lt;/execution&gt;
        &lt;/executions&gt;
    &lt;/plugin&gt;
    &lt;plugin&gt;
        &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;
        &lt;executions&gt;
            &lt;execution&gt;
                &lt;id&gt;create-forge-addon&lt;/id&gt;
                &lt;phase&gt;package&lt;/phase&gt;
                &lt;goals&gt; &lt;goal&gt;jar&lt;/goal&gt; &lt;/goals&gt;
                &lt;configuration&gt;
                    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
                &lt;/configuration&gt;
            &lt;/execution&gt;
        &lt;/executions&gt;
    &lt;/plugin&gt;
&lt;/plugins&gt;</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_create_the_java_ruleprovider">Create the Java RuleProvider</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add <code>beans.xml</code> file to <code>META-INF/</code> dir in resources - typically, <code>$project-dir/src/main/resources/META-INF/beans.xml</code>. This file can be empty. It tells CDI to scan your add-on for CDI beans.</p>
</li>
<li>
<p>Within your Maven project, create a Java class that extends the <code>WindupRuleProvider</code> class. It is suggested that you end the name of the class with <code>RuleProvider</code>. For example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">public class MyCustomRuleProvider extends WindupRuleProvider
{
}</code></pre>
</div>
</div>
</li>
<li>
<p>If the rule provider must run in a phase other than the default <code>MIGRATION_RULES</code> phase, override the phase using the <code>getPhase()</code> method. For example, you may want the rule provider to perform a task during the initial <strong>DISCOVERY</strong> phase, for example, to ignore files with a specific name or extension.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">    @Override
    public RulePhase getPhase() {
        return RulePhase.DISCOVERY;
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information about rule phases, see <a href="#Rules-Rule-Execution-Lifecycle">Rules Execution Lifecycles</a>.</p>
</div>
</li>
<li>
<p>To control the order in which the rule is executed, implement the <code>getExecuteBefore()</code> or <code>getExecuteAfter()</code> method.</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">List&lt;Class&lt;? extends WindupRuleProvider&gt;&gt; executeBeforeList = new ArrayList&lt;&gt;();

@Override
public List&lt;Class&lt;? extends WindupRuleProvider&gt;&gt; getExecuteBefore()
{
   return executeBeforeList.add(RuleToFireBefore.class);
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">List&lt;Class&lt;? extends WindupRuleProvider&gt;&gt; executeAfterList = new ArrayList&lt;&gt;();

@Override
public List&lt;Class&lt;? extends WindupRuleProvider&gt;&gt; getExecuteAfter()
{
    return executeAfterList.add(RuleToFireAfter.class);
}</code></pre>
</div>
</div>
</li>
<li>
<p>Finally, add the rule or rules to the rule provider.</p>
<div class="ulist">
<ul>
<li>
<p>High-level Conditions and Operations</p>
<div class="paragraph">
<p>The following is a specific high-level rule which uses high-level conditions (<code>JavaClass</code>) and operations (<code>Classification</code>). See the documentation of those conditions and operations for the details.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Override
public Configuration getConfiguration(GraphContext context)
{
    return ConfigurationBuilder.begin()
        .addRule()
        .when(
            JavaClass.references("weblogic.servlet.annotation.WLServlet").at(TypeReferenceLocation.ANNOTATION)
        )
        .perform(
            Classification.as("WebLogic @WLServlet")
               .with(Link.to("Java EE 6 @WebServlet", "https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/index.html"))
               .withEffort(0)
               .and(Hint.withText("Migrate to Java EE 6 @WebServlet.").withEffort(8))
        );
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more examples of rule providers, see the
<a href="https://github.com/windup/windup/blob/master/rules/app/java-ee/src/main/java/org/jboss/windup/rules/apps/legacy/java/BaseConfig.java#L53">BaseConfig.java</a>
rule.</p>
</div>
</li>
<li>
<p>Low-level Conditions and Operations</p>
<div class="paragraph">
<p>As you can see, the conditions and operations above are Java-specific.
They come with the <code>Java Basic</code> ruleset. The list of existing rulesets
will be part of the project documentation. Each ruleset will be
accompanied with a documentation for its `Condition`s and `Operation`s
(and also `Model`s).</p>
</div>
<div class="paragraph">
<p>These high-level elements provided by rulesets may cover majority of
cases, but not all. Then, you will need to dive into the mid-level
Windup building elements.</p>
</div>
</li>
<li>
<p>Mid-level Conditions and Operations</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_install_the_java_based_rule_add_on">6.4.3. Install the Java-based Rule Add-on</h4>
<div class="paragraph">
<p>The easiest and fastest way to build the rule add-on, install it into the local Maven repository, and install it into Windup as a rule add-on is to use the Windup <code>addon-build-and-install</code> command.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you have not started Windup, follow the instructions to <a href="#Execute-Windup">Execute Windup</a>.</p>
</li>
<li>
<p>At the Windup console prompt, enter the <code>addon-build-and-install</code> command:</p>
<div class="literalblock">
<div class="content">
<pre>addon-build-and-install --projectRoot RULE_PROJECT_HOME</pre>
</div>
</div>
</li>
<li>
<p>You should see the following result.</p>
<div class="literalblock">
<div class="content">
<pre>***SUCCESS*** Addon MyCustomRuleProvider:::2.0.0.VERSION was installed successfully.</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_test_the_java_based_rule_add_on">6.4.4. Test the Java-based Rule Add-on</h4>
<div class="paragraph">
<p>Test the Java-based rule add-on against your application file by running the <code>windup-migrate-app</code> command in the Windup console prompt.</p>
</div>
<div class="paragraph">
<p>The command uses this syntax:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>windup-migrate-app [--sourceMode true] --input INPUT_ARCHIVE_OR_FOLDER --output OUTPUT_REPORT_DIRECTORY --packages PACKAGE_1 PACKAGE_2 PACKAGE_N</pre>
</div>
</div>
<div class="paragraph">
<p>You should see the following result:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>***SUCCESS*** Windup report created: QUICKSTART_HOME/windup-reports-java/index.html</pre>
</div>
</div>
<div class="paragraph">
<p>For more information and examples of how to run Windup, see: <a href="#Execute-Windup">Execute Windup</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_review_the_output_report">6.4.5. Review the Output Report</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open OUTPUT_REPORT_DIRECTORY /index.html file in a browser.</p>
</li>
<li>
<p>You are presented with an Overview page containing the application profiles.</p>
</li>
<li>
<p>Click on the application link to review the detail page. Check to be sure the warning messages, links, and story points match what you expect to see.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>TBD.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Models</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/tinkerpop/frames/wiki">Frames</a></p>
</li>
<li>
<p><a href="#Rules-Windup-Models">Windup Models</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Rules</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://ocpsoft.org/rewrite/">OCPSoft Rewrite</a></p>
</li>
<li>
<p>Conditions, Operations</p>
<div class="ulist">
<ul>
<li>
<p>Variables</p>
</li>
</ul>
</div>
</li>
<li>
<p>Inter-rule action</p>
</li>
<li>
<p><a href="#Rules:-Rules-Execution-Lifecycle">Inter-rule dependency</a></p>
<div class="ulist">
<ul>
<li>
<p>Short IDs - <a href="https://issues.jboss.org/browse/WINDUP-217">WINDUP-216</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_create_and_test_xml_rules">7. Create and Test XML Rules</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Rules-Create-a-Basic-XML-Rule">7.1. Create a Basic XML Rule</h3>
<div class="paragraph">
<p>You can create a Windup rule using Java, XML, or Groovy. This topic describes how to create a rule using XML.</p>
</div>
<div class="sect3">
<h4 id="_prerequisites_3">7.1.1. Prerequisites</h4>
<div class="ulist">
<ul>
<li>
<p>You should have already <a href="#Install-Windup">installed Windup</a>.</p>
</li>
<li>
<p>Before you begin, you may also want to be familiar with the following documentation:</p>
<div class="ulist">
<ul>
<li>
<p>Windup rules are based on the ocpsoft <strong>rewrite</strong> project. You can find more information about ocpsoft <strong>rewrite</strong> here: <a href="http://ocpsoft.org/rewrite/" class="bare">http://ocpsoft.org/rewrite/</a></p>
</li>
<li>
<p>The JavaDoc for the Windup API is located here: <a href="http://windup.github.io/windup/docs/javadoc/latest/" class="bare">http://windup.github.io/windup/docs/javadoc/latest/</a></p>
</li>
<li>
<p>The XML rule schema is located here: <a href="https://github.com/windup/windup/blob/master/config-xml/rule-schema.xsd" class="bare">https://github.com/windup/windup/blob/master/config-xml/rule-schema.xsd</a>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_file_naming_convention_for_xml_rules">7.1.2. File Naming Convention for XML Rules</h4>
<div class="paragraph">
<p>You must name the file containing an XML rule with the <code>.windup.xml</code> extension. Windup identifies files with this extension as XML-base rules, so be sure to use this naming convention, otherwise the rule will not be evaluated!</p>
</div>
</div>
<div class="sect3">
<h4 id="_basic_xml_rule_template">7.1.3. Basic XML Rule Template</h4>
<div class="paragraph">
<p>XML rules consist of <em>conditions</em> and <em>actions</em> and follow the familiar "if/then/else" construct:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>when(condition)
    perform(action)
otherwise
    perform(action)</pre>
</div>
</div>
<div class="paragraph">
<p>The following is the basic syntax for XML rules.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;?xml version="1.0"?&gt;
&lt;ruleset xmlns="http://windup.jboss.org/v1/xml" id="XmlFileMappings"&gt;
    &lt;phase&gt;
        &lt;!-- The phase in which to run the rules --&gt;
    &lt;/phase&gt;
    &lt;rules&gt;
        &lt;rule&gt;
            &lt;when&gt;
                &lt;!-- Test a condition... --&gt;
            &lt;/when&gt;
            &lt;perform&gt;
                &lt;!-- Perform this action when condition is satisfied --&gt;
            &lt;/perform&gt;
            &lt;otherwise&gt;
                &lt;!-- Perform this action when condition is not satisfied --&gt;
            &lt;/otherwise&gt;
        &lt;/rule&gt;
      &lt;rules&gt;
    &lt;/ruleset&gt;</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_create_the_rule_when_condition">7.1.4. Create the Rule When Condition</h4>
<div class="paragraph">
<p>The syntax is dependent on whether you are creating a rule to evaluate Java class, an XML file, a project, or file content and is described in more detail here: <a href="#Rules-XML-Rule-When-Condition-Syntax">XML Rule - When Condition Syntax</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_create_the_rule_perform_action">7.1.5. Create the Rule Perform Action</h4>
<div class="paragraph">
<p>Operations allowed in the <code>perform</code> section of the rule include the classification of application resources, in-line hints for migration steps, links to migration information, and project lineitem reporting. The syntax is described in detail here: <a href="#Rules-XML-Rule-Perform-Action-Syntax">XML Rule - Perform Action Syntax</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Rules-XML-Rule-When-Condition-Syntax">7.2. XML Rule - When Condition Syntax</h3>
<div class="paragraph">
<p>Conditions allowed in the <code>when</code> portion of a rule must extend <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/operation/GraphOperation.html">GraphOperaton</a> and currently include evaluation of Java classes, XML files, projects, and file content. Because XML rules are modeled after the Java-based rule add-ons, links to JavaDocs for the related Java classes are provided for a better understanding of how they behave.</p>
</div>
<div class="paragraph">
<p>The complete XML rule schema is located here: <a href="https://github.com/windup/windup/blob/master/config-xml/rule-schema.xsd" class="bare">https://github.com/windup/windup/blob/master/config-xml/rule-schema.xsd</a>.</p>
</div>
<div class="paragraph">
<p>The following sections describe the more common XML <code>when</code> rule conditions.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#javaclass-syntax">javaclass Syntax</a></p>
</li>
<li>
<p><a href="#xmlfile-syntax">xmlfile Syntax</a></p>
</li>
<li>
<p><a href="#project-syntax">project Syntax</a></p>
</li>
<li>
<p><a href="#filecontent-syntax">filecontent Syntax</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="javaclass-syntax">7.2.1. javaclass Syntax</h4>
<div class="sect4">
<h5 id="_summary_2">Summary</h5>
<div class="paragraph">
<p>Use the <code>javaclass</code> element to find imports, methods, variable declarations, annotations, class implementations, and other items related to Java classes. For a better understanding of the <code>javaclass</code> condition, see the JavaDoc for the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/rules/apps/java/condition/JavaClass.html">JavaClass</a> class.</p>
</div>
<div class="paragraph">
<p>The following is an example of a rule that tests for a <code>javaclass</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;rule&gt;
    &lt;when&gt;
        &lt;javaclass references="org.jboss.ws.api.annotation.WebContext" in="org/jboss/{*}" as="webcontextclasses"&gt;
            &lt;location&gt;IMPORT&lt;/location&gt;
            &lt;location&gt;TYPE&lt;/location&gt;
        &lt;/javaclass&gt;
    &lt;/when&gt;
    &lt;perform&gt;
        &lt;hint message="WebContext is deprecated." effort="0"/&gt;
    &lt;/perform&gt;
&lt;/rule&gt;</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_construct_a_javaclass_element">Construct a javaclass Element</h5>
<div class="sect5">
<h6 id="_javaclass_element_attributes">javaclass Element Attributes</h6>
<div class="dlist">
<dl>
<dt class="hdlist1">references="CLASS_NAME"</dt>
<dd>
<p>The package or class name to match on. Wildcard characters can be used.</p>
<div class="literalblock">
<div class="content">
<pre>Example: references="org.apache.commons.{*}"</pre>
</div>
</div>
</dd>
<dt class="hdlist1">as="VARIABLE_NAME"</dt>
<dd>
<p>A variable name assigned to the rule so that it can be used as a reference in later processing. See the <code>from</code> attribute below.</p>
<div class="literalblock">
<div class="content">
<pre>Example: as="MyEjbRule"</pre>
</div>
</div>
</dd>
<dt class="hdlist1">in="PATH_FILTER"</dt>
<dd>
<p>Used to filter input files matching this regex (regular expression) naming pattern. Wildcard characters can be used.</p>
<div class="literalblock">
<div class="content">
<pre>Example: in="{*}File1"</pre>
</div>
</div>
</dd>
<dt class="hdlist1">from="VARIABLE_NAME"</dt>
<dd>
<p>Begin the search query with the filtered result from a previous search identified by its <code>as</code> VARIABLE_NAME.</p>
<div class="literalblock">
<div class="content">
<pre>Example: from="MyEjbRule"</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect5">
<h6 id="_javaclass_element_child_elements">JavaClass Element Child Elements</h6>
<div class="dlist">
<dl>
<dt class="hdlist1">location</dt>
<dd>
<p>The location where the reference was found in a Java class. Location can refer to annotations, field and variable declarations, imports, and methods. For the complete list of valid values, see the JavaDoc for <a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/rules/apps/java/scan/ast/TypeReferenceLocation.html">TypeReferenceLocation</a>.</p>
<div class="literalblock">
<div class="content">
<pre>Example: &lt;location&gt;IMPORT&lt;/location&gt;</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="xmlfile-syntax">7.2.2. xmlfile Syntax</h4>
<div class="sect4">
<h5 id="_summary_3">Summary</h5>
<div class="paragraph">
<p>Use the <code>xmlfile</code> element to find information in XML files. For a better understanding of the <code>xmlfile</code> condition, see the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/rules/apps/xml/condition/XmlFile.html">XmlFile</a> JavaDoc.</p>
</div>
<div class="paragraph">
<p>The following is an example of a rule that tests for an <code>xmlfile</code>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;rule&gt;
    &lt;when&gt;
        &lt;xmlfile matches="/w:web-app/w:resource-ref/w:res-auth[text() = 'Container']"&gt;
            &lt;namespace prefix="w" uri="http://java.sun.com/xml/ns/javaee"/&gt;
        &lt;/xmlfile&gt;
    &lt;/when&gt;
    &lt;perform&gt;
        &lt;hint title="Title for Hint from XML"&gt;
            &lt;message&gt;Container Auth&lt;/message&gt;
        &lt;/hint&gt;
        &lt;xslt description="Example XSLT Conversion" extension="-converted-example.xml"
              template="/exampleconversion.xsl"/&gt;
    &lt;/perform&gt;
&lt;/rule&gt;</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_construct_an_xmlfile_element">Construct an xmlfile Element</h5>
<div class="sect5">
<h6 id="_xmlfile_element_attributes">xmlfile Element: Attributes</h6>
<div class="dlist">
<dl>
<dt class="hdlist1">matches="XPATH"</dt>
<dd>
<p>Match on an XML file condition.</p>
<div class="literalblock">
<div class="content">
<pre>Example: matches="/w:web-app/w:resource-ref/w:res-auth[text() = 'Container']"</pre>
</div>
</div>
</dd>
<dt class="hdlist1">xpathResultMatch="XPATH_RESULT_STRING"</dt>
<dd>
<p>Return results that match the given regex.</p>
<div class="literalblock">
<div class="content">
<pre>Example: xpathResultMatch=""</pre>
</div>
</div>
</dd>
<dt class="hdlist1">as="VARIABLE_NAME"</dt>
<dd>
<p>A variable name assigned to the rule so that it can be used as a reference in later processing. See the <code>from</code> attribute below.</p>
<div class="literalblock">
<div class="content">
<pre>Example: as="MyEjbRule"</pre>
</div>
</div>
</dd>
<dt class="hdlist1">in="PATH_FILTER"</dt>
<dd>
<p>Used to filter input files matching this regex (regular expression) naming pattern. Wildcard characters can be used.</p>
<div class="literalblock">
<div class="content">
<pre>Example: in="{*}File1"</pre>
</div>
</div>
</dd>
<dt class="hdlist1">from="VARIABLE_NAME"</dt>
<dd>
<p>Begin the search query with the filtered result from a previous search identified by its <code>as</code> VARIABLE_NAME.</p>
<div class="literalblock">
<div class="content">
<pre>Example: from="MyEjbRule"</pre>
</div>
</div>
</dd>
<dt class="hdlist1">public-id="PUBLIC_ID"</dt>
<dd>
<p>The DTD public-id regex.</p>
<div class="literalblock">
<div class="content">
<pre>Example: public-id="public"</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect5">
<h6 id="_xmlfile_element_child_elements">xmlfile Element: Child Elements</h6>
<div class="dlist">
<dl>
<dt class="hdlist1">namespace</dt>
<dd>
<p>The namespace to referenced in XML files. This element contains 2 attributes: The <code>prefix</code> and the <code>uri</code>.</p>
<div class="literalblock">
<div class="content">
<pre>Example: &lt;namespace prefix="abc" uri="http://maven.apache.org/POM/4.0.0"/&gt;</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="project-syntax">7.2.3. project Syntax</h4>
<div class="sect4">
<h5 id="_summary_4">Summary</h5>
<div class="paragraph">
<p>Use the <code>project</code> element to query for the project charateristics. For a better understanding of the <code>project</code> condition, see the JavaDoc for the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/project/condition/Project.html">Project</a> class.</p>
</div>
<div class="paragraph">
<p>The following is an example of a rule that checks a rule is dependent on the junit in the version between 2.0.0.Final and 2.2.0.Final.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;rule&gt;
    &lt;when&gt;
        &lt;project&gt;
            &lt;artifact groupId="junit" artifactId="junit" from="2.0.0.Final" to="2.2.0.Final"/&gt;
        &lt;/project&gt;
    &lt;/when&gt;
    &lt;perform&gt;
        &lt;lineitem message="The project uses junit with the version between 2.0.0.Final and 2.2.0.Final"/&gt;
    &lt;/perform&gt;
&lt;/rule&gt;</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_construct_a_project_element">Construct a project Element</h5>
<div class="sect5">
<h6 id="_project_element_attributes">project Element Attributes</h6>
<div class="paragraph">
<p>The <code>project</code> element is used to match against the project as a whole. You can use this condition to query for dependencies of the project. It does not have any attributes itself.</p>
</div>
</div>
<div class="sect5">
<h6 id="_project_element_child_elements">project Element Child Elements</h6>
<div class="dlist">
<dl>
<dt class="hdlist1">artifact</dt>
<dd>
<p>Subcondition used within <code>project</code> to query against project dependencies. This element contains the following attributes:</p>
<div class="ulist">
<ul>
<li>
<p>groupId="PROJECT_GROUP_ID"</p>
<div class="paragraph">
<p>Match on the project <code>&lt;groupId&gt;</code> of the dependency</p>
</div>
</li>
<li>
<p>artifactId="PROJECT_ARTIFACT_ID"
Match on the project <code>&lt;artifactId&gt;</code> of the dependency</p>
</li>
<li>
<p>fromVersion="FROM_VERSION"</p>
<div class="paragraph">
<p>Specify the lower version bound of the artifact. For example <code>2.0.0.Final</code></p>
</div>
</li>
<li>
<p>toVersion="TO_VERSION"</p>
<div class="paragraph">
<p>Specify the upper version bound of the artifact. For example <code>2.2.0.Final</code></p>
</div>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="filecontent-syntax">7.2.4. filecontent Syntax</h4>
<div class="paragraph">
<p>Use the <code>filecontent</code> element to find strings or text within files, for example, a line in a Properties file. For a better understanding of the <code>filecontent</code> condition, see the JavaDoc for the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/rules/files/condition/FileContent.html">FileContent</a> class.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Rules-XML-Rule-Perform-Action-Syntax">7.3. XML Rule - Perform Action Syntax</h3>
<div class="paragraph">
<p>Operations allowed in the <code>perform</code> section of the rule include the classification of application resources, in-line hints for migration steps, links to migration information, and project lineitem reporting. Because XML rules are modeled after the Java-based rule add-ons, links to JavaDocs for the related Java classes are provided for a better understanding of how they behave.</p>
</div>
<div class="paragraph">
<p>The complete XML rule schema is located here: <a href="https://github.com/windup/windup/blob/master/config-xml/rule-schema.xsd" class="bare">https://github.com/windup/windup/blob/master/config-xml/rule-schema.xsd</a>.</p>
</div>
<div class="paragraph">
<p>The following sections describe the more common XML rule perform actions.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#classification-syntax">classification Syntax</a></p>
</li>
<li>
<p><a href="#link-syntax">link Syntax</a></p>
</li>
<li>
<p><a href="#hint-syntax">hint Syntax</a></p>
</li>
<li>
<p><a href="#xslt-syntax">xslt Syntax</a></p>
</li>
<li>
<p><a href="#lineitem-syntax">lineitem Syntax</a></p>
</li>
<li>
<p><a href="#iteration-syntax">iteration Syntax</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="classification-syntax">7.3.1. classification Syntax</h4>
<div class="sect4">
<h5 id="_summary_5">Summary</h5>
<div class="paragraph">
<p>The <code>classification</code> element is used to identify or classify application resources. It provides a level of effort and can also provide links to additional information about how to migrate this resource classification. For a better understanding of the <code>classification</code> action, see the JavaDoc for the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/reporting/config/classification/Classification.html">Classification</a> class.</p>
</div>
<div class="paragraph">
<p>The following is an example of a rule that classifies a resource as a WebLogic EAR application deployment descriptor file.</p>
</div>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;rule id="XmlWebLogicRules_10vvyf"&gt;
    &lt;when&gt;
        &lt;xmlfile as="default" matches="/*[local-name()='weblogic-application']"&gt;
        &lt;/xmlfile&gt;
    &lt;/when&gt;
    &lt;perform&gt;
        &lt;iteration&gt;
            &lt;classification classification="Weblogic EAR Application Descriptor" effort="3"/&gt;
        &lt;/iteration&gt;
    &lt;/perform&gt;
&lt;/rule&gt;</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_construct_a_classification_element">Construct a classification Element</h5>
<div class="sect5">
<h6 id="_classification_element_attributes">classification Element Attributes</h6>
<div class="dlist">
<dl>
<dt class="hdlist1">classification="STRING"</dt>
<dd>
<p>Classify the resource as the specified string.</p>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>classification="JBoss Seam Components"</pre>
</div>
</div>
</dd>
<dt class="hdlist1">effort="NUMBER"</dt>
<dd>
<p>The level of effort assigned to this resource.</p>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>effort="2"</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect5">
<h6 id="_classification_element_child_elements">classification Element Child Elements</h6>
<div class="dlist">
<dl>
<dt class="hdlist1">xref</dt>
<dd>
<p>Provides a link URI and text description for additional information.</p>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;classification classification="Websphere Startup Service" effort="4"&gt;
    &lt;link href="http://docs.oracle.com/javaee/6/api/javax/ejb/Singleton.html" description="EJB3.1 Singleton Bean"/&gt;
    &lt;link href="http://docs.oracle.com/javaee/6/api/javax/ejb/Startup.html" description="EJB3.1 Startup Bean"/&gt;
 &lt;/classification&gt;</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="link-syntax">7.3.2. link Syntax</h4>
<div class="sect4">
<h5 id="_summary_6">Summary</h5>
<div class="paragraph">
<p>The <code>link</code> element is used in classifications or hints to identify or classify links to informational content. For a better understanding of the <code>link</code> action, see the JavaDoc for the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/reporting/config/Link.html">Link</a> class.</p>
</div>
<div class="paragraph">
<p>The following is an example of a rule that creates links to additional information.</p>
</div>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;rule id="SeamToCDIRules_2fmb"&gt;
    &lt;when&gt;
        &lt;javaclass references="org.jboss.seam.{*}" as="default"/&gt;
    &lt;/when&gt;
    &lt;perform&gt;
        &lt;iteration&gt;
            &lt;classification classification="SEAM Component" effort="1"&gt;
                &lt;link href="http://www.seamframework.org/Seam3/Seam2ToSeam3MigrationNotes" description="Seam 2 to Seam 3 Migration Notes"/&gt;
                &lt;link href="http://docs.jboss.org/weld/reference/latest/en-US/html/example.html" description="JSF Web Application Example"/&gt;
                &lt;link href="http://docs.jboss.org/weld/reference/latest/en-US/html/contexts.html" description="JBoss Context Documentation"/&gt;
                &lt;link href="http://www.andygibson.net/blog/tutorial/cdi-conversations-part-2/" description="CDI Conversations Blog Post"/&gt;
            &lt;/classification&gt;
        &lt;/iteration&gt;
    &lt;/perform&gt;
&lt;/rule&gt;</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_construct_a_link_element">Construct a link Element</h5>
<div class="sect5">
<h6 id="_link_element_attributes">link Element: Attributes</h6>
<div class="dlist">
<dl>
<dt class="hdlist1">href="URI"</dt>
<dd>
<p>The URI for the referenced link/.</p>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>href="https://access.redhat.com/articles/1249423"</pre>
</div>
</div>
</dd>
<dt class="hdlist1">description="URI_DESCRIPTION"</dt>
<dd>
<p>A description for the link.</p>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>description="Migrate WebLogic Proprietary Servlet Annotations"</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="hint-syntax">7.3.3. hint Syntax</h4>
<div class="sect4">
<h5 id="_summary_7">Summary</h5>
<div class="paragraph">
<p>The <code>hint</code> element is used to provide a hint or inline information about how to migrate a section of code. For a better understanding of the <code>hint</code> action, see the JavaDoc for the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/reporting/config/Hint.html">Hint</a> class.</p>
</div>
<div class="paragraph">
<p>The following is an example of a rule that creates a hint.</p>
</div>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;rule id="WebLogicWebServiceRules_8jyqn"&gt;
    &lt;when&gt;
        &lt;javaclass references="weblogic.wsee.connection.transport.http.HttpTransportInfo.setUsername({*})" as="default"&gt;
            &lt;location&gt;METHOD&lt;/location&gt;
        &lt;/javaclass&gt;
    &lt;/when&gt;
    &lt;perform&gt;
        &lt;iteration&gt;
            &lt;hint message="Replace proprietary web-service authentication with JAX-WS standards." effort="0"&gt;
                &lt;link href="http://java-x.blogspot.com/2009/03/invoking-web-services-through-proxy.html" description="JAX-WS Proxy Password Example"/&gt;
            &lt;/hint&gt;
        &lt;/iteration&gt;
    &lt;/perform&gt;
&lt;/rule&gt;</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_construct_a_hint_element">Construct a hint Element</h5>
<div class="sect5">
<h6 id="_hint_element_attributes">hint Element:  Attributes</h6>
<div class="dlist">
<dl>
<dt class="hdlist1">message="MESSAGE"</dt>
<dd>
<p>A message describing the migration hint</p>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>message=""</pre>
</div>
</div>
</dd>
<dt class="hdlist1">effort="NUMBER"</dt>
<dd>
<p>The level of effort assigned to this resource.</p>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>effort="2"</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect5">
<h6 id="_hint_element_child_elements">hint Element: Child Elements</h6>
<div class="dlist">
<dl>
<dt class="hdlist1">xref</dt>
<dd>
<p>Identify or classify links to informational content. See the section on <a href="#link-syntax">link Syntax</a> for details.</p>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>link href="http://java-x.blogspot.com/2009/03/invoking-web-services-through-proxy.html" description="JAX-WS Proxy Password Example"/&gt;</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="xslt-syntax">7.3.4. xslt Syntax</h4>
<div class="sect4">
<h5 id="_summary_8">Summary</h5>
<div class="paragraph">
<p>The <code>xslt</code> element specifies how to transform an XML file. For a better understanding of the <code>xslt</code> action, see the JavaDoc for the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/rules/apps/xml/operation/xslt/XSLTTransformation.html">XSLTTransformation</a>  class.</p>
</div>
<div class="paragraph">
<p>The following is an example of rule that defines an XSLT action.</p>
</div>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;rule id="XmlWebLogicRules_6bcvk"&gt;
    &lt;when&gt;
        &lt;xmlfile as="default" matches="/weblogic-ejb-jar"/&gt;
    &lt;/when&gt;
    &lt;perform&gt;
        &lt;iteration&gt;
            &lt;classification classification="Weblogic EJB XML" effort="3"/&gt;
            &lt;xslt description="JBoss EJB Descriptor (Windup-Generated)" template="transformations/xslt/weblogic-ejb-to-jboss.xsl" extension="-jboss.xml"/&gt;
        &lt;/iteration&gt;
    &lt;/perform&gt;
&lt;/rule&gt;</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_construct_an_xslt_element">Construct an xslt Element</h5>
<div class="sect5">
<h6 id="_xslt_element_attributes">xslt Element:  Attributes</h6>
<div class="dlist">
<dl>
<dt class="hdlist1">of="STRING"</dt>
<dd>
<p>Create a new transformation for the given reference.</p>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>of="testVariable_instance"</pre>
</div>
</div>
</dd>
<dt class="hdlist1">description="String"</dt>
<dd>
<p>Sets the description of this XSLTTransformation.</p>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>description="XSLT Transformed Output"</pre>
</div>
</div>
</dd>
<dt class="hdlist1">extension="String"</dt>
<dd>
<p>Sets the extension for this XSLTTransformation.</p>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>extension="-result.html"</pre>
</div>
</div>
</dd>
<dt class="hdlist1">template=String</dt>
<dd>
<p>Sets the XSL template.</p>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>template="simpleXSLT.xsl"</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect5">
<h6 id="_xslt_element_child_elements">xslt Element: Child Elements</h6>
<div class="dlist">
<dl>
<dt class="hdlist1">xslt-parameter=Map&lt;String,String&gt; </dt>
<dd>
<p>Specify XSLTTransformation parameters as property value pairs</p>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;xslt-parameter property="title" value="EJB Transformation"/&gt;</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="lineitem-syntax">7.3.5. lineitem Syntax</h4>
<div class="sect4">
<h5 id="_summary_9">Summary</h5>
<div class="paragraph">
<p>The <code>lineitem</code> element is used to provide line item information about a hint on the project or application overview page. For a better understanding of the <code>lineitem</code> action, see the JavaDoc for the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/project/operation/LineItem.html">Lineitem</a> class.</p>
</div>
<div class="paragraph">
<p>The following is an example of a rule that creates a lineitem message.</p>
</div>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;rule&gt;
    &lt;when&gt;
        &lt;javaclass references="weblogic.servlet.annotation.WLServlet" as="default"&gt;
            &lt;location&gt;ANNOTATION&lt;/location&gt;
        &lt;/javaclass&gt;
    &lt;/when&gt;
    &lt;perform&gt;
        &lt;hint message="Replace the proprietary WebLogic @WLServlet annotation with the Java EE 6 standard @WebServlet annotation." effort="1"&gt;
            &lt;link href="https://access.redhat.com/articles/1249423" description="Migrate WebLogic Proprietary Servlet Annotations" /&gt;
            &lt;lineitem message="Proprietary WebLogic @WLServlet annotation found in file."/&gt;
        &lt;/hint&gt;
    &lt;/perform&gt;
&lt;/rule&gt;</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_construct_a_lineitem_element">Construct a lineitem Element</h5>
<div class="sect5">
<h6 id="_lineitem_element_attributes">lineitem Element:  Attributes</h6>
<div class="dlist">
<dl>
<dt class="hdlist1">message="MESSAGE"</dt>
<dd>
<p>A lineitem message</p>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>message="Proprietary code found."</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="iteration-syntax">7.3.6. iteration Syntax</h4>
<div class="sect4">
<h5 id="_summary_10">Summary</h5>
<div class="paragraph">
<p>The <code>iteration</code> element specifies to iterate over an implicit or explicit variable defined within the rule. For a better understanding of the <code>iteration</code> action, see the JavaDoc for the <a href="http://windup.github.io/windup/docs/latest/javadoc/org/jboss/windup/config/operation/Iteration.html">Iteration</a> class.</p>
</div>
<div class="paragraph">
<p>The following is an example of a rule that preforms an iteration.</p>
</div>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>&lt;rule id="XmlWebLogicRules_14wscy"&gt;
     &lt;when&gt;
         &lt;xmlfile as="1" matches="/wl:weblogic-webservices | /wl9:weblogic-webservices"&gt;
             &lt;namespace prefix="wl9" uri="http://www.bea.com/ns/weblogic/90"/&gt;
             &lt;namespace prefix="wl" uri="http://www.bea.com/ns/weblogic/weblogic-webservices"/&gt;
         &lt;/xmlfile&gt;
         &lt;xmlfile as="2" matches="//wl:webservice-type | //wl9:webservice-type" from="1"&gt;
             &lt;namespace prefix="wl9" uri="http://www.bea.com/ns/weblogic/90"/&gt;
             &lt;namespace prefix="wl" uri="http://www.bea.com/ns/weblogic/weblogic-webservices"/&gt;
         &lt;/xmlfile&gt;
     &lt;/when&gt;
     &lt;perform&gt;
         &lt;iteration over="1"&gt;
             &lt;classification classification="Weblogic Webservice Descriptor" effort="0"/&gt;
         &lt;/iteration&gt;
         &lt;iteration over="2"&gt;
             &lt;hint message="Webservice Type" effort="0"/&gt;
         &lt;/iteration&gt;
     &lt;/perform&gt;
 &lt;/rule&gt;</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_construct_an_iteration_element">Construct an iteration Element</h5>
<div class="sect5">
<h6 id="_iteration_element_attributes">iteration Element:  Attributes</h6>
<div class="dlist">
<dl>
<dt class="hdlist1">over="NUMBER"</dt>
<dd>
<p>??</p>
<div class="paragraph">
<p><em>Example:</em></p>
</div>
<div class="literalblock">
<div class="content">
<pre>over="2"</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect5">
<h6 id="_iteration_element_child_elements">iteration Element: Child Elements</h6>
<div class="paragraph">
<p>iteration child elements include a <code>when</code> condition, along with the actions <code>iteration</code>, <code>classification</code>, <code>hint</code>, <code>xslt</code>, <code>lineitem</code>, and <code>otherwise</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Rules-Test-an-XML-Rule-In-Windup">7.4. Test an XML Rule in Windup</h3>
<div class="sect3">
<h4 id="_add_the_rule_to_windup">7.4.1. Add the Rule to Windup</h4>
<div class="paragraph">
<p>A Windup rule is installed simply by copying the rule to the appropriate Windup folder. Windup scans for rules in the following locations for files ending with <code><strong>.windup.groovy</code> and <code></strong>.windup.xml</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The directory specified in the <code>--userRulesDirectory</code> option to the <code>windup-migrate-app</code>.</p>
</li>
<li>
<p>The <code>WINDUP_HOME/rules/</code> directory.</p>
<div class="paragraph">
<p><code>WINDUP_HOME</code> is the directory where you run the Windup executable (see <a href="#About-the-WINDUP_HOME-Variable">here</a>).</p>
</div>
</li>
<li>
<p>The <code>${user.home}/.windup/rules/</code> directory.</p>
<div class="paragraph">
<p>The <code>${user.home}/.windup</code> is a directory created by Windup at first run and contains rules, add-ons, and the Windup log.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>For Linux or Mac:   ~/.windup/rules/
For Windows: "\Documents and Settings\USER_NAME\.windup\rules\"  -or-  "\Users\USER_NAME\.windup\rules\"</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_test_the_xml_rule">7.4.2. Test the XML Rule</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If you have not started Windup, follow the instructions to <a href="#Execute-Windup">Execute Windup</a>.</p>
</li>
<li>
<p>Test the XML rule against your application file by running the <code>windup-migrate-app</code> command in the Windup console prompt.</p>
<div class="paragraph">
<p>The command uses this syntax:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>windup-migrate-app [--sourceMode true] --input INPUT_ARCHIVE_OR_FOLDER --output OUTPUT_REPORT_DIRECTORY --packages PACKAGE_1 PACKAGE_2 PACKAGE_N</pre>
</div>
</div>
<div class="paragraph">
<p>You should see the following result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>***SUCCESS*** Windup report created: OUTPUT_REPORT_DIRECTORY/index.html</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_additional_resources">7.4.3. Additional Resources</h4>
<div class="ulist">
<ul>
<li>
<p>For more information and examples of how to run Windup, see: <a href="#Execute-Windup">Execute Windup</a></p>
</li>
<li>
<p>Working examples of XML-based rules can be found on GitHub in the <a href="https://github.com/windup/windup/">Windup source code</a> GitHub repository and the Windup quickstarts <a href="https://github.com/windup/windup-quickstarts/">GitHub repository</a> or <a href="https://github.com/windup/windup-quickstarts/releases">latest release ZIP download</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_core_developer_topics">8. Core Developer topics</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Dev-Windup-Bootstrap">8.1. Windup Bootstrap</h3>
<div class="paragraph">
<div class="title">DRAFT</div>
<p>This section describes how Windup starts up, finds the resources, loads the rules, and executes them.</p>
</div>
<div class="sect3">
<h4 id="_boot">8.1.1. Boot</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>@Inject WindupProcessor</code></p>
<div class="listingblock">
<div class="content">
<pre>CDI instantiates `WindupProcessorImpl`</pre>
</div>
</div>
</li>
<li>
<p>Create <code>WindupProcessorConfig</code></p>
</li>
<li>
<p>WindupProcessorImpl.execute( WindupProcessorConfig )</p>
<div class="listingblock">
<div class="content">
<pre>WindupProcessorImpl instantiates `@Inject GraphContext graphContext`, which holds
graph-related objects.</pre>
</div>
</div>
</li>
<li>
<p><code>GraphContextFactoryImpl</code>:</p>
<div class="listingblock">
<div class="content">
<pre>`create()`
`@Produces GraphContext produceGraphContext()`</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_graphcontext">8.1.2. GraphContext</h4>

</div>
<div class="sect3">
<h4 id="_rulesubset">8.1.3. RuleSubset</h4>

</div>
<div class="sect3">
<h4 id="_frames_creation">8.1.4. Frames creation</h4>
<div class="paragraph">
<p>In the <code>GraphContextImpl</code> constructor. For additonal method Handlers,
see</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">final Module addModules = new Module()
{
    @Override
    public Graph configure(Graph baseGraph, FramedGraphConfiguration config)
    {
        config.setFrameClassLoaderResolver(fclr);
        // Java Handlers
        config.addMethodHandler(new FrameMapHandler());
        config.addMethodHandler(new MapInPropertiesHandler());
        config.addMethodHandler(new MapInAdjacentPropertiesHandler());
        return baseGraph;
     }
};</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_classloading_notes">8.2. Classloading Notes</h3>
<div class="paragraph">
<div class="title">DRAFT</div>
<p><em>Page contains temporary notes, to be edited.</em></p>
</div>
<div class="paragraph">
<p>This covers the specific situations when the Windup core developer needs to look up certain runtime classes. Does not relate to rules authoring.</p>
</div>
<div class="sect3">
<h4 id="_forge_add_ons_transitive_dependencies">8.2.1. Forge add-ons transitive dependencies</h4>
<div class="paragraph">
<p>Let A depend on B depend on C.
Depending on scope of C in B&#8217;s POM:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;scope&gt;provided&lt;/scope&gt;</pre>
</div>
</div>
<div class="paragraph">
<p><code>provided</code> will NOT export C, so A depending on B won&#8217;t see C&#8217;s classes.
Only <code>compile</code> scope is exported.
<code>compile</code> will export C, so A depending on B will also see C&#8217;s classes.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>provided</code> == import</p>
</li>
<li>
<p><code>compile</code> == import &amp; export</p>
</li>
<li>
<p><code>optional</code> == optional, not installed automatically</p>
</li>
<li>
<p><code>runtime</code> == export only</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_finding_classes">8.2.2. Finding classes</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">AddonRegistry.getServices(MyServiceInterface.class)

// To get the AddonRegistry, use Windup's FurnaceHolder:
FurnaceHolder.getFurnace().getAddonRegistry().getServices(MyServiceInterface.class);</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Inject Imported&lt;MyServiceInterface.class) imported;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_instantiating">8.2.3. Instantiating</h4>
<div class="paragraph">
<p>If you want something from the current add-on, you can simply @Inject the type you wish to use. Alternately you can @Inject an Imported&lt;T&gt; instance, or also @Inject the AddonRegistry itself.</p>
</div>
</div>
<div class="sect3">
<h4 id="_which_classloader_is_used_always_the_one_of_the_current_code">8.2.4. Which ClassLoader is used? Always the one of the current code?</h4>
<div class="paragraph">
<p>Depends, if you are in a Furnace Service, then yes, it will use the current code&#8217;s add-on ClassLoader.</p>
</div>
</div>
<div class="sect3">
<h4 id="_reading_annotations_from_classes">8.2.5. Reading annotations from classes</h4>
<div class="paragraph">
<p>Since classes can be proxied by Forge/Furnace, it&#8217;s safer to read annotations using <code>Annotations API</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Rules annotation = Annotations.getAnnotation(this.getClass(), Rules.class);</pre>
</div>
</div>
<div class="paragraph">
<p>Supposedly, Furnace proxies should also be able to handle such call:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Rules annotation1 = ((FurnaceProxy) proxy).getOriginalClass().getAnnotation(Rules.class);</pre>
</div>
</div>
<div class="paragraph">
<p>TO_DO: Find out how exactly this is done.</p>
</div>
</div>
<div class="sect3">
<h4 id="_how_do_i_know_if_i_am_in_a_furnace_service">8.2.6. How do I know if I am in a Furnace service?</h4>
<div class="paragraph">
<p>Every furnace service is wrapped in a proxy. If it came from another
add-on (not your current add-on) and was not instantiated with new Blah(),
you are in a furnace service. So if it was <code>@Inject`ed or retrieved via
`addonRegistry.getServices(&#8230;&#8203;)</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>(16:32:40) jsightler: ozizka: I do like a Resource.open(...) type API -- that sounds like a good idea.
(16:32:57) LincolnBaxter: ozizka: unless you use the TCCL (which you shouldn't in a modular environment), then using the class's own classloader is the best solution for that situation
(16:33:41) LincolnBaxter: ozizka: using a shared Resource.open() APi will actually be sort of a no-op, and just introduce another layer, since you generally need to be able to specify a classloader anyway
(16:33:53) jsightler: lincolnthree: Well...
(16:34:09) LincolnBaxter: ozizka: unless I'm misunderstanding the point of this
(16:34:10) jsightler: lincolnthree: In windup we frequently need resources from the caller's add-on
(16:34:18) LincolnBaxter: ozizka: ah wait
(16:34:27) LincolnBaxter: ozizka: the *caller*'s classloader
(16:34:35) LincolnBaxter: ozizka: not the CL of the current operation
(16:34:44) LincolnBaxter: ozizka: that's different. hmm
(16:35:11) ozizka-FN: Right
(16:35:18) ozizka-FN: Actually that's what I wanted to ask -
(16:35:21) jsightler: We deal with this in an ad-hoc way at the moment... it might be nice to have a centralized service that does it.
(16:35:25) ozizka-FN: which classloader is used?
(16:35:33) ozizka-FN: Always the one of the current code?
(16:35:44) ozizka-FN: Implicitly
(16:35:54) LincolnBaxter: ozizka: depends, if you are in a Furnace Service, then yes, it will use the current code's add-on's classloader
(16:36:00) ozizka-FN: Ah
(16:36:11) ozizka-FN: How do I know if I am in a Furnace service?
(16:36:14) LincolnBaxter: ozizka: because every furnace service is wrapped in a proxy
(16:36:31) LincolnBaxter: ozizka: basically if it came from another add-on (not your current add-on), you are in a furnace service
(16:36:43) LincolnBaxter: ozizka: and if you didn't instantiate with new Blah()
(16:37:00) LincolnBaxter: ozizka: so if it was @Injected or retrieved via addonRegistry.getServices(...)
(16:37:43) LincolnBaxter: jsightler: ozizka: mbriskar: why do we need the classloader of the calling add-on? just curious
(16:37:54) ozizka-FN: So here we would use TCCL right?
LincolnBaxter lincolnthree
(16:38:28) ozizka-FN: lincolnthree:  To load it's resources
(16:38:31) ozizka-FN: from other add-on
(16:38:32) ozizka-FN: .
(16:38:35) ozizka-FN: Or is there other way?
(16:38:42) LincolnBaxter: ozizka: that's a vague statement ;)
(16:38:48) LincolnBaxter: ozizka: where is *here*?
(16:38:56) LincolnBaxter: ozizka: the best way is to pass the actual classloader you want to use
(16:39:01) ozizka-FN: For this use case. For the Resource.open()
LincolnBaxter lincolnthree
(16:39:21) ozizka-FN: lincolnthree, right, but well, putting classloading code into rules...
(16:39:25) ozizka-FN: Not user friendly</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_resources_loading">8.2.7. Resources loading</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>(16:48:30) ozizka-FN: lincolnthree:  Just a note - the potential collisions caused  by add-on's CL span is not considered as a risk?
(16:49:25) ozizka-FN: I mean, it could load the file from it's deps.
(16:49:36) ozizka-FN: * file = resource
(16:49:50) LincolnBaxter: ozizka1: so the way it works is actually very controlled
(16:50:06) LincolnBaxter: ozizka1: classloader will always attempt to load its own resources before loading from another add-on
(16:50:23) LincolnBaxter: ozizka1: at which point the order is determined by the order of the add-on dependency in the POM

(16:53:26) ozizka-FN: Q: Unwrapping proxies caused the code in invoke() not actually being called?
(16:53:32) ozizka-FN: Since the method calls were not intercepted?
(16:54:09) LincolnBaxter: ozizka1: exactly :)

(16:54:10) ozizka-FN: lincolnthree, Is that impl a real TCCL or just TCCL-like concept?
(16:54:29) LincolnBaxter: ozizka1: what do you mean "real" ?
(16:54:51) ozizka-FN: Not sure about how TCCL is implemented, I thought you'd need to call something like
(16:54:52) ozizka-FN: Thread.currentThread().setContextClassLoader(classLoader);
(16:54:56) LincolnBaxter: ozizka1: also if you are interested in where the resource loading / ordering is controlled —&gt; https://github.com/forge/furnace/blob/master/container/src/main/java/org/jboss/forge/furnace/impl/modules/AddonModuleLoader.java#L194
(16:55:01) jsightler: lincolnthree: I wondered that too :)
(16:55:30) LincolnBaxter: ozizka1: jsightler, actually it does: https://github.com/forge/furnace/blob/master/proxy/src/main/java/org/jboss/forge/furnace/proxy/ClassLoaderInterceptor.java#L103
(16:55:55) LincolnBaxter: ozizka1: jsightler: https://github.com/forge/furnace/blob/master/container-api/src/main/java/org/jboss/forge/furnace/util/ClassLoaders.java#L27

(16:56:57) ozizka-FN: Hm, ok so I guess if we dug deeper, it would eventually come to Thread.currentThread().setContextClassLoader(classLoader); ?
(16:57:15) LincolnBaxter: ozizka1: yep: https://github.com/forge/furnace/blob/master/container-api/src/main/java/org/jboss/forge/furnace/util/SecurityActions.java#L71</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_furnace_proxies">Furnace Proxies:</h5>
<div class="paragraph">
<p><a href="https://github.com/forge/furnace/blob/master/proxy/src/main/java/org/jboss/forge/furnace/proxy/Proxies.java#L15" class="bare">https://github.com/forge/furnace/blob/master/proxy/src/main/java/org/jboss/forge/furnace/proxy/Proxies.java#L15</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_what_classloader_is_used_by_freemarker_to_load_resources">8.2.8. What classloader is used by Freemarker to load resources?</h4>
<div class="paragraph">
<p><code>org.jboss.windup.reporting.freemarker.FurnaceFreeMarkerTemplateLoader</code></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Connect-to-the-Graph-via-Rexster">8.3. Connect to the Graph via Rexster</h3>
<div class="paragraph">
<p>There is a specific add-on for running Rexster along your graph with
groupId <strong>org.jboss.windup.rexster</strong> and <strong>artifactId</strong> Rexster.</p>
</div>
<div class="sect3">
<h4 id="_running_rexster_within_your_test">8.3.1. Running Rexster Within Your Test</h4>
<div class="paragraph">
<p>Deploy the Rexster add-on by adding the Rexster add-on to the dependencies.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Deployment
    @Dependencies({
                ....
                @AddonDependency(name = "org.jboss.windup.rexster:rexster", version = "2.0.0-SNAPSHOT"),
                ....
    })</pre>
</div>
</div>
<div class="paragraph">
<p>Then put some debug breakpoint in the specific phase of graph you are interested in and browse <a href="http://localhost:8182/" class="bare">http://localhost:8182/</a> to enjoy the graph! Username and password: rexster</p>
</div>
</div>
<div class="sect3">
<h4 id="_run_rexster_within_windup">8.3.2. Run Rexster within Windup</h4>
<div class="paragraph">
<p>Make sure the Rexster add-on is deployed in Furnace and is accessible on <a href="http://localhost:8182/" class="bare">http://localhost:8182/</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>username: rexster
password: rexster</pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Decompiling">8.4. Decompiling</h3>
<div class="sect3">
<h4 id="_the_strong_decompiler_strong_api">8.4.1. The <strong>Decompiler</strong> API</h4>
<div class="ulist">
<div class="title">DRAFT</div>
<ul>
<li>
<p>The 3 main use cases for the decompiler API are to process:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Directories</p>
</li>
<li>
<p>JARS or Archives</p>
</li>
<li>
<p>Class files</p>
</li>
</ol>
</div>
</li>
<li>
<p>The  <code>DecompilerConfig</code> should also contain <code>Filter&lt;String&gt;</code> (or maybe <code>Filter&lt;TypeReference&gt;</code>) to decide whether to decompile the class or not.</p>
</li>
<li>
<p><code>windup.ProcyonConfiguration</code> should extend abstract windup.DecompilerConfig&lt;T&gt;, which would contain the configurables common to all decompilers. In case of Procyon, <code>outputDir</code> would be delegated to <code>procyon.DecompilerSettings</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_procyon">8.4.2. Procyon</h4>
<div class="sect4">
<h5 id="_config">Config</h5>
<div class="ulist">
<ul>
<li>
<p><code>windup.ProcyonConfiguration</code> contains <code>procyon.DecompilerSettings</code>.</p>
</li>
<li>
<p><code>procyon.DecompilerSettings</code> contains <code>outputDir</code> (the others are not much important).
TO_DO: Make that a parameter to method call?</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_typereference">TypeReference</h5>
<div class="paragraph">
<p>TO_DO: Check how we get info about Java files; perhaps cache the <code>TypeReference</code> results - if worth it?</p>
</div>
</div>
<div class="sect4">
<h5 id="_itypeloader">ITypeLoader</h5>
<div class="ulist">
<ul>
<li>
<p><code>JarTypeLoader</code> - iterates a <code>JarFile</code>, expects a .jar <code>File</code> as input.</p>
</li>
<li>
<p><code>ClasspathTypeLoader</code> - loads classes from a list of classes.</p>
</li>
<li>
<p><code>ClasspathTypeLoader("some/path:other/path")</code></p>
</li>
<li>
<p><code>ClasspathTypeLoader()</code> &#8594; sysprop("java.class.path") : sysprop("sun.boot.class.path")</p>
</li>
<li>
<p><code>InputTypeLoader</code></p>
</li>
<li>
<p><code>CompoundTypeLoader</code> - 2 typeloaders, queried in succession</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>TO_DO: Create a simple <code>FileSystemTypeLoader</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Dependencies">8.5. Dependencies (Forge add-ons)</h3>
<div class="paragraph">
<div class="title">DRAFT</div>
<p><em>Based on
<a href="https://github.com/OndraZizka/windup/commit/3574e81900cbad2b3a83d0bd6c263eb22c48e55e">this</a>
discussion.</em></p>
</div>
<div class="sect3">
<h4 id="_maven_add_on_structure">8.5.1. Maven Add-on Structure</h4>
<div class="paragraph">
<p>The following is the typical structure of Maven <code>add-on</code> modules.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>my-add-on-parent
+--- my-add-on - jar, classifier: forge-addon
+--- my-add-on-api - jar
+--- my-add-on-impl - jar
+--- my-add-on-tests - jar</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>add-on</code> POM file can declare dependencies on other forge-addons.
To prevent exporting the add-on to dependent modules, use <code>&lt;optional&gt;true&lt;/optional&gt;</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.forge.furnace.container&lt;/groupId&gt;
    &lt;artifactId&gt;cdi&lt;/artifactId&gt;
    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;optional&gt;true&lt;/optional&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>add-on</code> POM files may also declare a dependency on typical Maven artifacts.
To prevent exporting the add-on to dependent modules, use <code>&lt;optional&gt;true&lt;/optional&gt;</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;com.thinkaurelius.titan&lt;/groupId&gt;
    &lt;artifactId&gt;titan-lucene&lt;/artifactId&gt;
    &lt;version&gt;${version.titangraph.lucene}&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>One more question regarding dependencies. Is it advisable to depend on the`forge-addon`
artifact from add-on&#8217;s subparts?</em></p>
</div>
<div class="paragraph">
<p>Add-ons should reference the <code>&lt;classifier&gt;forge-addon&lt;/classifier&gt;</code>
artifact from other add-ons.</p>
</div>
</div>
<div class="sect3">
<h4 id="_add_on_sub_parts">8.5.2. Add-on sub-parts</h4>
<div class="paragraph">
<p>Add-on sub-parts declare dependency preferably on forge add-on APIs, not
on the add-ons themselves, wherever possible (wherever an add-on has an
explicit API). These dependencies must be marked as <code>provided</code> scope.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.forge.furnace.container&lt;/groupId&gt;
    &lt;artifactId&gt;cdi-api&lt;/artifactId&gt;
    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>They may instead depend on the primary add-on dependency, e.g.
<code>forge-addon</code>. The latter makes the POM files simpler, but can be confusing,
because the add-on dependency still needs to be declared in the depending
add-on&#8217;s POM.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.forge.furnace.container&lt;/groupId&gt;
    &lt;artifactId&gt;cdi-api&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Declaring a <code>forge-addon</code> depencendy anywhere else than the
<code>forge-addon</code> pom doesn&#8217;t actually cause Furnace to establish an add-on
dependency. I.e. classes from the dep won&#8217;t be available unless you
declare it in the `forge-addon&#8217;s pom.</p>
</div>
<div class="paragraph">
<p>Add-on&#8217;s sub-parts may also declare dependencies on other normal maven
dependencies, and these are treated as normal.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Add-on depends on API , scope <code>compile</code> &gt; Add-on
depends on Impl , scope <code>compile</code> with <code>&lt;optional&gt;true&lt;/optional&gt;</code> -
prevents exporting this dependency to consumers of the add-on.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_test_dependencies">8.5.3. Test dependencies</h4>
<div class="paragraph">
<p>For test dependencies on add-ons: Any add-on/sub-part requiring an add-on
for testing purposes should use <code>&lt;scope&gt;test&lt;/scope&gt;</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.windup.graph&lt;/groupId&gt;
    &lt;artifactId&gt;windup-graph&lt;/artifactId&gt;
    &lt;version&gt;${project.version}&lt;/version&gt;
    &lt;classifier&gt;forge-addon&lt;/classifier&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_dependencies_between_sub_parts_within_the_same_add_on">8.5.4. Dependencies between sub-parts within the same add-on</h4>
<div class="paragraph">
<p>Subpart may declare dependency on other subpart. E.g. <code>impl</code> typically
depends on <code>api</code>. In that case, the scope should be set appropriately
for the given situation - typically <code>provided</code> or <code>compile</code> scope.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-xml" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.windup.graph&lt;/groupId&gt;
    &lt;artifactId&gt;windup-graph-api&lt;/artifactId&gt;
    &lt;scope&gt;compile&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Frames-Extensions">8.6. Frames Extensions</h3>
<div class="paragraph">
<p>Windup has several Frames extensions to satisfy its needs.</p>
</div>
<div class="sect3">
<h4 id="_multiple_types_in_a_vertex">8.6.1. Multiple Types in a Vertex</h4>
<div class="paragraph">
<p>Frames stores only one type in the <em>type</em> property. To specify multiple types, use the '|' separator. All sub-parts are indexed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_map_handler">8.6.2. Map Handler</h4>
<div class="paragraph">
<p>TBD</p>
</div>
<div class="paragraph">
<p>To store a map in a single vertexes properties.</p>
</div>
</div>
<div class="sect3">
<h4 id="_map">8.6.3. Map</h4>
<div class="paragraph">
<p>To store a map in as adjacent vertices.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@TypeValue("MapModelMain")
public interface MapMainModel extends WindupVertexFrame
{
    @AdjacentMap(label = "map") void setMap(Map&lt;String, MapValueModel&gt; map);
    @AdjacentMap(label = "map") Map&lt;String, MapValueModel&gt; getMap();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the <code>FrameMapHandlerTest</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_list_handler">8.6.4. List handler.</h4>
<div class="paragraph">
<p>TBD.</p>
</div>
<div class="paragraph">
<p>To store a list of strings in a single vertexes properties.
The keys will be 0, 1, 2, 3, &#8230;&#8203;</p>
</div>
</div>
<div class="sect3">
<h4 id="_list">8.6.5. List</h4>
<div class="paragraph">
<p><code>WindupVertexListModel</code> offers a generic model for lists of other
models, which are stored as adjacent vertices.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Internal-API-Features">8.7. Internal API Features</h3>
<div class="sect3">
<h4 id="_find_the_ruleprovider_that_provided_a_rule">8.7.1. Find the RuleProvider that provided a Rule</h4>
<div class="paragraph">
<p>A <code>Rule</code> implements <code>Context</code>, which stores metadata. The following example gets the RuleProvider from the Rule context.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">WindupRuleProvider ruleProvider =
     (WindupRuleProvider) context.get(RuleMetadata.RULE_PROVIDER);</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information about the metadata stored in the context, see <a href="#Rules-Metadata">Rules Metadata</a></p>
</div>
</div>
<div class="sect3">
<h4 id="_in_memory_frames">8.7.2. In-memory Frames</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">GraphService&lt;FooModel&gt; fooModelService = context.getService(FooModel.class);
FooModel inMemoryModel = fooModelService.create();</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_performance_measurement">8.7.3. Performance measurement</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ExecutionStatistics.get().begin("Process-01");
// ... your code to be timed goes here
ExecutionStatistics.get().end("Process-01");</code></pre>
</div>
</div>
<div class="paragraph">
<p>The results goes to <code>stats/detailed_stats.csv</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Logging">8.8. Logging</h3>
<div class="paragraph">
<div class="title">DRAFT</div>
<p><em>This page describes how to log from the Java-based rules.</em></p>
</div>
<div class="sect3">
<h4 id="_textual_logging">8.8.1. Textual logging</h4>
<div class="paragraph">
<p>Windup uses <code>java.util.logging</code>. Convenient way to get the logger is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">private static final Logger LOG = Logging.get(MyClass.class);</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_displaying_progress">8.8.2. Displaying Progress</h4>
<div class="paragraph">
<p>IterationProgress</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">return ConfigurationBuilder.begin().addRule()
            .when(Query.find(ArchiveModel.class))
            .perform(UnzipArchiveToOutputFolder.unzip()
            .and(IterationProgress.monitoring("Unzipped archive: ", 1))
            .and(Commit.every(1))
            );</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Variables-Stack">8.9. Variables Stack</h3>
<div class="paragraph">
<div class="title">DRAFT</div>
<p>The <code>Variables</code> class stores the variables which are available in rules, EL expressions, and FreeMarker and XSLT templates.</p>
</div>
<div class="sect3">
<h4 id="_accessing_variables">8.9.1. Accessing variables</h4>
<div class="sect4">
<h5 id="_from_a_java_based_rule">From a Java-based rule</h5>
<div class="paragraph">
<p>TO_DO: Describe how to access variables from a Java-based rule.</p>
</div>
</div>
<div class="sect4">
<h5 id="_from_a_groovy_based_rule">From a Groovy-based rule</h5>
<div class="paragraph">
<p>TO_DO: Describe how to access variables from a Groovy-based rule.</p>
</div>
</div>
<div class="sect4">
<h5 id="_from_an_el_expression">From an EL expression</h5>
<div class="paragraph">
<p>TO_DO: Describe how to access variables from an EL expression.</p>
</div>
</div>
<div class="sect4">
<h5 id="_from_a_freemarker">From a FreeMarker</h5>
<div class="paragraph">
<p>TO_DO: Describe how to access variables from a FreeMarker.</p>
</div>
</div>
<div class="sect4">
<h5 id="_from_xslt_template">From XSLT template</h5>
<div class="paragraph">
<p>TO_DO: Describe how to access variables from an XSLT template.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_accessing_variables_as_a_flat_code_map_code">8.9.2. Accessing variables as a flat <code>Map</code></h4>
<div class="paragraph">
<p>TO_DO: Describe how to access variables from a Map.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Git-Rebasing">8.10. Git Rebasing</h3>
<div class="paragraph">
<p>This section describes a few ways you can pull in the code to rebase to the latest code base.</p>
</div>
<div class="sect3">
<h4 id="_approach_suggested_on_github">8.10.1. Approach Suggested on GitHub</h4>
<div class="paragraph">
<p>This is the approach suggested on GitHub.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Checkout the source:</p>
<div class="listingblock">
<div class="content">
<pre>git checkout -b lincolnthree-WINDUP-133 master
git pull https://github.com/lincolnthree/windup.git WINDUP-133</pre>
</div>
</div>
</li>
<li>
<p>Run the tests to make sure it builds.</p>
<div class="listingblock">
<div class="content">
<pre>mvn clean install</pre>
</div>
</div>
</li>
<li>
<p>If they pass, merge and push them to your repository.</p>
<div class="listingblock">
<div class="content">
<pre>git checkout master
git merge --no-ff lincolnthree-WINDUP-133
git push origin master</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_script_provided_by_the_windup_development_team">8.10.2. Script Provided by the Windup Development Team</h4>
<div class="paragraph">
<p>Ondra Zizka wrote the following script to bring down a series of pull requests into a
single branch. It then pushes that branch to upstream master-ignore.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Bring down the pulls into a single branch.</p>
<div class="listingblock">
<div class="content">
<pre>pull() {
  cmd="git fetch upstream master "
  for PR in "$@"
  do
    cmd="$cmd pull/$PR/head:pullRequest$PR"
  done

  $cmd

  git branch -D pulls
  git checkout master
  git rebase upstream/master
  git checkout -b pulls

  for PR in "$@"
    do
    git checkout pullRequest$PR
    git rebase pulls
    git checkout pulls
    git merge pullRequest$PR
    git branch -D pullRequest$PR
  done
}</pre>
</div>
</div>
</li>
<li>
<p>Fetch using the one pull request.</p>
<div class="listingblock">
<div class="content">
<pre>git fetch upstream master pull/$PR/head:pullRequest$PR</pre>
</div>
</div>
</li>
<li>
<p>The branch is now updated with the latest source.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rules_topics">9. Rules topics</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Rules-Available-Rules-Utilities">9.1. Available Rule Utilities</h3>
<div class="sect3">
<h4 id="_programmatically_access_the_graph">9.1.1. Programmatically Access the Graph</h4>
<div class="paragraph">
<p><em>Note: Needs update. This is out of date!</em></p>
</div>
<div class="paragraph">
<p>(Lower Level API, to cover cases not provided by high level API)</p>
</div>
<div class="paragraph">
<p>This topic describes how to to programmatically access or update graph data when you create a Java-based rule add-on.</p>
</div>
<div class="sect4">
<h5 id="_query_the_graph">Query the graph</h5>
<div class="paragraph">
<p>There are several ways - including Query API, Gremlin support, or
GraphService methods.</p>
</div>
<div class="sect5">
<h6 id="_query_the_graph_within_the_when_method">Query the Graph Within the .when() method</h6>
<div class="paragraph">
<p>Building a rule contains the method when(), which is used to create a
<strong>condition</strong>. Vertices that fulfill the condition, are passed to the
perform() method.</p>
</div>
<div class="paragraph">
<p>For the queries in the when() method, class Query is used. There are
several methods which you can use to specify the condition. For example:
* <strong>find()</strong> specifies the Model type of the vertex * <strong>as()</strong> method
specifies the name of the final list, that is passed to the perform()
method * <strong>from(String name)</strong> starts the query not on the all vertices,
but only on the vertices already stored in the the given <strong>name</strong> (used to
begin query on the result of the other one) * <strong>withProperty()</strong> specify
the property value of the given vertex</p>
</div>
<div class="paragraph">
<p>The following are examples of simple queries.</p>
</div>
<div class="paragraph">
<p>Return a list of archives</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Query.find(ArchiveModel.class)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Query.find(ApplicationReportModel.class).as(VAR_APPLICATION_REPORTS)</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_iteration_2">Iteration</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">ConfigurationBuilder.begin().addRule()
    .when(
        GraphSearchConditionBuilderGremlin.create("javaFiles", new ArrayList())
        .V().framedType( JavaFileModel.class ).has("analyze")
    )
    .perform(
        // For all java files...
        Iteration.over("javaFiles").var("javaFile").perform(</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_nested_iteration">Nested Iteration</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">code,java
// For all java files...
Iteration.over("javaFiles").var("javaFile").perform(
    // A nested rule.
    RuleSubset.evaluate(
        ConfigurationBuilder.begin().addRule()
        .when(...)
        .perform(
            Iteration.over("regexes").var(RegexModel.class, "regex").perform(
                new AbstractIterationOperator&lt;RegexModel&gt;( RegexModel.class, "regex" ) {
                    public void perform( GraphRewrite event, EvaluationContext context, RegexModel regex ) {
                        //...
                    }
                }
            )
            .endIteration()
        )// perform()
    )
)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_modify_graph_data">9.1.2. Modify Graph Data</h4>
<div class="paragraph">
<p>For more custom operations dealing with Graph data that are not covered by the <code>Query</code> mechanism, use the GraphService.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">GraphService&lt;FooModel&gt; fooService = new GraphService&lt;FooModel&gt;(graph,FooModel.class);

List&lt;FooModel&gt; = fooService.findAll();
FooModel = fooService.create();

// etc ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>GraphService&lt;&gt; can also be used to query the graph for models of the specified type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">FooModel foo = new GraphService&lt;&gt;(graphContext, FooModel.class).getUnique();</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">FooModel foo = new GraphService&lt;&gt;(graphContext, FooModel.class).getUniqueByProperty("size", 1);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Concepts-and-Philosophy">9.2. Concepts &amp; Philosophy</h3>
<div class="paragraph">
<p>TO_DO: - OZIZKA: Can this topic be marked obsolete and be replaced by this one: <a href="#Windup-Processing-Overview">Windup Processing Overview</a> ?_</p>
</div>
<div class="paragraph">
<p>Windup is a rule-based tool that allows users to write customized rules
based on the needs, constructs, and custom APIs used in their
applications.</p>
</div>
<div class="paragraph">
<p>Individual rules should be decoupled, only expressing what rules should precede and follow, and "communicate" through the graph. Each rule will query
the graph database, use the results for locating the candidates of it&#8217;s
interests, process them, and then write the results to the graph
database.</p>
</div>
<div class="sect3">
<h4 id="_graph_database_and_models_frames">9.2.1. Graph database and Models (Frames)</h4>
<div class="paragraph">
<p>As a graph db implementation, we use <a href="http://tinkerpop.com/">TinkerPop</a>
backed by <a href="http://thinkaurelius.github.io/titan/">Titan</a> backed by
BerkeleyDB. For explanation of graph database concepts, see
<a href="https://github.com/thinkaurelius/titan/wiki/Beginner%27s-Guide">Titan</a>.</p>
</div>
<div class="paragraph">
<p>Like there&#8217;s ORM (like JPA) for JDBC, TinkerPop&#8217;s BluePrints has
<a href="https://github.com/tinkerpop/frames/wiki">Frames</a>. This allows you to
access the graph data in form of your custom Java models (implemented as
Java Proxies to the querying).</p>
</div>
<div class="paragraph">
<p>We use this concept heavily. Each ruleset will likely have it&#8217;s own
models. (But you can opt to use Blueprints API if you like).</p>
</div>
<div class="paragraph">
<p>See also the list of <a href="#Rules-Windup-Models">Windup Models</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_examples_of_breaking_non_trivial_workflows_into_rules">9.2.2. Examples of breaking non-trivial workflows into rules</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Finding all <code>@Entity`s which use `org.hibernate</code> extensions.</p>
<div class="paragraph">
<p>TO_DO</p>
</div>
</li>
<li>
<p>Finding <em>MyBatis</em> DAOs and classes using them.</p>
<div class="paragraph">
<p>TO_DO</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Rules-Creating-Rule-Operations">9.3. Creating Rule Operations</h3>
<div class="paragraph">
<p>An operation is a task which can be invoked from within a rule.</p>
</div>
<div class="paragraph">
<p>It is created by extending GraphOperation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class FooOperation extends GraphOperation
{
    @Override
    public void perform(GraphRewrite event, EvaluationContext context)
    {
        ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Existing operations:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/GraphOperationSubtypes.png" alt="Existing operations"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="Rules-Rulesets">9.4. Rulesets</h3>
<div class="paragraph">
<p>DRAFT</p>
</div>
<div class="paragraph">
<p>Example page for design decisions. Could be generated automatically in the future.</p>
</div>
<div class="sect3">
<h4 id="_what_is_a_ruleset">9.4.1. What is a Ruleset?</h4>
<div class="paragraph">
<p>A ruleset is a Windup "plug-in" targetting a specific area of migration (e.g. Spring to Java EE 6 migration). Underhood, it is a set of rules, and everything they might need: Operations and Conditions, Report templates (if needed), and  static files (e.g. images, XML or CSV files, etc.).
A ruleset may also declare metadata, like ruleset ID, dependencies on other rulesets, etc.</p>
</div>
<div class="paragraph">
<p>xref:Ruleset-Java-Basic-Ruleset
Forge add-on (i.e. a <code>.jar</code> file).</p>
</div>
<div class="paragraph">
<p>Groovy-based ruleset is a directory with <code>.windup.groovy</code> script(s) and its static files, possibly in a <code>.zip</code> file.</p>
</div>
<div class="paragraph">
<p>See ? to read about how to create your own Ruleset.</p>
</div>
</div>
<div class="sect3">
<h4 id="_basic_tags">9.4.2. Basic tags</h4>
<div class="ulist">
<ul>
<li>
<p>app - denotes the rules which help migrating applications.</p>
</li>
<li>
<p>server - denotes the rules which help migrating server configuration.</p>
</li>
<li>
<p>java - denotes the rules treating Java source code.</p>
</li>
<li>
<p>java-ee - denotes the rules treating Java EE applications or Java EE
containers.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Besides that, you may use any custom tag.</p>
</div>
</div>
<div class="sect3">
<h4 id="_rulesets">9.4.3. Rulesets</h4>
<div class="sect4">
<h5 id="_core_rulesets">Core rulesets</h5>
<div class="paragraph">
<p>Rulesets distributed with Windup and maintained by the Windup team.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#Ruleset-Java-Basic-Ruleset">Java Basic Ruleset</a></p>
</li>
<li>
<p>Tags: java, app</p>
</li>
<li>
<p>Java EE Applications</p>
</li>
<li>
<p>java-ee, app</p>
</li>
<li>
<p>Java EE Servers</p>
</li>
<li>
<p>java-ee, server</p>
</li>
<li>
<p>Reporting</p>
<div class="ulist">
<ul>
<li>
<p>CreateApplicationReportIndexRuleProvider</p>
</li>
<li>
<p>CreateJavaApplicationOverviewReportRuleProvider</p>
</li>
<li>
<p>RenderSourceReportRuleProvider</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_community_rulesets">Community rulesets</h5>
<div class="paragraph">
<p>Rulesets contributed by Windup users.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Ruleset-Java-Basic-Ruleset">9.5. Java Basic Ruleset</h3>
<div class="paragraph">
<div class="title">DRAFT</div>
<p><em>This is an example page. Content serves for design decision.</em></p>
</div>
<div class="paragraph">
<p>Purpose of this ruleset.</p>
</div>
<div class="sect3">
<h4 id="_metadata_2">9.5.1. Metadata</h4>
<div class="paragraph">
<p><strong>ID:</strong> myRuleset
<strong>Graph prefix:</strong> myRuleset</p>
</div>
</div>
<div class="sect3">
<h4 id="_rule_providers">9.5.2. Rule providers</h4>
<div class="paragraph">
<p><em>A definition list (dl/dt/dd) of RuleProviders of given Ruleset.</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>JDKconfigRuleProvider</strong> - Targetted towards the classes distributed with JDK, like <code>java.lang.<strong></code>, <code>java.security.</strong></code>, <code>org.xml.*</code>, etc.</p>
</li>
<li>
<p><strong>FooRuleProvider</strong> - blah</p>
</li>
<li>
<p><strong>BarRuleProvider</strong> - blah</p>
</li>
<li>
<p><strong>Maven Project analysis</strong></p>
</li>
<li>
<p><strong>Seam 2.0 to CDI</strong></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_models">9.5.3. Models</h4>
<div class="ulist">
<ul>
<li>
<p>JavaClassModel</p>
</li>
<li>
<p>AmbiguousJavaClassModel</p>
</li>
<li>
<p>AmbiguousReferenceModel&lt;REFERENCETYPE&gt;</p>
</li>
<li>
<p>ClassificationModel</p>
</li>
<li>
<p>EjbBeanBaseModel</p>
</li>
<li>
<p>EjbEntityBeanModel</p>
</li>
<li>
<p>EjbMessageDrivenModel</p>
</li>
<li>
<p>EjbSessionBeanModel</p>
</li>
<li>
<p>HibernateConfigurationFileModel</p>
</li>
<li>
<p>HibernateEntityModel</p>
</li>
<li>
<p>HibernateMappingFileModel</p>
</li>
<li>
<p>HibernateSessionFactoryModel</p>
</li>
<li>
<p>InlineHintModel</p>
</li>
<li>
<p>JarArchiveModel</p>
</li>
<li>
<p>JarManifestModel</p>
</li>
<li>
<p>JavaClassFileModel</p>
</li>
<li>
<p>JavaClassModel</p>
</li>
<li>
<p>JavaMethodModel</p>
</li>
<li>
<p>JavaParameterModel</p>
</li>
<li>
<p>JavaSourceFileModel</p>
</li>
<li>
<p>JavaTypeReferenceModel</p>
</li>
<li>
<p>LinkModel</p>
</li>
<li>
<p>MavenProjectModel</p>
</li>
<li>
<p>PackageModel</p>
</li>
<li>
<p>ProjectDependencyModel</p>
</li>
<li>
<p>ProjectModel</p>
</li>
<li>
<p>PropertiesModel</p>
</li>
<li>
<p>SourceFileModel</p>
</li>
<li>
<p>SpringBeanModel</p>
</li>
<li>
<p>SpringConfigurationFileModel</p>
</li>
<li>
<p>WarArchiveModel</p>
</li>
<li>
<p>WebXmlModel</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_configuration">9.5.4. Configuration</h4>
<div class="ulist">
<ul>
<li>
<p><strong>--packages</strong> - Which packages to scan.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_reports">9.5.5. Reports</h4>

</div>
</div>
<div class="sect2">
<h3 id="Ruleset-Java-Classifications-and-Inline-Hints">9.6. Ruleset Java Classifications and Inline Hints</h3>
<div class="paragraph">
<div class="title">DRAFT</div>
<p>Some of the most important rules are <strong>classifications</strong> and <strong>inline hints</strong>.</p>
</div>
<div class="sect3">
<h4 id="_classifications">9.6.1. Classifications</h4>
<div class="paragraph">
<p>Classifications are important because they tell developers very quickly
<strong><em>what</em></strong> the resource is, so that they can quickly identify resources of
importance. For example, say you are responsible for migrating an
application from Weblogic to JBoss&#8230;&#8203; wouldn&#8217;t it be nice to know that
project is a Spring project? Wouldn&#8217;t it be nice to have the Weblogic
descriptors identified and called out to us? This is what classifiers
do. They identify resources, and add a classification to the resource.</p>
</div>
<div class="paragraph">
<p>Classifications are displayed both at the 10,000 foot view, main report
and also at the resource report level.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Java Classifications TO_DO: link</p>
</li>
<li>
<p>XML Classifications TO_DO: link</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_inline_hints">9.6.2. Inline Hints</h4>
<div class="paragraph">
<p>Windup takes the approach of profiling resources and providing
syntactically highlighted resource reports. The resource report will
show the resource with potentially highlighted lines that may contain
inline hints to help the developers migrate a piece of code.</p>
</div>
<div class="paragraph">
<p>Adding inline hints for Java and XML are as simple as adding Regular
Expressions or XPath Expressions to the Windup rules.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Ruleset-Java-EE-Apps">9.7. Ruleset Java EE Apps</h3>
<div class="paragraph">
<div class="title">DRAFT</div>
<p>TBD?</p>
</div>
<div class="paragraph">
<div class="title">DRAFT</div>
<p>TBD ?</p>
</div>
</div>
<div class="sect2">
<h3 id="Ruleset-Reporting">9.8. Ruleset Reporting</h3>
<div class="paragraph">
<div class="title">DRAFT</div>
<p>TBD?</p>
</div>
</div>
<div class="sect2">
<h3 id="Ruleset-XML">9.9. XML Ruleset</h3>
<div class="ulist">
<div class="title">DRAFT</div>
<ul>
<li>
<p>XPathMatch</p>
</li>
<li>
<p>XsltTransformation</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A core ruleset to provide support for XML files.</p>
</div>
<div class="sect3">
<h4 id="_metadata_3">9.9.1. Metadata</h4>
<div class="paragraph">
<p><strong>ID:</strong> xml
<strong>Graph prefix:</strong> xml</p>
</div>
</div>
<div class="sect3">
<h4 id="_rule_providers_2">9.9.2. Rule providers</h4>
<div class="paragraph">
<p><em>A definition list (dl/dt/dd) of RuleProviders of given Ruleset with brief descriptions.</em></p>
</div>
<div class="paragraph">
<p>TO_DO: Not sure if all the <code>Xml*</code> really belong here - maybe rather to Java or Java EE?</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>DiscoverXmlFilesRuleProvider</strong> -</p>
</li>
<li>
<p><strong>XmlBaseConfig</strong> -</p>
</li>
<li>
<p><strong>XmlGlassfishConfig</strong> -</p>
</li>
<li>
<p><strong>XmlJbossConfig</strong> -</p>
</li>
<li>
<p><strong>XmlJbossEsbConfig</strong> -</p>
</li>
<li>
<p><strong>XmlJonasConfig</strong> -</p>
</li>
<li>
<p><strong>XmlJppConfig</strong> -</p>
</li>
<li>
<p><strong>XmlJrunConfig</strong> -</p>
</li>
<li>
<p><strong>XmlKnowHowConfig</strong> -</p>
</li>
<li>
<p><strong>XmlOrionConfig</strong> -</p>
</li>
<li>
<p><strong>XmlPersistanceConfig</strong> -</p>
</li>
<li>
<p><strong>XmlResinConfig</strong> -</p>
</li>
<li>
<p><strong>XmlSoa5Config</strong> -</p>
</li>
<li>
<p><strong>XmlSonicEsbConfig</strong> -</p>
</li>
<li>
<p><strong>XmlSpringConfig</strong> -</p>
</li>
<li>
<p><strong>XmlWeblogicConfig</strong> -</p>
</li>
<li>
<p><strong>XmlWebserviceConfig</strong> -</p>
</li>
<li>
<p><strong>XmlWebsphereConfig</strong> -</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_models_2">9.9.3. Models</h4>
<div class="paragraph">
<p>_Subclasses of <code>WindupVertexFrame</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DoctypeMetaModel</p>
</li>
<li>
<p>XmlFileModel</p>
</li>
<li>
<p>XmlTypeReferenceModel</p>
</li>
<li>
<p>XsltTransformationModel</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_configuration_2">9.9.4. Configuration</h4>
<div class="paragraph">
<p>_Subclasses of <code>TO_DO</code></p>
</div>
</div>
<div class="sect3">
<h4 id="_reports_2">9.9.5. Reports</h4>
<div class="paragraph">
<p><em>Report files or report parts created by this ruleset.</em></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Rules-Windup-Models">9.10. Windup Models</h3>
<div class="paragraph">
<p>Windup models are the classes extending WindupVertexFrame.
They are used to model the data in the graph database to Java objects.</p>
</div>
<div class="paragraph">
<p>This is an overview of the most important models.
The complete and up-to-date list of models is in <a href="#http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/graph/model/WindupVertexFrame.html">Javadoc</a>.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/WindupModels-NbScreenshot.png" alt="Windup Models Graphic"></span></p>
</div>
<div class="sect3">
<h4 id="_meta_models">9.10.1. Meta Models</h4>
<div class="ulist">
<ul>
<li>
<p>User input</p>
</li>
<li>
<p>Rules and Rule Providers metadata</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_core_models">9.10.2. Core Models</h4>
<div class="paragraph">
<p>FileModel ArchiveModel</p>
</div>
</div>
<div class="sect3">
<h4 id="_reporting_models">9.10.3. Reporting Models</h4>

</div>
<div class="sect3">
<h4 id="_custom_models_coming_from_add_ons">9.10.4. Custom Models (coming from add-ons)</h4>
<div class="paragraph">
<p>See respective ruleset&#8217;s documentation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Rules-Create-Java-Queries">9.11. Create Java Queries</h3>
<div class="sect3">
<h4 id="_query_for_all_frames_of_some_model">9.11.1. Query for all frames of some Model</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Query.find(FileModel.class).as("result")</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_query_by_property">9.11.2. Query by property</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">Query.find(FileModel.class)
    .withProperty(FileModel.PROPERTY_IS_DIRECTORY, true)
    .as("res")</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_gremlin_query">9.11.3. Gremlin query</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">code,java
Query.find(FileModel.class).piped(new QueryGremlinCriterion() {
    public void query( GraphRewrite event, GremlinPipeline&lt;Vertex, Vertex&gt; pipeline ) {
       throw new UnsupportedOperationException( "Not supported yet." ); //To change body of generated methods, choose Tools | Templates.
    }
})
.withProperty(FileModel.PROPERTY_IS_DIRECTORY, true)
.as("res")</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_custom_query">9.11.4. Custom query</h4>
<div class="paragraph">
<p>The <code>Query</code> API is just a convenience implementation. For a custom
query, implement your own <code>GraphCondition</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">.when(
    new GraphCondition() {
        public boolean evaluate( GraphRewrite event, EvaluationContext context ) {
            event.getGraphContext(); //...
        }
    }
)</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Rules-Rules-Metadata">9.12. Rules Metadata</h3>
<div class="sect3">
<h4 id="_overview_2">9.12.1. Overview</h4>
<div class="paragraph">
<div class="title">Draft</div>
<p>Rules metadata are used for ordering, filtering, debugging and performance reasons.</p>
</div>
</div>
<div class="sect3">
<h4 id="_metadata_used_by_windup">9.12.2. Metadata used by Windup</h4>
<div class="paragraph">
<p>To control ordering, override <code>getExecuteAfter()</code> and <code>getExecuteBefore()</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class MyRules extends WindupRuleProvider
{
    public List&lt;Class&lt;? extends WindupRuleProvider&gt;&gt; getExecuteAfter() {
        return asClassList(UpdateVictimsDbRules.class, ComputeArchivesSHA512.class);
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>To specify the rule ID, use <code>.withId("&#8230;&#8203;")</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">            .addRule()
            .perform(...)
            .withId("CheckArchivesWithVictims")</code></pre>
</div>
</div>
<div class="paragraph">
<p>For other metadata, either use <code>.withMetadata()</code> or override <code>enhanceMetadata()</code>.
To provide categorization for filtering, use <code>CATEGORY</code>.</p>
</div>
<div class="paragraph">
<p>For its metadata, Windup uses the keys defined in <code>RuleMetadata</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/config/metadata/RuleMetadata.html#CATEGORY">CATEGORY</a> (String): Define which category the rule belongs to, which can be then used to filter the rules to execute (plus all those they depend on). Not implemented yet.</p>
</li>
<li>
<p><a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/config/metadata/RuleMetadata.html#ORIGIN">ORIGIN</a> (String): The rule origin. Typically a class name.</p>
</li>
<li>
<p><a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/config/metadata/RuleMetadata.html#">AUTO_COMMIT</a> (boolean): Whether to call database <code>commit()</code> after the rule executes.</p>
</li>
<li>
<p><a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/config/metadata/RuleMetadata.html#TREAT_EXCEPTIONS_AS_FATAL">TREAT_EXCEPTIONS_AS_FATAL</a> (boolean): Whether all Exceptions from this Rule are to be treated as fatal. The default is non-fatal.</p>
</li>
<li>
<p><a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/config/metadata/RuleMetadata.html#RULE_PROVIDER">RULE_PROVIDER</a>: The <code>WindupRuleProvider</code> that originated the rule. This is used internally, not to be specified by rule author.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can find out more information about rule metadata here: <a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/config/metadata/RuleMetadata.html">RuleMetadata</a> Javadoc.</p>
</div>
</div>
<div class="sect3">
<h4 id="_how_to_define_rule_metadata">9.12.3. How to define rule metadata</h4>
<div class="paragraph">
<p>The <code>RuleMetadata</code> is defined using the <code>.withMetadata(Object key, Object value)</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">            .addRule()
            .when(...)
            .perform(...)
            .withId("CheckArchivesWithVictims")
            .withMetadata(RuleMetadata.CATEGORY, ...)</code></pre>
</div>
</div>
<div class="paragraph">
<p>In case you want to apply the same metadata to all rules in some <code>RuleProvider</code>, override it&#8217;s <code>enhanceMetadata()</code> method. The default implementations sets <code>CATEGORY</code> to "Uncategorized", <code>ORIGIN</code> to it&#8217;s class&#8217;es name, and <code>RULE_PROVIDER</code> to the <code>RuleProvider</code> object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public class MyRules extends WindupRuleProvider
{
    public void enhanceMetadata(Context context) {
        if( ! context.containsKey(RuleMetadata.CATEGORY) )
            context.put(RuleMetadata.CATEGORY, "Uncategorized");
        if( ! context.containsKey(RuleMetadata.ORIGIN) )
            context.put(RuleMetadata.ORIGIN, this.getClass().getName());
        if( ! context.containsKey(RuleMetadata.RULE_PROVIDER) )
            context.put(RuleMetadata.RULE_PROVIDER, this);
    }</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_why_a_map">Why a Map?</h5>
<div class="paragraph">
<p>For the rules definition, Windup uses the OCPsoft Rewrite library. Whenever there is something Windup specific which can&#8217;t be pulled to the upstream implementation, Windup resorts to putting data into a metadata map.</p>
</div>
<div class="paragraph">
<p>This map is typically not used by rule authors, unless they use a custom Windup extension (don&#8217;t confuse that with custom Ruleset).</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_ruleset_metadata">9.12.4. Ruleset metadata</h4>
<div class="paragraph">
<p>Ruleset metadata cover the whole Ruleset, not individual rules.
For ruleset metadata, unlike rules, Windup uses a type-safe interface <code>WindupRulesetMetadata</code>
(see <a href="http://windup.github.io/windup/docs/javadoc/latest/org/jboss/windup/config/WindupRulesetMetadata.html">javadoc</a>).</p>
</div>
<div class="paragraph">
<p>Currently, it only defines Ruleset ID.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Rules-Rules-Operations">9.13. Rules Operations</h3>
<div class="paragraph">
<p><em>A list of high-level operations across rulesets.</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>JavaClass</code></p>
</li>
<li>
<p><code>Classification</code></p>
<div class="ulist">
<ul>
<li>
<p><code>Hint</code></p>
</li>
<li>
<p><code>Link</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>TBD.</p>
</div>
<div class="paragraph">
<p>For the implementation of the operation, see
<a href="https://github.com/lincolnthree/windup/blob/WINDUP-133/rules/app/java-ee/src/main/java/org/jboss/windup/rules/apps/legacy/java/BaseConfig.java#L60">here</a>.</p>
</div>
<div class="paragraph">
<p>TBD</p>
</div>
<div id="Rules-Ops-Reporting-Hint" class="paragraph">
<p>Rules Ops Reporting Hint</p>
</div>
<div class="paragraph">
<div class="title">DRAFT</div>
<p>TBD</p>
</div>
</div>
<div class="sect2">
<h3 id="Rules-Ops-Reporting-TypeReference">9.14. Ops Reporting TypeReference</h3>
<div class="paragraph">
<p>TBD</p>
</div>
<div class="paragraph">
<p>Different for Java and XML.
Contains Line, Column</p>
</div>
<div class="paragraph">
<p>DRAFT: TBD?</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_debugging_and_troubleshooting">10. Debugging and Troubleshooting</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Dev-Debugging-and-Profiling">10.1. Debugging and Profiling</h3>
<div class="sect3">
<h4 id="_debug_the_windup_distribution_runtime">10.1.1. Debug the Windup Distribution Runtime</h4>
<div class="paragraph">
<p>You can debug the Windup distribution using one of the following approaches.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Pass the <code>--debug</code> argument on the command line when you execute Windup.</p>
<div class="listingblock">
<div class="content">
<pre>For Linux:    WINDUP_HOME/bin $ ./windup --debug
For Windows:  C:\WINDUP_HOME\bin&gt; windup --debug</pre>
</div>
</div>
</li>
<li>
<p>Configure the <code>FORGE_OPTS</code> for debugging.</p>
<div class="listingblock">
<div class="content">
<pre>export FORGE_OPTS="-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=8000"</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_debug_a_test_using_netbeans">10.1.2. Debug a Test Using NetBeans</h4>
<div class="paragraph">
<p>Click the <code>Debug Test File</code> button, or choose <code>Menu</code> → <code>Debug</code> → <code>Debug Test File</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_profile_a_test_using_netbeans">10.1.3. Profile a Test Using NetBeans</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Profiling requires a lot of memory, so be sure to increase the NetBeans memory settings.</p>
<div class="ulist">
<ul>
<li>
<p>Open the <code>NETBEANS_HOME/etc/netbeans.conf</code> file</p>
</li>
<li>
<p>Find the line with <code>netbeans_default_options=</code></p>
</li>
<li>
<p>Add the following option</p>
<div class="listingblock">
<div class="content">
<pre>-J-Xmx5200m -J-XX:MaxPermSize=1024m</pre>
</div>
</div>
</li>
<li>
<p>Restart NetBeans.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <code>Menu &gt; Profile &gt; Profile Test File</code>.</p>
</li>
<li>
<p>In the resulting dialog, enter the following.</p>
<div class="listingblock">
<div class="content">
<pre>exec.args=-Djboss.modules.system.pkgs=org.netbeans</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_profile_forge_runtime_using_yourkit">10.1.4. Profile Forge Runtime Using YourKit</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download and unzip <a href="http://www.yourkit.com/">YourKit</a>. Be sure to get the trial license.</p>
</li>
<li>
<p>Configure the <code>FORGE_OPTS</code> for Yourkit:</p>
<div class="listingblock">
<div class="content">
<pre>export YOURKIT_HOME=/home/ondra/sw/prog/YourKit-b14092
export FORGE_OPTS="-Djboss.modules.system.pkgs=com.yourkit -agentpath:$YOURKIT_HOME/bin/linux-x86-64/libyjpagent.so=sampling,onexit=snapshot,delay=0"</pre>
</div>
</div>
</li>
<li>
<p>Run <code>forge</code>. For details, see <a href="http://forge.jboss.org/1.x/docs/using/profiling-forge.html">Profiling
Forge</a>, but skip the first 2 points that direct you to copy the YourKit module and JAR into the Forge installation. Forge 2 already contains the YourKit module and JAR&gt;.</p>
</li>
<li>
<p>Run <code>windup-analyze-app</code>.</p>
<div class="listingblock">
<div class="content">
<pre>forge -e windup-migrate-app</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_troubleshoot_windup_issues">10.2. Troubleshoot Windup Issues</h3>
<div class="sect3">
<h4 id="_logging">10.2.1. Logging</h4>
<div class="paragraph">
<p>Logging is currently broken and will not be fixed any time soon.</p>
</div>
<div class="paragraph">
<p>See <a href="#Known-Issues">Known Issues</a> and <a href="https://issues.jboss.org/browse/WINDUP-73">WINDUP-73</a> for the current status.</p>
</div>
</div>
<div class="sect3">
<h4 id="_debugging_exceptions">10.2.2. Debugging Exceptions</h4>
<div class="paragraph">
<p>Exceptions in Surefire reports are broken due to the way Forge wraps
exceptions and the way Surefire handles them. You need to
debug or rewrap exceptions using <code>TestUtil.rewrap(ex)</code>.</p>
</div>
<div class="paragraph">
<p>See <a href="#Known-Issues">Known Issues</a> and <a href="https://issues.jboss.org/browse/WINDUP-197">WINDUP-197</a> for the current status..</p>
</div>
</div>
<div class="sect3">
<h4 id="_classloading_problems">10.2.3. Classloading Problems</h4>
<div class="paragraph">
<p>Configuring dependencies in a Forge-based project can be a little tricky.
See <a href="#Dev-Dependencies">Dependencies</a> for some hints.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Caused by: java.lang.IllegalArgumentException: Type value for model 'org.jboss.windup.rules.files.model.FileReferenceModel' is already registered with model org.jboss.windup.rules.files.model.FileReferenceModel</pre>
</div>
</div>
<div class="paragraph">
<p>This means that the model class is loaded twice. I.e. the module containing it is loaded twice. Or, in tests, you may be (accidentally) adding the class to the deployment.
This may especially happen after Maven coordinates of some module are changed.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_wiki_information">11. Wiki Information</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="About-the-Windup-Wiki">11.1. About the Windup Wiki</h3>
<div class="sect3">
<h4 id="_purpose">11.1.1. Purpose</h4>
<div class="paragraph">
<p>This wiki is a place to create Windup documentation in a collaborative manner, a bit wildly, and on the fly. It is intended to reflect the state of the Windup source code master branch, however pages may become obsolete as the master changes quickly.</p>
</div>
</div>
<div class="sect3">
<h4 id="_areas_of_interest">11.1.2. Areas of Interest</h4>
<div class="paragraph">
<p>The Wiki pages are divided into the following main areas of interest, which may often overlap. The page names use these prefixes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Dev-: &#8230;&#8203;</strong>: These pages are of interest to Windup core developers.</p>
</li>
<li>
<p><strong>Rules- &#8230;&#8203;</strong>: These pages are of interest to rules developers.</p>
</li>
<li>
<p><strong>User- &#8230;&#8203;</strong>: These pages that are of interest to Windup users.</p>
</li>
<li>
<p>no prefix: These pages that are also of interest to Windup users.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_markdown_asciidoc_or">11.1.3. Markdown, AsciiDoc, or&#8230;&#8203;?</h4>
<div class="paragraph">
<p>This Wiki uses AsciiDoc because it is capable of handling the publishing requirements and structural elements needed to create technical books. If you would like to contribute to the documentation, feel free to use your favorite Wiki language, however, it will ultimately be converted to AsciiDoc.</p>
</div>
</div>
<div class="sect3">
<h4 id="_contributor_guidelines">11.1.4. Contributor Guidelines</h4>
<div class="paragraph">
<p>Please see the <a href="https://github.com/windup/windup-documentation/blob/master/CONTRIBUTING.adoc">Contributing Guidelines</a> for details about how to name pages and use the correct AsciiDoc syntax to make the transition to the final documentation go more smoothly.</p>
</div>
<div class="paragraph">
<p>The following is a brief overview.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name wiki pages using only letters, numbers and dashes. Do not include spaces, colons, or other special characters in page names.</p>
</li>
<li>
<p>Be sure to add a level 3 page heading (===) at the top of each page. When compiled in a book, the Guide name is the top level, chapters are level 2, and the page is level  3. This is the title that appears in the table of contents for the page.</p>
<div class="literalblock">
<div class="content">
<pre>=== Build Windup from Source</pre>
</div>
</div>
</li>
<li>
<p>At the beginning of each new Wiki page, add an anchor with the exact page name, including the dashes. This generates the correct anchors that are needed when the pages are combined into a book.</p>
<div class="literalblock">
<div class="content">
<pre>[[Page-Name]]
=== Page Name</pre>
</div>
</div>
</li>
<li>
<p>Wiki generates anchors using dashes for spaces. AsciiDoctor generates a leading underscore and underscores for spaces.When referring to another section within the same page, do not use the <code><a href="#section-title-anchor">[section-title-anchor]</a></code> syntax. Instead, create an anchor and use the 'xref:' syntax to provide the link. Replace spaces in the section title with dashes.</p>
<div class="ulist">
<ul>
<li>
<p>Create the anchor at the top of the section using double brackets to force the generation of dashes instead of underscores.</p>
<div class="literalblock">
<div class="content">
<pre>[[section-header]]
==== Section Header</pre>
</div>
</div>
</li>
<li>
<p>Then use the <code>xref</code> to create the link.</p>
<div class="literalblock">
<div class="content">
<pre>See xref:section-header[Section Header] for more information.</pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Add-Images-to-the-Windup-Wiki">11.2. Add Images to the Windup Wiki</h3>
<div class="ulist">
<ul>
<li>
<p>Fork <a href="https://github.com/windup/windup/wiki" class="bare">https://github.com/windup/windup/wiki</a></p>
</li>
<li>
<p>Clone the Windup Wiki into a <code>windup.wiki/</code> directory using the SSH clone URL:</p>
<div class="literalblock">
<div class="content">
<pre>git clone git@github.com:USER_NAME/windup.git windup.wiki</pre>
</div>
</div>
</li>
<li>
<p>Navigate to the new <code>windup.wiki/</code> directory.</p>
</li>
<li>
<p>Add the upstream repository.</p>
<div class="literalblock">
<div class="content">
<pre>git remote add -f upstream git@github.com:windup/windup.wiki.git</pre>
</div>
</div>
</li>
<li>
<p>Check out a branch to work in.</p>
<div class="literalblock">
<div class="content">
<pre>git checkout -b BRANCH_NAME upstream/master</pre>
</div>
</div>
</li>
<li>
<p>Copy the image into the <code>windup.wiki/images</code> directory</p>
<div class="literalblock">
<div class="content">
<pre>cp IMAGE_NAME.png images/</pre>
</div>
</div>
</li>
<li>
<p>Add the new image to Git</p>
<div class="literalblock">
<div class="content">
<pre>git add images/IMAGE_NAME.png</pre>
</div>
</div>
</li>
<li>
<p>Commit the change</p>
<div class="literalblock">
<div class="content">
<pre>git commit -m "Add new image"</pre>
</div>
</div>
</li>
<li>
<p>Push the change to your Windup Wiki repository.</p>
<div class="literalblock">
<div class="content">
<pre>git push origin HEAD:master</pre>
</div>
</div>
</li>
<li>
<p>Test the new image in a page on your own Wiki. Don&#8217;t forget to add the <code>:imagesdir: images</code> directive to the beginning of the page to point to the images directory.</p>
<div class="literalblock">
<div class="content">
<pre>image:IMAGE_NAME.png[New Image]</pre>
</div>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="paragraph">
<p>==== My Image</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="/windup-logo-large.png" alt="Windup Logo"></span></p>
</div>
<div class="ulist">
<ul>
<li>
<p>If it works, push the image to the upstream repository</p>
<div class="literalblock">
<div class="content">
<pre>git push upstream HEAD:master</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_windup_product_release_and_documentation_process">12. Windup Product Release and Documentation Process</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Dev-Windup-Release-Process">12.1. Windup Release Process</h3>
<div class="paragraph">
<p>Windup consists of artifacts from multiple GitHub repositories. Use the following procedure to create a Windup release.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Release <a href="http://github.com/windup/nexus-indexer" class="bare">http://github.com/windup/nexus-indexer</a></p>
<div class="listingblock">
<div class="content">
<pre>mvn release:prepare release:perform -DreleaseVersion=X -Dtag=Y -DdevelopmentVersion=Z</pre>
</div>
</div>
</li>
<li>
<p>Release <a href="http://github.com/windup/windup" class="bare">http://github.com/windup/windup</a> <em>primary reactor</em></p>
</li>
<li>
<p>Release <a href="http://github.com/windup/windup-rulesets" class="bare">http://github.com/windup/windup-rulesets</a></p>
</li>
<li>
<p>Release <a href="http://github.com/windup/windup-distribution" class="bare">http://github.com/windup/windup-distribution</a></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Create-Windup-JavaDoc">12.2. Create Windup JavaDoc</h3>
<div class="paragraph">
<p>The most recent Windup JavaDoc build is located here: <a href="http://windup.github.io/windup/docs/javadoc/latest/index.html" class="bare">http://windup.github.io/windup/docs/javadoc/latest/index.html</a></p>
</div>
<div class="paragraph">
<p>If you want to build an updated version, use the following procedure to create JavaDoc for Windup.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In Windup project root directory, type the following Maven command:</p>
<div class="listingblock">
<div class="content">
<pre>mvn validate -PjavadocDist</pre>
</div>
</div>
</li>
<li>
<p>The JavaDoc is created in the Windup <code>target/site/apidocs</code> subdirectory.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
To cross-link with 3rd-party libraries, see <a href="https://issues.jboss.org/browse/WINDUP-422" class="bare">https://issues.jboss.org/browse/WINDUP-422</a>[WINDUP-422} and <a href="http://stackoverflow.com/questions/27392535/javadoc-how-to-make-it-link-the-dependencies-maven-project" class="bare">http://stackoverflow.com/questions/27392535/javadoc-how-to-make-it-link-the-dependencies-maven-project</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Windup-Documentation-Process">12.3. Windup Documentation Process</h3>
<div class="sect3">
<h4 id="_wiki_documentation">12.3.1. Wiki Documentation</h4>
<div class="ulist">
<ul>
<li>
<p>Name wiki pages using only letters, numbers and dashes. Do not include spaces, colons, or other special characters in page names.</p>
</li>
<li>
<p>Use AsciiDoc rather than Markdown for the syntax.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_product_documentation">12.3.2. Product Documentation</h4>
<div class="paragraph">
<p>Windup product documentation is stored here: <a href="https://github.com/windup/windup-documentation" class="bare">https://github.com/windup/windup-documentation</a></p>
</div>
<div class="paragraph">
<p>See the <a href="https://github.com/windup/windup-documentation/blob/master/CONTRIBUTING.adoc">CONTRIBUTING guide</a> for AsciiDoc syntax rules regarding headers and links to make this process easier.</p>
</div>
</div>
<div class="sect3">
<h4 id="_update_the_windup_documentation_with_the_latest_wiki_changes">12.3.3. Update the Windup Documentation with the Latest Wiki Changes</h4>
<div class="sect4">
<h5 id="_summary_11">Summary</h5>
<div class="paragraph">
<p>The Windup guides are located in the windup-documentation/docs directory. They are named the same as the guides in the Wiki but have a 'Windup-' prefix. The windup-documentation/docs guides should kept synchronized with the versions in the windup.wiki.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Wiki Guide</th>
<th class="tableblock halign-left valign-top">Windup Docs Guide</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">User-Guide.asciidoc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windup-User-Guide.adoc</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rules-Development-Guide.asciidoc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windup-Rules-Development-Guide.adoc</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Core-Development-Guide.asciidoc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windup-Core-Development-Guide.adoc</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Migration-Planning-Guide</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windup-Migration-Planning-Guide.adoc</p></td>
</tr>
</tbody>
</table>
<div class="sect5">
<h6 id="_documentation_update_scripts">Documentation Update Scripts</h6>
<div class="paragraph">
<p>The <a href="https://github.com/windup/windup-documentation/tree/master/scripts/windupDocUpdate.sh" class="bare">https://github.com/windup/windup-documentation/tree/master/scripts/windupDocUpdate.sh</a> script copies the pages from the Windup wiki to the windup-documentation repository, makes minor modifications, and generates each guide in a single HTML page book format. The resulting guides are created in the <code>WINDUP_DOCUMENTATION_HOME/html/</code> directory.</p>
</div>
<div class="paragraph">
<p>The script performs the following steps.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Copies the Windup wiki pages to the <code>WINDUP_DOCUMENTATION_HOME/docs/</code> directory, renaming them with the <code>.adoc</code> extension.</p>
</li>
<li>
<p>Makes sure each guide includes all pages that are referenced by pages within it. Scripts are provided to search for links within each individual guide. They navigate to the <code>WINDUP_DOCUMENTATION_HOME/docs/</code> directory and search using the following command:</p>
<div class="literalblock">
<div class="content">
<pre>grep 'xref:[A-Z]' `find . -name '*.adoc'`.</pre>
</div>
</div>
</li>
<li>
<p>Replaces each <code>xref:</code> to external pages with an <code>xref:</code> using the following command.</p>
<div class="literalblock">
<div class="content">
<pre>find . -name '*.adoc' -print | xargs sed -i 's/xref:/xref:/g'</pre>
</div>
</div>
</li>
<li>
<p>Navigates to the <code>WINDUP_DOCUMENTATION_HOME/</code> directory and builds the books. The single page HTML files are created in the <code>WINDUP_DOCUMENTATION_HOME/html/</code> directory.</p>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Windup Guide</th>
<th class="tableblock halign-left valign-top">Command</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windup User Guide</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">asciidoctor -t -dbook -a toc -o html/WindupUserGuide.html docs/Windup-User-Guide.adoc</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windup Rules Development Guide</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">asciidoctor -t -dbook -a toc -o html/WindupRulesDevelopmentGuide.html docs/Windup-Rules-Development-Guide.adoc</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Windup Core Development Guide</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">asciidoctor -t -dbook -a toc -o html/WindupCoreDevelopmentGuide.html docs/Windup-Core-Development-Guide.adoc</p></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_publish_the_html_docs_for_access_at_github_io">12.3.4. Publish the HTML Docs for Access at GitHub IO</h4>
<div class="paragraph">
<p>The <a href="https://github.com/windup/windup-documentation/tree/master/scripts/windupPublish.sh" class="bare">https://github.com/windup/windup-documentation/tree/master/scripts/windupPublish.sh</a> script copies the pages from the Windup wiki to the windup-documentation repository, makes minor modifications, and generates each guide in a single HTML page book format. The resulting guides are created in the <code>WINDUP_DOCUMENTATION_HOME/html/</code> directory.</p>
</div>
<div class="paragraph">
<p>The script performs the following steps.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The first time, you must fork and clone the windup GitHub repository. After that, just fetch the latest upstream.</p>
<div class="listingblock">
<div class="content">
<pre>git clone https://github.com/windup/windup.git
git fetch upstream</pre>
</div>
</div>
</li>
<li>
<p>Navigate to the local <code>WINDUP_HOME/</code> directory.</p>
<div class="listingblock">
<div class="content">
<pre>cd windup</pre>
</div>
</div>
</li>
<li>
<p>Checkout the <code>gh-pages</code> from the <code>WINDUP_HOME</code> repository</p>
<div class="listingblock">
<div class="content">
<pre>git checkout -b gh-pages windup/gh-pages</pre>
</div>
</div>
</li>
<li>
<p>If the <code>WINDUP_HOME/docs/WINDUP_RELEASE/</code> directory does not yet exist, create a <code>docs/WINDUP_RELEASE/html/images/</code></p>
<div class="listingblock">
<div class="content">
<pre>mkdir -p docs/WINDUP_RELEASE/html/images (if it doesn't exist!)</pre>
</div>
</div>
</li>
<li>
<p>Copy any the images, stylesheets, and html files from windup-documentation:</p>
<div class="listingblock">
<div class="content">
<pre>cp WINDUP_DOCUMENTATION_HOME/html/*.html WINDUP_HOME/docs/WINDUP_RELEASE/html/
cp WINDUP_DOCUMENTATION_HOME/*.css WINDUP_HOME/docs/WINDUP_RELEASE/html/
cp WINDUP_DOCUMENTATION_HOME/images/* WINDUP_HOME/docs/WINDUP_RELEASE/html/images/</pre>
</div>
</div>
</li>
<li>
<p>Add the updated files to GitHub.</p>
<div class="listingblock">
<div class="content">
<pre>git add docs</pre>
</div>
</div>
</li>
<li>
<p>Commit the changes.</p>
<div class="listingblock">
<div class="content">
<pre>git commit -m "Update message..."</pre>
</div>
</div>
</li>
<li>
<p>Push the changes to GitHub.</p>
<div class="listingblock">
<div class="content">
<pre>git push upstream gh-pages</pre>
</div>
</div>
</li>
<li>
<p>View the documentation at <a href="http://windup.github.io/windup/docs/WINDUP_RELEASE/html/WindupUserGuide.html" class="bare">http://windup.github.io/windup/docs/WINDUP_RELEASE/html/WindupUserGuide.html</a></p>
</li>
<li>
<p>Update the symlink for <code>latest</code> to point to the new version.</p>
<div class="ulist">
<ul>
<li>
<p>Navigate to the <code>WINDUP_HOME/docs</code> directory.</p>
</li>
<li>
<p>Remove the existing symlink for "latest".</p>
<div class="literalblock">
<div class="content">
<pre>unlink latest</pre>
</div>
</div>
</li>
<li>
<p>Create a symlink to the new documentation.</p>
<div class="literalblock">
<div class="content">
<pre>Syntax: ln -s WINDUP_RELEASE latest
Example: ln -s 2.0.0.Final latest</pre>
</div>
</div>
</li>
<li>
<p>Add the modified "latest" directory to Git.</p>
<div class="literalblock">
<div class="content">
<pre>git add latest</pre>
</div>
</div>
</li>
<li>
<p>Commit the change.</p>
<div class="literalblock">
<div class="content">
<pre>git commit -m 'Replace symlink for latest to point to 2.0.0.Final'</pre>
</div>
</div>
</li>
<li>
<p>Push the changes to your own git repository, verify and issue a pull.</p>
<div class="literalblock">
<div class="content">
<pre>git push origin HEAD</pre>
</div>
</div>
</li>
<li>
<p>Push the changes upstream</p>
<div class="literalblock">
<div class="content">
<pre>git push upstream gh-pages</pre>
</div>
</div>
</li>
<li>
<p>View the documentation at <a href="http://windup.github.io/windup/docs/latest/html/WindupUserGuide.html" class="bare">http://windup.github.io/windup/docs/latest/html/WindupUserGuide.html</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_additional_resources_2">13. Additional Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Review-the-Windup-Quickstarts">13.1. Review the Windup Quickstarts</h3>
<div class="paragraph">
<p>The Windup quickstarts provide working examples of how to create custom Java-based rule add-ons and XML rules. You can use them as a starting point for creating your own custom rules. The quickstarts are available on GitHub here: <a href="https://github.com/windup/windup-quickstarts" class="bare">https://github.com/windup/windup-quickstarts</a></p>
</div>
<div class="paragraph">
<p>You can fork and clone the project to have access to regular updates or you can download a ZIP file of the latest version.</p>
</div>
<div class="sect3">
<h4 id="_download_the_latest_zip">13.1.1. Download the Latest ZIP</h4>
<div class="paragraph">
<p>To download the latest quickstart ZIP file, browse to: <a href="https://github.com/windup/windup-quickstarts/releases" class="bare">https://github.com/windup/windup-quickstarts/releases</a></p>
</div>
<div class="paragraph">
<p>Click on the most recent release to download the ZIP to your local file system.</p>
</div>
</div>
<div class="sect3">
<h4 id="_fork_and_clone_the_github_project">13.1.2. Fork and Clone the GitHub Project</h4>
<div class="paragraph">
<p>If you don&#8217;t have the GitHub client (<code>git</code>), download it from: <a href="http://git-scm.com/" class="bare">http://git-scm.com/</a></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the <code>Fork</code> link on the <a href="https://github.com/windup/windup-quickstarts/">Windup quickstart</a> GitHub page to create the project in your own Git. The forked GitHub repository URL created by the fork should look like this: <a href="https://github.com/YOUR_USER_NAME/windup-quickstarts.git" class="bare">https://github.com/YOUR_USER_NAME/windup-quickstarts.git</a></p>
</li>
<li>
<p>Clone your Windup quickstart repository to your local file system:</p>
<div class="listingblock">
<div class="content">
<pre>git clone https://github.com/YOUR_USER_NAME/windup-quickstarts.git</pre>
</div>
</div>
</li>
<li>
<p>This creates and populates a <code>windup-quickstarts</code> directory on your local file system. Navigate to the newly created directory, for example</p>
<div class="listingblock">
<div class="content">
<pre>cd windup-quickstarts/</pre>
</div>
</div>
</li>
<li>
<p>If you want to be able to retrieve the lates code updates, add the remote <code>upstream</code> repository so you can fetch any changes to the original forked repository.</p>
<div class="listingblock">
<div class="content">
<pre>git remote add upstream https://github.com/windup/windup-quickstarts.git</pre>
</div>
</div>
</li>
<li>
<p>To get the latest files from the <code>upstream</code> repository.</p>
<div class="listingblock">
<div class="content">
<pre>git reset --hard upstream/master</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Get-Involved">13.2. Get Involved</h3>
<div class="sect3">
<h4 id="_how_can_you_help">13.2.1. How can you help?</h4>
<div class="paragraph">
<p>To help us make Windup cover most application constructs and server configurations, including yours, you can help with any of the following items. Some items require only a few minutes of your time!</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="mailto:windup-users@redhat.com">Let us know</a> what Windup migration rules should cover.</p>
</li>
<li>
<p>Provide example applications to test migration rules.</p>
</li>
<li>
<p>Identify application components and problem areas that may be difficult to migrate.</p>
<div class="ulist">
<ul>
<li>
<p>Write a short description of these problem migration areas.</p>
</li>
<li>
<p>Write a brief overview describing how to solve the problem migration areas.</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#Execute-Windup">Try Windup</a> on your application. Be sure to <a href="#Report-Issues-with-Windup">report any issues</a> you encounter.</p>
</li>
<li>
<p>You can contribute Windup rules.</p>
<div class="ulist">
<ul>
<li>
<p>Write a Windup rule add-on to automate a migration process.</p>
</li>
<li>
<p>Create a test for the new rule.</p>
</li>
<li>
<p>For details, see the <em>Windup Rules Development Guide</em>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>You can also contribute to the project source code.</p>
<div class="ulist">
<ul>
<li>
<p>Create a core rule.</p>
</li>
<li>
<p>Improve performance or efficiency.</p>
</li>
<li>
<p>See the_Windup Core Development Guide_ for information about how to configure your environment and set up the project.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Any level of involvement is greatly appreciated!</p>
</div>
</div>
<div class="sect3">
<h4 id="_helpful_links">13.2.2. Helpful links</h4>
<div class="ulist">
<ul>
<li>
<p>Windup Wiki: <a href="https://github.com/windup/windup/wiki" class="bare">https://github.com/windup/windup/wiki</a></p>
</li>
<li>
<p>Windup documentation (generated from the Wiki documentation at the link above):</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://windup.github.io/windup/docs/latest/html/WindupUserGuide.html" class="bare">http://windup.github.io/windup/docs/latest/html/WindupUserGuide.html</a></p>
</li>
<li>
<p><a href="http://windup.github.io/windup/docs/latest/html/WindupRulesDevelopmentGuide.html" class="bare">http://windup.github.io/windup/docs/latest/html/WindupRulesDevelopmentGuide.html</a></p>
</li>
<li>
<p><a href="http://windup.github.io/windup/docs/latest/html/WindupCoreDevelopmentGuide.html" class="bare">http://windup.github.io/windup/docs/latest/html/WindupCoreDevelopmentGuide.html</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Windup Forums: <a href="https://community.jboss.org/en/windup" class="bare">https://community.jboss.org/en/windup</a></p>
</li>
<li>
<p>Windup Forums: <a href="https://developer.jboss.org/en/windup" class="bare">https://developer.jboss.org/en/windup</a> (inherited from Windup 0.x)</p>
</li>
<li>
<p>Windup Issue Tracker: <a href="https://issues.jboss.org/browse/WINDUP" class="bare">https://issues.jboss.org/browse/WINDUP</a></p>
</li>
<li>
<p>Windup Users Mailing List: <a href="mailto:windup-users@lists.jboss.org">windup-users@lists.jboss.org</a></p>
</li>
<li>
<p>Windup Developers Mailing List: <a href="mailto:windup-dev@lists.jboss.org">windup-dev@lists.jboss.org</a></p>
</li>
<li>
<p>Windup Commits Mailing List: <a href="mailto:windup-commits@lists.jboss.org">windup-commits@lists.jboss.org</a></p>
</li>
<li>
<p>Windup on Twitter: <a href="https://twitter.com/jbosswindup">@JBossWindup</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can also follow us on this IRC channel: <code>irc.freenode.net#windup</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Known-Issues">13.3. Known Windup Issues</h3>
<div class="paragraph">
<p>Windup known issues are tracked here: <a href="https://issues.jboss.org/browse/WINDUP-496?jql=project%20%3D%20WINDUP%20AND%20issuetype%20%3D%20Bug%20AND%20status%20in%20%28Open%2C%20%22Coding%20In%20Progress%22%2C%20Reopened%2C%20%22Pull%20Request%20Sent%22%29">Open Windup issues</a></p>
</div>
</div>
<div class="sect2">
<h3 id="Report-Issues-with-Windup">13.4. Report Issues with Windup</h3>
<div class="paragraph">
<p>Windup uses JIRA as its issue tracking system. If you encounter an issue executing Windup, please file a Windup JIRA Issue.</p>
</div>
<div class="sect3">
<h4 id="_create_a_jira_account">13.4.1. Create a JIRA Account</h4>
<div class="paragraph">
<p>If you do not yet have a JIRA account, create one using the following procedure.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a browser to the following URL: <a href="https://issues.jboss.org/secure/Dashboard.jspa" class="bare">https://issues.jboss.org/secure/Dashboard.jspa</a></p>
</li>
<li>
<p>Click the <em>Sign Up</em> link in the top right side of the page.</p>
</li>
<li>
<p>Enter your email address and click the <code>Confirm address</code> button.</p>
</li>
<li>
<p>Follow the instructions sent to your email address.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_create_a_jira_issue">13.4.2. Create a JIRA Issue</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open a browser to the following URL: <a href="https://issues.jboss.org/secure/CreateIssue!default.jspa" class="bare">https://issues.jboss.org/secure/CreateIssue!default.jspa</a>.</p>
<div class="ulist">
<ul>
<li>
<p>If you have not yet logged in, click the <em>Log In</em> link at the top right side of the page.</p>
</li>
<li>
<p>Enter your credentials and click the <code>LOGIN</code> button.</p>
</li>
<li>
<p>You are then redirected back to the <strong>Create Issue</strong> page.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Choose the following options and click the <code>Next</code> button.</p>
<div class="ulist">
<ul>
<li>
<p><strong>Project</strong>:  <em>Windup</em></p>
</li>
<li>
<p><strong>Issue Type</strong>:  <em>Bug</em></p>
</li>
</ul>
</div>
</li>
<li>
<p>On the next screen complete the following fields:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Summary</strong>: Enter a brief description of the problem or issue.</p>
</li>
<li>
<p><strong>Environment</strong>: Provide the details of your operating system, version of Java, and any other pertinent information.</p>
</li>
<li>
<p><strong>Description</strong>: Provide a detailed description of the issue. Be sure to include logs and exceptions traces.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click the <code>Create</code> button to create the JIRA issue.</p>
</li>
<li>
<p>If the application or archive causing the issue does not contain sensitive information and you are comfortable sharing it with the Windup development team, attach it to the issue by choosing <code>More &#8594; Attach Files</code>. You are provided with an option to restrict visibility to JBoss employees.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_appendix">14. Appendix</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Glossary">14.1. Glossary of Terms Used in Windup</h3>
<div class="sect3">
<h4 id="_rules_terms">14.1.1. Rules Terms</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Rule</dt>
<dd>
<p>A piece of code that performs a single unit of work during the migration process. Depending on the complexity of the rule, it may or may not include configuration data. Extensive configuration information may be externalized into external configuration, for example, a custom XML file. The following is an example of a Java-based rule added to the <code>JDKConfig</code> RuleProvider class.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">.addRule()
    .when(JavaClass.references("java.lang.ClassLoader$").at(TypeReferenceLocation.TYPE))
    .perform(Classification.as("Java Classloader, must be migrated.")
    .with(Link.to("Red Hat Customer Portal: How to get resources via the ClassLoader in a JavaEE application in JBoss EAP",  "https://access.redhat.com/knowledge/solutions/239033"))
     .withEffort(1))</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">RuleProvider</dt>
<dd>
<p>A class that implements one or more rules using the <code>.addRule()</code> method. The following are examples of legacy Java RulesProviders that are defined in <code>rules-java-ee</code> ruleset.</p>
<div class="ulist">
<ul>
<li>
<p>EjbConfig</p>
</li>
<li>
<p>JDKConfig</p>
</li>
<li>
<p>SeamToCDI</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Ruleset</dt>
<dd>
<p>A ruleset is a group of one or more RuleProviders that targets a specific area of migration, for example, <code>Spring &#8594; Java EE 6</code> or <code>WebLogic &#8594; JBoss EAP</code>. A ruleset is packaged as a JAR and contains additional information needed for the migration, such as operations, conditions, report templates, static files, metadata,  and relationships to other rulesets. The following Windup projects are rulesets.</p>
<div class="ulist">
<ul>
<li>
<p>rules-java-ee</p>
</li>
<li>
<p>rules-xml</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Rules Metadata</dt>
<dd>
<p>Information about whether a particular ruleset applies to a given situation. The metadata can include the source and target platform and frameworks.</p>
</dd>
<dt class="hdlist1">Rules Pipeline</dt>
<dd>
<p>A collection of rules that feed information into the knowledge graph.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_reporting_terms">14.1.2. Reporting Terms</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Lift and Shift (Level of effort)</dt>
<dd>
<p>The code or file is standards-based and can be ported to the new environment with no changes.</p>
</dd>
<dt class="hdlist1">Mapped (Level of effort)</dt>
<dd>
<p>There is a standard mapping algorithm to port the code or file to the new environment.</p>
</dd>
<dt class="hdlist1">Custom (Level of effort)</dt>
<dd>
<p>The code or file must be rewritten or modified to work in the new environment.</p>
</dd>
<dt class="hdlist1">Story Point</dt>
<dd>
<p>A term commonly used in Scrum Agile software development methodology to estimate the level of effort needed to implement a feature or change. It does not necessarily translate to man-hours, but the value should be consistent across tasks.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Dev-Windup-Project-Information">14.2. Windup Project Information</h3>
<div class="sect3">
<h4 id="_github_repository">14.2.1. Github Repository</h4>
<div class="paragraph">
<p>The Windup project github repository is located at <a href="https://github.com/windup/windup/" class="bare">https://github.com/windup/windup/</a>.</p>
</div>
<div class="paragraph">
<p>See the <em>Core-Developer-Guide</em> for details on how to contribute to the Windup project source code.</p>
</div>
</div>
<div class="sect3">
<h4 id="_documentation">14.2.2. Documentation</h4>
<div class="paragraph">
<p>The Windup documentation is currently located here in the Windup project <a href="https://github.com/windup/windup/wiki/">Wiki</a>.</p>
</div>
<div class="paragraph">
<p>For additional information, refer to the Windup <a href="#http://windup.github.io/windup/docs/javadoc/latest/index.html">Javadoc</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_website">14.2.3. Website</h4>
<div class="paragraph">
<p>There is currently no website for Windup 2.0.</p>
</div>
<div class="paragraph">
<p>The windup.jboss.org website currently provides information primarily
for legacy Windup 1.x (legacy).</p>
</div>
</div>
<div class="sect3">
<h4 id="_irc_chat">14.2.4. IRC chat</h4>
<div class="paragraph">
<p>Server: irc.freenode.net<br>
Channel: #windup</p>
</div>
</div>
<div class="sect3">
<h4 id="_mailing_lists">14.2.5. Mailing lists</h4>
<div class="paragraph">
<p>Subscribe to the JBoss mailing lists at
<a href="https://lists.jboss.org/mailman/listinfo/windup-dev" class="bare">https://lists.jboss.org/mailman/listinfo/windup-dev</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Core development discussion: <a href="mailto:windup-dev@redhat.com">windup-dev@redhat.com</a></p>
</li>
<li>
<p>Rules development discussion, usage: <a href="mailto:windup-users@redhat.com">windup-users@redhat.com</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_core_development_team_and_irc_nicks">14.2.6. Core development team (and IRC nicks)</h4>
<div class="paragraph">
<p>Lead: Lincoln Baxter (lincolnthree)<br>
Members: Jess Sightler (jsightler), Matej Briskar (mbriskar), Ondrej
Zizka (ozizka)</p>
</div>
</div>
<div class="sect3">
<h4 id="_irc_meeting_bot_commands_hint_for_the_moderator">14.2.7. IRC meeting bot commands (hint for the moderator)</h4>
<div class="listingblock">
<div class="content">
<pre>#startmeeting
#chair lincolnthree, ozizka, jsightler, mbriskar
#addtopic Status Reports
#addtopic Next steps
#nexttopic
#info ...
#endmeeting
Useful Commands: #action #agreed #help #info #idea #link #topic.</pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-04-01 14:59:45 EDT
</div>
</div>
</body>
</html>